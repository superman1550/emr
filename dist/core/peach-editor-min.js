/*! For license information please see peach-editor-min.js.LICENSE.txt */
(()=>{var t={5296:(t,e,i)=>{var n=i(5735).default;function r(){"use strict";t.exports=r=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},i=Object.prototype,a=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,i){return t[e]=i}}function u(t,e,i,n){var r=e&&e.prototype instanceof p?e:p,a=Object.create(r.prototype),s=new S(n||[]);return a._invoke=function(t,e,i){var n="suspendedStart";return function(r,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw a;return{value:void 0,done:!0}}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var o=T(s,i);if(o){if(o===d)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=f(t,e,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(t,i,s),a}function f(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d={};function p(){}function g(){}function v(){}var _={};c(_,o,(function(){return this}));var y=Object.getPrototypeOf,E=y&&y(y(O([])));E&&E!==i&&a.call(E,o)&&(_=E);var m=v.prototype=p.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(r,s,o,l){var h=f(t[r],t,s);if("throw"!==h.type){var c=h.arg,u=c.value;return u&&"object"==n(u)&&a.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,o,l)}),(function(t){i("throw",t,o,l)})):e.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return i("throw",t,o,l)}))}l(h.arg)}var r;this._invoke=function(t,n){function a(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(a,a):a()}}function T(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=f(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,d;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(a.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return g.prototype=v,c(m,"constructor",v),c(v,"constructor",g),g.displayName=c(v,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,h,"GeneratorFunction")),t.prototype=Object.create(m),t},e.awrap=function(t){return{__await:t}},w(b.prototype),c(b.prototype,l,(function(){return this})),e.AsyncIterator=b,e.async=function(t,i,n,r,a){void 0===a&&(a=Promise);var s=new b(u(t,i,n,r),a);return e.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},w(m),c(m,h,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=O,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,n){return s.type="throw",s.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var o=a.call(r,"catchLoc"),l=a.call(r,"finallyLoc");if(o&&l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),k(i),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;k(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:O(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},5735:t=>{function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},2207:(t,e,i)=>{var n=i(5296)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},3939:t=>{"use strict";var e={single_source_shortest_paths:function(t,i,n){var r={},a={};a[i]=0;var s,o,l,h,c,u,f,d=e.PriorityQueue.make();for(d.push(i,0);!d.empty();)for(l in o=(s=d.pop()).value,h=s.cost,c=t[o]||{})c.hasOwnProperty(l)&&(u=h+c[l],f=a[l],(void 0===a[l]||f>u)&&(a[l]=u,d.push(l,u),r[l]=o));if(void 0!==n&&void 0===a[n]){var p=["Could not find a path from ",i," to ",n,"."].join("");throw new Error(p)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var i=[],n=e;n;)i.push(n),t[n],n=t[n];return i.reverse(),i},find_path:function(t,i,n){var r=e.single_source_shortest_paths(t,i,n);return e.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(t){var i,n=e.PriorityQueue,r={};for(i in t=t||{},n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.queue=[],r.sorter=t.sorter||n.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var i={value:t,cost:e};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=e},6129:(t,e,i)=>{"use strict";var n=f(i(9368)),r=f(i(1490)),a=f(i(8165)),s=f(i(3623)),o=f(i(8179)),l=f(i(9796)),h=f(i(4205)),c=i(8157),u=f(i(5099));function f(t){return t&&t.__esModule?t:{default:t}}var d=function(){},p=function(t,e,i){var n=new d;if(void 0===t)throw Error("No element to render on was provided.");return n._renderProperties=(0,o.default)(t),n._encodings=[],n._options=u.default,n._errorHandler=new h.default(n),void 0!==e&&((i=i||{}).format||(i.format=y()),n.options(i)[i.format](e,i).render()),n};for(var g in p.getModule=function(t){return n.default[t]},n.default)n.default.hasOwnProperty(g)&&v(n.default,g);function v(t,e){d.prototype[e]=d.prototype[e.toUpperCase()]=d.prototype[e.toLowerCase()]=function(i,n){var a=this;return a._errorHandler.wrapBarcodeCall((function(){n.text=void 0===n.text?void 0:""+n.text;var s=(0,r.default)(a._options,n);s=(0,l.default)(s);var o=t[e],h=_(i,o,s);return a._encodings.push(h),a}))}}function _(t,e,i){var n=new e(t=""+t,i);if(!n.valid())throw new c.InvalidInputException(n.constructor.name,t);var s=n.encode();s=(0,a.default)(s);for(var o=0;o<s.length;o++)s[o].options=(0,r.default)(i,s[o].options);return s}function y(){return n.default.CODE128?"CODE128":Object.keys(n.default)[0]}function E(t,e,i){e=(0,a.default)(e);for(var n=0;n<e.length;n++)e[n].options=(0,r.default)(i,e[n].options),(0,s.default)(e[n].options);(0,s.default)(i),new(0,t.renderer)(t.element,e,i).render(),t.afterRender&&t.afterRender()}d.prototype.options=function(t){return this._options=(0,r.default)(this._options,t),this},d.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this},d.prototype.init=function(){var t;if(this._renderProperties)for(var e in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){t=this._renderProperties[e];var i=(0,r.default)(this._options,t.options);"auto"==i.format&&(i.format=y()),this._errorHandler.wrapBarcodeCall((function(){var e=_(i.value,n.default[i.format.toUpperCase()],i);E(t,e,i)}))}},d.prototype.render=function(){if(!this._renderProperties)throw new c.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)E(this._renderProperties[t],this._encodings,this._options);else E(this._renderProperties,this._encodings,this._options);return this},d.prototype._defaults=u.default,"undefined"!=typeof window&&(window.JsBarcode=p),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(t,e){var i=[];return jQuery(this).each((function(){i.push(this)})),p(i,t,e)}),t.exports=p},2444:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=e,this.text=i.text||e,this.options=i}},3651:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n=i(2444))&&n.__esModule?n:{default:n},s=i(2700),o=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.substring(1),i));return n.bytes=t.split("").map((function(t){return t.charCodeAt(0)})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var t=this.bytes,i=t.shift()-105,n=s.SET_BY_CODE[i];if(void 0===n)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&t.unshift(s.FNC1);var r=e.next(t,1,n);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+r.result+e.getBar((r.checksum+i)%s.MODULO)+e.getBar(s.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var t=this.options.ean128||!1;return"string"==typeof t&&(t="true"===t.toLowerCase()),t}}],[{key:"getBar",value:function(t){return s.BARS[t]?s.BARS[t].toString():""}},{key:"correctIndex",value:function(t,e){if(e===s.SET_A){var i=t.shift();return i<32?i+64:i-32}return e===s.SET_B?t.shift()-32:10*(t.shift()-48)+t.shift()-48}},{key:"next",value:function(t,i,n){if(!t.length)return{result:"",checksum:0};var r=void 0,a=void 0;if(t[0]>=200){a=t.shift()-105;var o=s.SWAP[a];void 0!==o?r=e.next(t,i+1,o):(n!==s.SET_A&&n!==s.SET_B||a!==s.SHIFT||(t[0]=n===s.SET_A?t[0]>95?t[0]-96:t[0]:t[0]<32?t[0]+96:t[0]),r=e.next(t,i+1,n))}else a=e.correctIndex(t,n),r=e.next(t,i+1,n);var l=a*i;return{result:e.getBar(a)+r.result,checksum:l+r.checksum}}}]),e}(a.default);e.default=o},3804:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n=i(3651))&&n.__esModule?n:{default:n},s=i(2700),o=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.A_START_CHAR+t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return new RegExp("^"+s.A_CHARS+"+$").test(this.data)}}]),e}(a.default);e.default=o},3541:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n=i(3651))&&n.__esModule?n:{default:n},s=i(2700),o=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.B_START_CHAR+t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return new RegExp("^"+s.B_CHARS+"+$").test(this.data)}}]),e}(a.default);e.default=o},5798:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n=i(3651))&&n.__esModule?n:{default:n},s=i(2700),o=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s.C_START_CHAR+t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return new RegExp("^"+s.C_CHARS+"+$").test(this.data)}}]),e}(a.default);e.default=o},4845:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(3651)),r=a(i(4802));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var o=function(t){function e(t,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(t))var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,r.default)(t),i));else n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return s(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.default);e.default=o},4802:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2700),r=function(t){return t.match(new RegExp("^"+n.A_CHARS+"*"))[0].length},a=function(t){return t.match(new RegExp("^"+n.B_CHARS+"*"))[0].length},s=function(t){return t.match(new RegExp("^"+n.C_CHARS+"*"))[0]};function o(t,e){var i=e?n.A_CHARS:n.B_CHARS,r=t.match(new RegExp("^("+i+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+String.fromCharCode(204)+l(t.substring(r[1].length));var a=t.match(new RegExp("^"+i+"+"))[0];return a.length===t.length?t:a+String.fromCharCode(e?205:206)+o(t.substring(a.length),!e)}function l(t){var e=s(t),i=e.length;if(i===t.length)return t;t=t.substring(i);var n=r(t)>=a(t);return e+String.fromCharCode(n?206:205)+o(t,n)}e.default=function(t){var e=void 0;if(s(t).length>=2)e=n.C_START_CHAR+l(t);else{var i=r(t)>a(t);e=(i?n.A_START_CHAR:n.B_START_CHAR)+o(t,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(t,e){return String.fromCharCode(203)+e}))}},2700:(t,e)=>{"use strict";var i;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(e,"__esModule",{value:!0});var r=e.SET_A=0,a=e.SET_B=1,s=e.SET_C=2,o=(e.SHIFT=98,e.START_A=103),l=e.START_B=104,h=e.START_C=105;e.MODULO=103,e.STOP=106,e.FNC1=207,e.SET_BY_CODE=(n(i={},o,r),n(i,l,a),n(i,h,s),i),e.SWAP={101:r,100:a,99:s},e.A_START_CHAR=String.fromCharCode(208),e.B_START_CHAR=String.fromCharCode(209),e.C_START_CHAR=String.fromCharCode(210),e.A_CHARS="[\0-_È-Ï]",e.B_CHARS="[ -È-Ï]",e.C_CHARS="(Ï*[0-9]{2}Ï*)",e.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},1509:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CODE128C=e.CODE128B=e.CODE128A=e.CODE128=void 0;var n=o(i(4845)),r=o(i(3804)),a=o(i(3541)),s=o(i(5798));function o(t){return t&&t.__esModule?t:{default:t}}e.CODE128=n.default,e.CODE128A=r.default,e.CODE128B=a.default,e.CODE128C=s.default},1428:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CODE39=void 0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t.toUpperCase(),i.mod43&&(t+=function(t){return s[t]}(function(t){for(var e=0,i=0;i<t.length;i++)e+=h(t[i]);return e%43}(t))),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"encode",value:function(){for(var t=l("*"),e=0;e<this.data.length;e++)t+=l(this.data[e])+"0";return{data:t+=l("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),e}(((n=i(2444))&&n.__esModule?n:{default:n}).default),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],o=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function l(t){return function(t){return o[t].toString(2)}(h(t))}function h(t){return s.indexOf(t)}e.CODE39=a},4754:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(6575),a=s(i(6350));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.fontSize=!i.flat&&i.fontSize>10*i.width?10*i.width:i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(t,e){return this.text.substr(t,e)}},{key:"leftEncode",value:function(t,e){return(0,a.default)(t,e)}},{key:"rightText",value:function(t,e){return this.text.substr(t,e)}},{key:"rightEncode",value:function(t,e){return(0,a.default)(t,e)}},{key:"encodeGuarded",value:function(){var t={fontSize:this.fontSize},e={height:this.guardHeight};return[{data:r.SIDE_BIN,options:e},{data:this.leftEncode(),text:this.leftText(),options:t},{data:r.MIDDLE_BIN,options:e},{data:this.rightEncode(),text:this.rightText(),options:t},{data:r.SIDE_BIN,options:e}]}},{key:"encodeFlat",value:function(){return{data:[r.SIDE_BIN,this.leftEncode(),r.MIDDLE_BIN,this.rightEncode(),r.SIDE_BIN].join(""),text:this.text}}}]),e}(s(i(2444)).default);e.default=o},4250:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},s=i(6575),o=(n=i(4754))&&n.__esModule?n:{default:n},l=function(t){return(10-t.substr(0,12).split("").map((function(t){return+t})).reduce((function(t,e,i){return i%2?t+3*e:t+e}),0)%10)%10},h=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{12}$/)&&(t+=l(t));var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.lastChar=i.lastChar,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===l(this.data)}},{key:"leftText",value:function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var t=this.data.substr(1,6),i=s.EAN13_STRUCTURE[this.data[0]];return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,i)}},{key:"rightText",value:function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var t=this.data.substr(7,6);return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRRRR")}},{key:"encodeGuarded",value:function(){var t=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(t.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(t.push({data:"00"}),t.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),t}}]),e}(o.default);e.default=h},7570:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(6575),a=s(i(6350));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var t=r.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,a.default)(this.data,t,"01"),text:this.text}}}]),e}(s(i(2444)).default);e.default=o},8075:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(6575),a=s(i(6350));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var t=r.EAN5_STRUCTURE[function(t){return t.split("").map((function(t){return+t})).reduce((function(t,e,i){return i%2?t+9*e:t+3*e}),0)%10}(this.data)];return{data:"1011"+(0,a.default)(this.data,t,"01"),text:this.text}}}]),e}(s(i(2444)).default);e.default=o},8784:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},s=(n=i(4754))&&n.__esModule?n:{default:n},o=function(t){return(10-t.substr(0,7).split("").map((function(t){return+t})).reduce((function(t,e,i){return i%2?t+e:t+3*e}),0)%10)%10},l=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{7}$/)&&(t+=o(t)),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===o(this.data)}},{key:"leftText",value:function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var t=this.data.substr(0,4);return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,"LLLL")}},{key:"rightText",value:function(){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var t=this.data.substr(4,4);return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRR")}}]),e}(s.default);e.default=l},7960:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.checksum=o;var r=a(i(6350));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{11}$/)&&(t+=o(t));var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.displayValue=i.displayValue,i.fontSize>10*i.width?n.fontSize=10*i.width:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==o(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t="";return t+="101",t+=(0,r.default)(this.data.substr(0,6),"LLLLLL"),t+="01010",t+=(0,r.default)(this.data.substr(6,6),"RRRRRR"),{data:t+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var t=[];return this.displayValue&&t.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101"+(0,r.default)(this.data[0],"L"),options:{height:this.guardHeight}}),t.push({data:(0,r.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),t.push({data:"01010",options:{height:this.guardHeight}}),t.push({data:(0,r.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),t.push({data:(0,r.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&t.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),t}}]),e}(a(i(2444)).default);function o(t){var e,i=0;for(e=1;e<11;e+=2)i+=parseInt(t[e]);for(e=0;e<11;e+=2)i+=3*parseInt(t[e]);return(10-i%10)%10}e.default=s},3781:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=o(i(6350)),a=o(i(2444)),s=i(7960);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],c=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],u=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));if(n.isValid=!1,-1!==t.search(/^[0-9]{6}$/))n.middleDigits=t,n.upcA=f(t,"0"),n.text=i.text||""+n.upcA[0]+t+n.upcA[n.upcA.length-1],n.isValid=!0;else{if(-1===t.search(/^[01][0-9]{7}$/))return l(n);if(n.middleDigits=t.substring(1,t.length-1),n.upcA=f(n.middleDigits,t[0]),n.upcA[n.upcA.length-1]!==t[t.length-1])return l(n);n.isValid=!0}return n.displayValue=i.displayValue,i.fontSize>10*i.width?n.fontSize=10*i.width:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var t="";return t+="101",t+=this.encodeMiddleDigits(),{data:t+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var t=[];return this.displayValue&&t.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),t.push({data:"101",options:{height:this.guardHeight}}),t.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),t.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&t.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),t}},{key:"encodeMiddleDigits",value:function(){var t=this.upcA[0],e=this.upcA[this.upcA.length-1],i=c[parseInt(e)][parseInt(t)];return(0,r.default)(this.middleDigits,i)}}]),e}(a.default);function f(t,e){for(var i=parseInt(t[t.length-1]),n=h[i],r="",a=0,o=0;o<n.length;o++){var l=n[o];r+="X"===l?t[a++]:l}return(r=""+e+r)+(0,s.checksum)(r)}e.default=u},6575:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIDE_BIN="101",e.MIDDLE_BIN="01010",e.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},e.EAN2_STRUCTURE=["LL","LG","GL","GG"],e.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],e.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},6350:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(6575);e.default=function(t,e,i){var r=t.split("").map((function(t,i){return n.BINARIES[e[i]]})).map((function(e,i){return e?e[t[i]]:""}));if(i){var a=t.length-1;r=r.map((function(t,e){return e<a?t+i:t}))}return r.join("")}},5726:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UPCE=e.UPC=e.EAN2=e.EAN5=e.EAN8=e.EAN13=void 0;var n=h(i(4250)),r=h(i(8784)),a=h(i(8075)),s=h(i(7570)),o=h(i(7960)),l=h(i(3781));function h(t){return t&&t.__esModule?t:{default:t}}e.EAN13=n.default,e.EAN8=r.default,e.EAN5=a.default,e.EAN2=s.default,e.UPC=o.default,e.UPCE=l.default},1886:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericBarcode=void 0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(((n=i(2444))&&n.__esModule?n:{default:n}).default);e.GenericBarcode=a},739:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1135),s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var t=this,e=this.data.match(/.{2}/g).map((function(e){return t.encodePair(e)})).join("");return{data:a.START_BIN+e+a.END_BIN,text:this.text}}},{key:"encodePair",value:function(t){var e=a.BINARIES[t[1]];return a.BINARIES[t[0]].split("").map((function(t,i){return("1"===t?"111":"1")+("1"===e[i]?"000":"0")})).join("")}}]),e}(((n=i(2444))&&n.__esModule?n:{default:n}).default);e.default=s},8122:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n=i(739))&&n.__esModule?n:{default:n},s=function(t){var e=t.substr(0,13).split("").map((function(t){return parseInt(t,10)})).reduce((function(t,e,i){return t+e*(3-i%2*2)}),0);return 10*Math.ceil(e/10)-e},o=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{13}$/)&&(t+=s(t)),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===s(this.data)}}]),e}(a.default);e.default=o},1135:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.START_BIN="1010",e.END_BIN="11101",e.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},5070:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITF14=e.ITF=void 0;var n=a(i(739)),r=a(i(8122));function a(t){return t&&t.__esModule?t:{default:t}}e.ITF=n.default,e.ITF14=r.default},3551:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"encode",value:function(){for(var t="110",e=0;e<this.data.length;e++){var i=parseInt(this.data[e]).toString(2);i=s(i,4-i.length);for(var n=0;n<i.length;n++)t+="0"==i[n]?"100":"110"}return{data:t+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),e}(((n=i(2444))&&n.__esModule?n:{default:n}).default);function s(t,e){for(var i=0;i<e;i++)t="0"+t;return t}e.default=a},6338:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(3551))&&n.__esModule?n:{default:n},a=i(6320),s=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,a.mod10)(t),i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=s},23:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(3551))&&n.__esModule?n:{default:n},a=i(6320),s=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t+=(0,a.mod10)(t),t+=(0,a.mod10)(t),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=s},6065:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(3551))&&n.__esModule?n:{default:n},a=i(6320),s=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,a.mod11)(t),i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=s},7052:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=(n=i(3551))&&n.__esModule?n:{default:n},a=i(6320),s=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t+=(0,a.mod11)(t),t+=(0,a.mod10)(t),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=s},6320:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mod10=function(t){for(var e=0,i=0;i<t.length;i++){var n=parseInt(t[i]);(i+t.length)%2==0?e+=n:e+=2*n%10+Math.floor(2*n/10)}return(10-e%10)%10},e.mod11=function(t){for(var e=0,i=[2,3,4,5,6,7],n=0;n<t.length;n++){var r=parseInt(t[t.length-1-n]);e+=i[n%i.length]*r}return(11-e%11)%11}},8248:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MSI1110=e.MSI1010=e.MSI11=e.MSI10=e.MSI=void 0;var n=l(i(3551)),r=l(i(6338)),a=l(i(6065)),s=l(i(23)),o=l(i(7052));function l(t){return t&&t.__esModule?t:{default:t}}e.MSI=n.default,e.MSI10=r.default,e.MSI11=a.default,e.MSI1010=s.default,e.MSI1110=o.default},1133:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.codabar=void 0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),0===t.search(/^[0-9\-\$\:\.\+\/]+$/)&&(t="A"+t+"A");var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toUpperCase(),i));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var t=[],e=this.getEncodings(),i=0;i<this.data.length;i++)t.push(e[this.data.charAt(i)]),i!==this.data.length-1&&t.push("0");return{text:this.text,data:t.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(((n=i(2444))&&n.__esModule?n:{default:n}).default);e.codabar=a},9368:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1428),r=i(1509),a=i(5726),s=i(5070),o=i(8248),l=i(2889),h=i(1133),c=i(1886);e.default={CODE39:n.CODE39,CODE128:r.CODE128,CODE128A:r.CODE128A,CODE128B:r.CODE128B,CODE128C:r.CODE128C,EAN13:a.EAN13,EAN8:a.EAN8,EAN5:a.EAN5,EAN2:a.EAN2,UPC:a.UPC,UPCE:a.UPCE,ITF14:s.ITF14,ITF:s.ITF,MSI:o.MSI,MSI10:o.MSI10,MSI11:o.MSI11,MSI1010:o.MSI1010,MSI1110:o.MSI1110,pharmacode:l.pharmacode,codabar:h.codabar,GenericBarcode:c.GenericBarcode}},2889:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pharmacode=void 0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.number=parseInt(t,10),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"encode",value:function(){for(var t=this.number,e="";!isNaN(t)&&0!=t;)t%2==0?(e="11100"+e,t=(t-2)/2):(e="100"+e,t=(t-1)/2);return{data:e=e.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(((n=i(2444))&&n.__esModule?n:{default:n}).default);e.pharmacode=a},4205:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e}return i(t,[{key:"handleCatch",value:function(t){if("InvalidInputException"!==t.name)throw t;if(this.api._options.valid===this.api._defaults.valid)throw t.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(t){try{var e=t.apply(void 0,arguments);return this.api._options.valid(!0),e}catch(t){return this.handleCatch(t),this.api}}}]),t}();e.default=n},8157:(t,e)=>{"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(t,r){i(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidInputException",a.symbology=t,a.input=r,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return r(e,Error),e}(),s=function(t){function e(){i(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return r(e,Error),e}(),o=function(t){function e(){i(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return r(e,Error),e}();e.InvalidInputException=a,e.InvalidElementException=s,e.NoElementException=o},3623:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}},892:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(9796)),r=a(i(5099));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e={};for(var i in r.default)r.default.hasOwnProperty(i)&&(t.hasAttribute("jsbarcode-"+i.toLowerCase())&&(e[i]=t.getAttribute("jsbarcode-"+i.toLowerCase())),t.hasAttribute("data-"+i.toLowerCase())&&(e[i]=t.getAttribute("data-"+i.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),(0,n.default)(e)}},8179:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=o(i(892)),a=o(i(2727)),s=i(8157);function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){if("string"==typeof e)return function(e){var i=document.querySelectorAll(e);if(0!==i.length){for(var n=[],r=0;r<i.length;r++)n.push(t(i[r]));return n}}(e);if(Array.isArray(e)){for(var i=[],o=0;o<e.length;o++)i.push(t(e[o]));return i}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return l=e,{element:h=document.createElement("canvas"),options:(0,r.default)(l),renderer:a.default.CanvasRenderer,afterRender:function(){l.setAttribute("src",h.toDataURL())}};if(e&&e.nodeName&&"svg"===e.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&e instanceof SVGElement)return{element:e,options:(0,r.default)(e),renderer:a.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:(0,r.default)(e),renderer:a.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:a.default.CanvasRenderer};if(e&&"object"===(void 0===e?"undefined":n(e))&&!e.nodeName)return{element:e,renderer:a.default.ObjectRenderer};throw new s.InvalidElementException;var l,h}},8165:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[];return function t(i){if(Array.isArray(i))for(var n=0;n<i.length;n++)t(i[n]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}(t),e}},1490:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.default=function(t,e){return i({},t,e)}},9796:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var i in e)e.hasOwnProperty(i)&&"string"==typeof t[i=e[i]]&&(t[i]=parseInt(t[i],10));return"string"==typeof t.displayValue&&(t.displayValue="false"!=t.displayValue),t}},5099:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},1687:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n=i(1490))&&n.__esModule?n:{default:n},s=i(6258),o=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.encodings=i,this.options=n}return r(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var t=0;t<this.encodings.length;t++){var e=(0,a.default)(this.options,this.encodings[t].options);this.drawCanvasBarcode(e,this.encodings[t]),this.drawCanvasText(e,this.encodings[t]),this.moveCanvasDrawing(this.encodings[t])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var t=this.canvas.getContext("2d");t.save(),(0,s.calculateEncodingAttributes)(this.encodings,this.options,t);var e=(0,s.getTotalWidthOfEncodings)(this.encodings),i=(0,s.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=e+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,t.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(t.fillStyle=this.options.background,t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(t,e){var i,n=this.canvas.getContext("2d"),r=e.data;i="top"==t.textPosition?t.marginTop+t.fontSize+t.textMargin:t.marginTop,n.fillStyle=t.lineColor;for(var a=0;a<r.length;a++){var s=a*t.width+e.barcodePadding;"1"===r[a]?n.fillRect(s,i,t.width,t.height):r[a]&&n.fillRect(s,i,t.width,t.height*r[a])}}},{key:"drawCanvasText",value:function(t,e){var i,n,r=this.canvas.getContext("2d"),a=t.fontOptions+" "+t.fontSize+"px "+t.font;t.displayValue&&(n="top"==t.textPosition?t.marginTop+t.fontSize-t.textMargin:t.height+t.textMargin+t.marginTop+t.fontSize,r.font=a,"left"==t.textAlign||e.barcodePadding>0?(i=0,r.textAlign="left"):"right"==t.textAlign?(i=e.width-1,r.textAlign="right"):(i=e.width/2,r.textAlign="center"),r.fillText(e.text,i,n))}},{key:"moveCanvasDrawing",value:function(t){this.canvas.getContext("2d").translate(t.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),t}();e.default=o},2727:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(1687)),r=s(i(5965)),a=s(i(3528));function s(t){return t&&t.__esModule?t:{default:t}}e.default={CanvasRenderer:n.default,SVGRenderer:r.default,ObjectRenderer:a.default}},3528:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),n=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.object=e,this.encodings=i,this.options=n}return i(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();e.default=n},6258:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTotalWidthOfEncodings=e.calculateEncodingAttributes=e.getBarcodePadding=e.getEncodingHeight=e.getMaximumHeightOfEncodings=void 0;var n,r=(n=i(1490))&&n.__esModule?n:{default:n};function a(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function s(t,e,i){if(i.displayValue&&e<t){if("center"==i.textAlign)return Math.floor((t-e)/2);if("left"==i.textAlign)return 0;if("right"==i.textAlign)return Math.floor(t-e)}return 0}function o(t,e,i){var n;if(i)n=i;else{if("undefined"==typeof document)return 0;n=document.createElement("canvas").getContext("2d")}n.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var r=n.measureText(t);return r?r.width:0}e.getMaximumHeightOfEncodings=function(t){for(var e=0,i=0;i<t.length;i++)t[i].height>e&&(e=t[i].height);return e},e.getEncodingHeight=a,e.getBarcodePadding=s,e.calculateEncodingAttributes=function(t,e,i){for(var n=0;n<t.length;n++){var l,h=t[n],c=(0,r.default)(e,h.options);l=c.displayValue?o(h.text,c,i):0;var u=h.data.length*c.width;h.width=Math.ceil(Math.max(l,u)),h.height=a(h,c),h.barcodePadding=s(l,u,c)}},e.getTotalWidthOfEncodings=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].width;return e}},5965:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=(n=i(1490))&&n.__esModule?n:{default:n},s=i(6258),o="http://www.w3.org/2000/svg",l=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.svg=e,this.encodings=i,this.options=n,this.document=n.xmlDocument||document}return r(t,[{key:"render",value:function(){var t=this.options.marginLeft;this.prepareSVG();for(var e=0;e<this.encodings.length;e++){var i=this.encodings[e],n=(0,a.default)(this.options,i.options),r=this.createGroup(t,n.marginTop,this.svg);this.setGroupOptions(r,n),this.drawSvgBarcode(r,n,i),this.drawSVGText(r,n,i),t+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,s.calculateEncodingAttributes)(this.encodings,this.options);var t=(0,s.getTotalWidthOfEncodings)(this.encodings),e=(0,s.getMaximumHeightOfEncodings)(this.encodings),i=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,e),this.options.background&&this.drawRect(0,0,i,e,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(t,e,i){var n,r=i.data;n="top"==e.textPosition?e.fontSize+e.textMargin:0;for(var a=0,s=0,o=0;o<r.length;o++)s=o*e.width+i.barcodePadding,"1"===r[o]?a++:a>0&&(this.drawRect(s-e.width*a,n,e.width*a,e.height,t),a=0);a>0&&this.drawRect(s-e.width*(a-1),n,e.width*a,e.height,t)}},{key:"drawSVGText",value:function(t,e,i){var n,r,a=this.document.createElementNS(o,"text");e.displayValue&&(a.setAttribute("style","font:"+e.fontOptions+" "+e.fontSize+"px "+e.font),r="top"==e.textPosition?e.fontSize-e.textMargin:e.height+e.textMargin+e.fontSize,"left"==e.textAlign||i.barcodePadding>0?(n=0,a.setAttribute("text-anchor","start")):"right"==e.textAlign?(n=i.width-1,a.setAttribute("text-anchor","end")):(n=i.width/2,a.setAttribute("text-anchor","middle")),a.setAttribute("x",n),a.setAttribute("y",r),a.appendChild(this.document.createTextNode(i.text)),t.appendChild(a))}},{key:"setSvgAttributes",value:function(t,e){var i=this.svg;i.setAttribute("width",t+"px"),i.setAttribute("height",e+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+t+" "+e),i.setAttribute("xmlns",o),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(t,e,i){var n=this.document.createElementNS(o,"g");return n.setAttribute("transform","translate("+t+", "+e+")"),i.appendChild(n),n}},{key:"setGroupOptions",value:function(t,e){t.setAttribute("style","fill:"+e.lineColor+";")}},{key:"drawRect",value:function(t,e,i,n,r){var a=this.document.createElementNS(o,"rect");return a.setAttribute("x",t),a.setAttribute("y",e),a.setAttribute("width",i),a.setAttribute("height",n),r.appendChild(a),a}}]),t}();e.default=l},7583:(t,e,i)=>{const n=i(1333),r=i(157),a=i(7899),s=i(6756);function o(t,e,i,a,s){const o=[].slice.call(arguments,1),l=o.length,h="function"==typeof o[l-1];if(!h&&!n())throw new Error("Callback required as last argument");if(!h){if(l<1)throw new Error("Too few arguments provided");return 1===l?(i=e,e=a=void 0):2!==l||e.getContext||(a=i,i=e,e=void 0),new Promise((function(n,s){try{const s=r.create(i,a);n(t(s,e,a))}catch(t){s(t)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(s=i,i=e,e=a=void 0):3===l&&(e.getContext&&void 0===s?(s=a,a=void 0):(s=a,a=i,i=e,e=void 0));try{const n=r.create(i,a);s(null,t(n,e,a))}catch(t){s(t)}}e.create=r.create,e.toCanvas=o.bind(null,a.render),e.toDataURL=o.bind(null,a.renderToDataURL),e.toString=o.bind(null,(function(t,e,i){return s.render(t,i)}))},1333:t=>{t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6421:(t,e,i)=>{const n=i(6886).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,i=n(t),r=145===i?26:2*Math.ceil((i-13)/(2*e-2)),a=[i-7];for(let t=1;t<e-1;t++)a[t]=a[t-1]-r;return a.push(6),a.reverse()},e.getPositions=function(t){const i=[],n=e.getRowColCoords(t),r=n.length;for(let t=0;t<r;t++)for(let e=0;e<r;e++)0===t&&0===e||0===t&&e===r-1||t===r-1&&0===e||i.push([n[t],n[e]]);return i}},1433:(t,e,i)=>{const n=i(208),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(t){this.mode=n.ALPHANUMERIC,this.data=t}a.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let i=45*r.indexOf(this.data[e]);i+=r.indexOf(this.data[e+1]),t.put(i,11)}this.data.length%2&&t.put(r.indexOf(this.data[e]),6)},t.exports=a},9899:t=>{function e(){this.buffer=[],this.length=0}e.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=e},8820:t=>{function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}e.prototype.set=function(t,e,i,n){const r=t*this.size+e;this.data[r]=i,n&&(this.reservedBit[r]=!0)},e.prototype.get=function(t,e){return this.data[t*this.size+e]},e.prototype.xor=function(t,e,i){this.data[t*this.size+e]^=i},e.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=e},5822:(t,e,i)=>{const n=i(208);function r(t){this.mode=n.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}r.getBitsLength=function(t){return 8*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){for(let e=0,i=this.data.length;e<i;e++)t.put(this.data[e],8)},t.exports=r},7518:(t,e,i)=>{const n=i(9953),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case n.L:return r[4*(t-1)+0];case n.M:return r[4*(t-1)+1];case n.Q:return r[4*(t-1)+2];case n.H:return r[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case n.L:return a[4*(t-1)+0];case n.M:return a[4*(t-1)+1];case n.Q:return a[4*(t-1)+2];case n.H:return a[4*(t-1)+3];default:return}}},9953:(t,e)=>{e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,i){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return i}}},7756:(t,e,i)=>{const n=i(6886).getSymbolSize;e.getPositions=function(t){const e=n(t);return[[0,0],[e-7,0],[0,e-7]]}},4565:(t,e,i)=>{const n=i(6886),r=n.getBCHDigit(1335);e.getEncodedBits=function(t,e){const i=t.bit<<3|e;let a=i<<10;for(;n.getBCHDigit(a)-r>=0;)a^=1335<<n.getBCHDigit(a)-r;return 21522^(i<<10|a)}},2731:(t,e)=>{const i=new Uint8Array(512),n=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)i[e]=t,n[t]=e,t<<=1,256&t&&(t^=285);for(let t=255;t<512;t++)i[t]=i[t-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return n[t]},e.exp=function(t){return i[t]},e.mul=function(t,e){return 0===t||0===e?0:i[n[t]+n[e]]}},4861:(t,e,i)=>{const n=i(208),r=i(6886);function a(t){this.mode=n.KANJI,this.data=t}a.getBitsLength=function(t){return 13*t},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let i=r.toSJIS(this.data[e]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13)}},t.exports=a},1332:(t,e)=>{e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function i(t,i,n){switch(t){case e.Patterns.PATTERN000:return(i+n)%2==0;case e.Patterns.PATTERN001:return i%2==0;case e.Patterns.PATTERN010:return n%3==0;case e.Patterns.PATTERN011:return(i+n)%3==0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(n/3))%2==0;case e.Patterns.PATTERN101:return i*n%2+i*n%3==0;case e.Patterns.PATTERN110:return(i*n%2+i*n%3)%2==0;case e.Patterns.PATTERN111:return(i*n%3+(i+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let i=0,n=0,r=0,a=null,s=null;for(let o=0;o<e;o++){n=r=0,a=s=null;for(let l=0;l<e;l++){let e=t.get(o,l);e===a?n++:(n>=5&&(i+=n-5+3),a=e,n=1),e=t.get(l,o),e===s?r++:(r>=5&&(i+=r-5+3),s=e,r=1)}n>=5&&(i+=n-5+3),r>=5&&(i+=r-5+3)}return i},e.getPenaltyN2=function(t){const e=t.size;let i=0;for(let n=0;n<e-1;n++)for(let r=0;r<e-1;r++){const e=t.get(n,r)+t.get(n,r+1)+t.get(n+1,r)+t.get(n+1,r+1);4!==e&&0!==e||i++}return 3*i},e.getPenaltyN3=function(t){const e=t.size;let i=0,n=0,r=0;for(let a=0;a<e;a++){n=r=0;for(let s=0;s<e;s++)n=n<<1&2047|t.get(a,s),s>=10&&(1488===n||93===n)&&i++,r=r<<1&2047|t.get(s,a),s>=10&&(1488===r||93===r)&&i++}return 40*i},e.getPenaltyN4=function(t){let e=0;const i=t.data.length;for(let n=0;n<i;n++)e+=t.data[n];return 10*Math.abs(Math.ceil(100*e/i/5)-10)},e.applyMask=function(t,e){const n=e.size;for(let r=0;r<n;r++)for(let a=0;a<n;a++)e.isReserved(a,r)||e.xor(a,r,i(t,a,r))},e.getBestMask=function(t,i){const n=Object.keys(e.Patterns).length;let r=0,a=1/0;for(let s=0;s<n;s++){i(s),e.applyMask(s,t);const n=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(s,t),n<a&&(a=n,r=s)}return r}},208:(t,e,i)=>{const n=i(1878),r=i(7044);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!n.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return r.testNumeric(t)?e.NUMERIC:r.testAlphanumeric(t)?e.ALPHANUMERIC:r.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,i){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return i}}},4357:(t,e,i)=>{const n=i(208);function r(t){this.mode=n.NUMERIC,this.data=t.toString()}r.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e,i,n;for(e=0;e+3<=this.data.length;e+=3)i=this.data.substr(e,3),n=parseInt(i,10),t.put(n,10);const r=this.data.length-e;r>0&&(i=this.data.substr(e),n=parseInt(i,10),t.put(n,3*r+1))},t.exports=r},4713:(t,e,i)=>{const n=i(2731);e.mul=function(t,e){const i=new Uint8Array(t.length+e.length-1);for(let r=0;r<t.length;r++)for(let a=0;a<e.length;a++)i[r+a]^=n.mul(t[r],e[a]);return i},e.mod=function(t,e){let i=new Uint8Array(t);for(;i.length-e.length>=0;){const t=i[0];for(let r=0;r<e.length;r++)i[r]^=n.mul(e[r],t);let r=0;for(;r<i.length&&0===i[r];)r++;i=i.slice(r)}return i},e.generateECPolynomial=function(t){let i=new Uint8Array([1]);for(let r=0;r<t;r++)i=e.mul(i,new Uint8Array([1,n.exp(r)]));return i}},157:(t,e,i)=>{const n=i(6886),r=i(9953),a=i(9899),s=i(8820),o=i(6421),l=i(7756),h=i(1332),c=i(7518),u=i(4764),f=i(1427),d=i(4565),p=i(208),g=i(9801);function v(t,e,i){const n=t.size,r=d.getEncodedBits(e,i);let a,s;for(a=0;a<15;a++)s=1==(r>>a&1),a<6?t.set(a,8,s,!0):a<8?t.set(a+1,8,s,!0):t.set(n-15+a,8,s,!0),a<8?t.set(8,n-a-1,s,!0):a<9?t.set(8,15-a-1+1,s,!0):t.set(8,15-a-1,s,!0);t.set(n-8,8,1,!0)}function _(t,e,i,r){let d;if(Array.isArray(t))d=g.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let n=e;if(!n){const e=g.rawSplit(t);n=f.getBestVersionForData(e,i)}d=g.fromString(t,n||40)}}const _=f.getBestVersionForData(d,i);if(!_)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<_)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+_+".\n")}else e=_;const y=function(t,e,i){const r=new a;i.forEach((function(e){r.put(e.mode.bit,4),r.put(e.getLength(),p.getCharCountIndicator(e.mode,t)),e.write(r)}));const s=8*(n.getSymbolTotalCodewords(t)-c.getTotalCodewordsCount(t,e));for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const o=(s-r.getLengthInBits())/8;for(let t=0;t<o;t++)r.put(t%2?17:236,8);return function(t,e,i){const r=n.getSymbolTotalCodewords(e),a=r-c.getTotalCodewordsCount(e,i),s=c.getBlocksCount(e,i),o=s-r%s,l=Math.floor(r/s),h=Math.floor(a/s),f=h+1,d=l-h,p=new u(d);let g=0;const v=new Array(s),_=new Array(s);let y=0;const E=new Uint8Array(t.buffer);for(let t=0;t<s;t++){const e=t<o?h:f;v[t]=E.slice(g,g+e),_[t]=p.encode(v[t]),g+=e,y=Math.max(y,e)}const m=new Uint8Array(r);let w,b,T=0;for(w=0;w<y;w++)for(b=0;b<s;b++)w<v[b].length&&(m[T++]=v[b][w]);for(w=0;w<d;w++)for(b=0;b<s;b++)m[T++]=_[b][w];return m}(r,t,e)}(e,i,d),E=n.getSymbolSize(e),m=new s(E);return function(t,e){const i=t.size,n=l.getPositions(e);for(let e=0;e<n.length;e++){const r=n[e][0],a=n[e][1];for(let e=-1;e<=7;e++)if(!(r+e<=-1||i<=r+e))for(let n=-1;n<=7;n++)a+n<=-1||i<=a+n||(e>=0&&e<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===e||6===e)||e>=2&&e<=4&&n>=2&&n<=4?t.set(r+e,a+n,!0,!0):t.set(r+e,a+n,!1,!0))}}(m,e),function(t){const e=t.size;for(let i=8;i<e-8;i++){const e=i%2==0;t.set(i,6,e,!0),t.set(6,i,e,!0)}}(m),function(t,e){const i=o.getPositions(e);for(let e=0;e<i.length;e++){const n=i[e][0],r=i[e][1];for(let e=-2;e<=2;e++)for(let i=-2;i<=2;i++)-2===e||2===e||-2===i||2===i||0===e&&0===i?t.set(n+e,r+i,!0,!0):t.set(n+e,r+i,!1,!0)}}(m,e),v(m,i,0),e>=7&&function(t,e){const i=t.size,n=f.getEncodedBits(e);let r,a,s;for(let e=0;e<18;e++)r=Math.floor(e/3),a=e%3+i-8-3,s=1==(n>>e&1),t.set(r,a,s,!0),t.set(a,r,s,!0)}(m,e),function(t,e){const i=t.size;let n=-1,r=i-1,a=7,s=0;for(let o=i-1;o>0;o-=2)for(6===o&&o--;;){for(let i=0;i<2;i++)if(!t.isReserved(r,o-i)){let n=!1;s<e.length&&(n=1==(e[s]>>>a&1)),t.set(r,o-i,n),a--,-1===a&&(s++,a=7)}if(r+=n,r<0||i<=r){r-=n,n=-n;break}}}(m,y),isNaN(r)&&(r=h.getBestMask(m,v.bind(null,m,i))),h.applyMask(r,m),v(m,i,r),{modules:m,version:e,errorCorrectionLevel:i,maskPattern:r,segments:d}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let i,a,s=r.M;return void 0!==e&&(s=r.from(e.errorCorrectionLevel,r.M),i=f.from(e.version),a=h.from(e.maskPattern),e.toSJISFunc&&n.setToSJISFunction(e.toSJISFunc)),_(t,i,s,a)}},4764:(t,e,i)=>{const n=i(4713);function r(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(t){this.degree=t,this.genPoly=n.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const i=n.mod(e,this.genPoly),r=this.degree-i.length;if(r>0){const t=new Uint8Array(this.degree);return t.set(i,r),t}return i},t.exports=r},7044:(t,e)=>{const i="[0-9]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";e.KANJI=new RegExp(n,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(r,"g"),e.NUMERIC=new RegExp(i,"g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return a.test(t)},e.testNumeric=function(t){return s.test(t)},e.testAlphanumeric=function(t){return o.test(t)}},9801:(t,e,i)=>{const n=i(208),r=i(4357),a=i(1433),s=i(5822),o=i(4861),l=i(7044),h=i(6886),c=i(3939);function u(t){return unescape(encodeURIComponent(t)).length}function f(t,e,i){const n=[];let r;for(;null!==(r=t.exec(i));)n.push({data:r[0],index:r.index,mode:e,length:r[0].length});return n}function d(t){const e=f(l.NUMERIC,n.NUMERIC,t),i=f(l.ALPHANUMERIC,n.ALPHANUMERIC,t);let r,a;return h.isKanjiModeEnabled()?(r=f(l.BYTE,n.BYTE,t),a=f(l.KANJI,n.KANJI,t)):(r=f(l.BYTE_KANJI,n.BYTE,t),a=[]),e.concat(i,r,a).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function p(t,e){switch(e){case n.NUMERIC:return r.getBitsLength(t);case n.ALPHANUMERIC:return a.getBitsLength(t);case n.KANJI:return o.getBitsLength(t);case n.BYTE:return s.getBitsLength(t)}}function g(t,e){let i;const l=n.getBestModeForData(t);if(i=n.from(e,l),i!==n.BYTE&&i.bit<l.bit)throw new Error('"'+t+'" cannot be encoded with mode '+n.toString(i)+".\n Suggested mode is: "+n.toString(l));switch(i!==n.KANJI||h.isKanjiModeEnabled()||(i=n.BYTE),i){case n.NUMERIC:return new r(t);case n.ALPHANUMERIC:return new a(t);case n.KANJI:return new o(t);case n.BYTE:return new s(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(g(e,null)):e.data&&t.push(g(e.data,e.mode)),t}),[])},e.fromString=function(t,i){const r=function(t){const e=[];for(let i=0;i<t.length;i++){const r=t[i];switch(r.mode){case n.NUMERIC:e.push([r,{data:r.data,mode:n.ALPHANUMERIC,length:r.length},{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.ALPHANUMERIC:e.push([r,{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.KANJI:e.push([r,{data:r.data,mode:n.BYTE,length:u(r.data)}]);break;case n.BYTE:e.push([{data:r.data,mode:n.BYTE,length:u(r.data)}])}}return e}(d(t,h.isKanjiModeEnabled())),a=function(t,e){const i={},r={start:{}};let a=["start"];for(let s=0;s<t.length;s++){const o=t[s],l=[];for(let t=0;t<o.length;t++){const h=o[t],c=""+s+t;l.push(c),i[c]={node:h,lastCount:0},r[c]={};for(let t=0;t<a.length;t++){const s=a[t];i[s]&&i[s].node.mode===h.mode?(r[s][c]=p(i[s].lastCount+h.length,h.mode)-p(i[s].lastCount,h.mode),i[s].lastCount+=h.length):(i[s]&&(i[s].lastCount=h.length),r[s][c]=p(h.length,h.mode)+4+n.getCharCountIndicator(h.mode,e))}}a=l}for(let t=0;t<a.length;t++)r[a[t]].end=0;return{map:r,table:i}}(r,i),s=c.find_path(a.map,"start","end"),o=[];for(let t=1;t<s.length-1;t++)o.push(a.table[s[t]].node);return e.fromArray(o.reduce((function(t,e){const i=t.length-1>=0?t[t.length-1]:null;return i&&i.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[]))},e.rawSplit=function(t){return e.fromArray(d(t,h.isKanjiModeEnabled()))}},6886:(t,e)=>{let i;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return n[t]},e.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');i=t},e.isKanjiModeEnabled=function(){return void 0!==i},e.toSJIS=function(t){return i(t)}},1878:(t,e)=>{e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},1427:(t,e,i)=>{const n=i(6886),r=i(7518),a=i(9953),s=i(208),o=i(1878),l=n.getBCHDigit(7973);function h(t,e){return s.getCharCountIndicator(t,e)+4}function c(t,e){let i=0;return t.forEach((function(t){const n=h(t.mode,e);i+=n+t.getBitsLength()})),i}e.from=function(t,e){return o.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,i){if(!o.isValid(t))throw new Error("Invalid QR Code version");void 0===i&&(i=s.BYTE);const a=8*(n.getSymbolTotalCodewords(t)-r.getTotalCodewordsCount(t,e));if(i===s.MIXED)return a;const l=a-h(i,t);switch(i){case s.NUMERIC:return Math.floor(l/10*3);case s.ALPHANUMERIC:return Math.floor(l/11*2);case s.KANJI:return Math.floor(l/13);case s.BYTE:default:return Math.floor(l/8)}},e.getBestVersionForData=function(t,i){let n;const r=a.from(i,a.M);if(Array.isArray(t)){if(t.length>1)return function(t,i){for(let n=1;n<=40;n++)if(c(t,n)<=e.getCapacity(n,i,s.MIXED))return n}(t,r);if(0===t.length)return 1;n=t[0]}else n=t;return function(t,i,n){for(let r=1;r<=40;r++)if(i<=e.getCapacity(r,n,t))return r}(n.mode,n.getLength(),r)},e.getEncodedBits=function(t){if(!o.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;for(;n.getBCHDigit(e)-l>=0;)e^=7973<<n.getBCHDigit(e)-l;return t<<12|e}},7899:(t,e,i)=>{const n=i(2726);e.render=function(t,e,i){let r=i,a=e;void 0!==r||e&&e.getContext||(r=e,e=void 0),e||(a=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),r=n.getOptions(r);const s=n.getImageWidth(t.modules.size,r),o=a.getContext("2d"),l=o.createImageData(s,s);return n.qrToImageData(l.data,t,r),function(t,e,i){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=i,e.width=i,e.style.height=i+"px",e.style.width=i+"px"}(o,a,s),o.putImageData(l,0,0),a},e.renderToDataURL=function(t,i,n){let r=n;void 0!==r||i&&i.getContext||(r=i,i=void 0),r||(r={});const a=e.render(t,i,r),s=r.type||"image/png",o=r.rendererOpts||{};return a.toDataURL(s,o.quality)}},6756:(t,e,i)=>{const n=i(2726);function r(t,e){const i=t.a/255,n=e+'="'+t.hex+'"';return i<1?n+" "+e+'-opacity="'+i.toFixed(2).slice(1)+'"':n}function a(t,e,i){let n=t+e;return void 0!==i&&(n+=" "+i),n}e.render=function(t,e,i){const s=n.getOptions(e),o=t.modules.size,l=t.modules.data,h=o+2*s.margin,c=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",u="<path "+r(s.color.dark,"stroke")+' d="'+function(t,e,i){let n="",r=0,s=!1,o=0;for(let l=0;l<t.length;l++){const h=Math.floor(l%e),c=Math.floor(l/e);h||s||(s=!0),t[l]?(o++,l>0&&h>0&&t[l-1]||(n+=s?a("M",h+i,.5+c+i):a("m",r,0),r=0,s=!1),h+1<e&&t[l+1]||(n+=a("h",o),o=0)):r++}return n}(l,o,s.margin)+'"/>',f='viewBox="0 0 '+h+" "+h+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+f+' shape-rendering="crispEdges">'+c+u+"</svg>\n";return"function"==typeof i&&i(null,d),d}},2726:(t,e)=>{function i(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const i=parseInt(e.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,r=t.scale||4;return{width:n,scale:n?4:r,margin:e,color:{dark:i(t.color.dark||"#000000ff"),light:i(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,i){const n=e.getScale(t,i);return Math.floor((t+2*i.margin)*n)},e.qrToImageData=function(t,i,n){const r=i.modules.size,a=i.modules.data,s=e.getScale(r,n),o=Math.floor((r+2*n.margin)*s),l=n.margin*s,h=[n.color.light,n.color.dark];for(let e=0;e<o;e++)for(let i=0;i<o;i++){let c=4*(e*o+i),u=n.color.light;e>=l&&i>=l&&e<o-l&&i<o-l&&(u=h[a[Math.floor((e-l)/s)*r+Math.floor((i-l)/s)]?1:0]),t[c++]=u.r,t[c++]=u.g,t[c++]=u.b,t[c]=u.a}}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=function(){function e(){t(this,e)}return n(e,null,[{key:"getDefaultFontFamily",value:function(){return this.FontFamilys[0]}},{key:"getDefaultFontSize",value:function(){return this.FontSizes[9]}},{key:"getDefaultFontColor",value:function(){return"#000000"}}]),e}();function s(t,e,i){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),i}r(a,"CONF_MODAL_DEF","9"),r(a,"CONF_MODAL_DES","8"),r(a,"CONF_MODAL_EDT","7"),r(a,"CONF_MODAL_REV","6"),r(a,"CONF_MODAL_RED","2"),r(a,"CONF_MODAL_PEV","1"),r(a,"CONF_MODAL_CUS","0"),r(a,"SYS_ZOOM",1),r(a,"SYS_STANDARD_RATIO",.1),r(a,"SYS_SCROLL_RED",30),r(a,"SYS_STACK_LEN",10),r(a,"COLOR_LINEEEL","#696969"),r(a,"COLOR_FIELD","#ff0000"),r(a,"COLOR_PAGEBORDER","#c5c8cc"),r(a,"COLOR_HEADER_LINE","#000000"),r(a,"COLOR_PAGE_SEG","#4E4E4F"),r(a,"COLOR_BINDLINE","#696969"),r(a,"COLOR_CURSOR","#000000"),r(a,"COLOR_SELECT_BG","#A8CDF1"),r(a,"COLOR_COMP_BG","#e9e9e9"),r(a,"COLOR_COMP_BR","#000000"),r(a,"COLOR_DATA_BG","#b69c66e1"),r(a,"COLOR_BLOCK_DRAG","#000000"),r(a,"COLOR_BLOCK_BORDER","#838B83"),r(a,"COLOR_DIVDER","#000000"),r(a,"COLOR_DEFAULT_LINE","#000000"),r(a,"COLOR_COMMENTS_LINE","#FF0000"),r(a,"COLOR_REVISION_WORD","#FF0000"),r(a,"COLOR_REVISION_BG","#ffb5b5a6"),r(a,"COLOR_TEXTBOX_PHR","#7A8794"),r(a,"WIDTH_LINEEEL",10),r(a,"WIDTH_FIELD",10),r(a,"WIDTH_PAGEBORDER",10),r(a,"WIDTH_HEADER_LINE",10),r(a,"WIDTH_PAGE_SEG",20),r(a,"WIDTH_BINDLINE",10),r(a,"WIDTH_CURSOR",10),r(a,"WIDTH_UNDERLINE",10),r(a,"WIDTH_STRIKETHROUGH",10),r(a,"WIDTH_DIVDER_1",10),r(a,"WIDTH_LINE_DEFUALT",10),r(a,"WIDTH_COMP_BORDER",10),r(a,"WIDTH_EXP_LINE",10),r(a,"LEN_BINDLINE",400),r(a,"LEN_ANCHOR",90),r(a,"LEN_BLOCK_DRAG",60),r(a,"LEN_GAP_DRAG",30),r(a,"LINE_DASHED_1",[20,20]),r(a,"LINE_DASHED_2",[60,20]),r(a,"LINE_DASHED_3",[60,20,20,20]),r(a,"LINE_SOLID",[]),r(a,"PAPER_ROTATION_PORTRAIT","portrait"),r(a,"PAPER_ROTATION_LANDSCAPE","landscape"),r(a,"CONTENT_PART_HEADER","1"),r(a,"CONTENT_PART_BODY","2"),r(a,"CONTENT_PART_FOOTER","3"),r(a,"KEY_ARROWLEFT","ArrowLeft"),r(a,"KEY_ARROWRIGHT","ArrowRight"),r(a,"KEY_ARROWUP","ArrowUp"),r(a,"KEY_ARROWDOWN","ArrowDown"),r(a,"KEY_DELETE","Delete"),r(a,"KEY_BACKSPACE","Backspace"),r(a,"KEY_TAB","Tab"),r(a,"KEY_ENTER","Enter"),r(a,"KEY_A","a"),r(a,"KEY_B","b"),r(a,"KEY_C","c"),r(a,"KEY_E","e"),r(a,"KEY_J","j"),r(a,"KEY_L","l"),r(a,"KEY_R","r"),r(a,"KEY_I","i"),r(a,"KEY_P","p"),r(a,"KEY_U","u"),r(a,"KEY_S","s"),r(a,"KEY_Z","z"),r(a,"KEY_ESC","Escape"),r(a,"ALIGN_LEFT","left"),r(a,"ALIGN_CENTER","center"),r(a,"ALIGN_RIGHT","right"),r(a,"ALIGN_BOTH","both"),r(a,"ALIGN_DISPERSED","dispersed"),r(a,"INDENT_TYPE_NULL","0"),r(a,"INDENT_TYPE_TEXT","1"),r(a,"INDENT_TYPE_HANG","2"),r(a,"INDENT_VALUE_MAX",30),r(a,"INDENT_VALUE_MIN",0),r(a,"SCRIPT_NOR","nor"),r(a,"SCRIPT_SUB","sub"),r(a,"SCRIPT_SUP","sup"),r(a,"STYLE_LINE_HEIGHT",220),r(a,"STYLE_ANCHOR_WIDTH",10),r(a,"TABLE_FIELD_PADDING_H",40),r(a,"TABLE_FIELD_PADDING_V",20),r(a,"TABLE_FIELD_BORDER_COLOR","#000000"),r(a,"TABLE_FIELD_BORDER_WIDTH",10),r(a,"TABLE_FIELD_BORDER_SPAC",30),r(a,"TABLE_FIELD_MIN_WIDTH",60),r(a,"TABLE_FIELD_MIN_HEIGHT",220),r(a,"TABLE_BORER_DRAG_RED",20),r(a,"TABLE_BORDER_TOP","top"),r(a,"TABLE_BORDER_BOT","bot"),r(a,"TABLE_BORDER_LEFT","left"),r(a,"TABLE_BORDER_RIGHT","right"),r(a,"TABLE_BORDER_INSIDE","inside"),r(a,"TABLE_INSERT_ABOVE","above"),r(a,"TABLE_INSERT_BELOW","below"),r(a,"TABLE_INSERT_LEFT","left"),r(a,"TABLE_INSERT_RIGHT","right"),r(a,"CLICK_TYPE_ELEMENT","element"),r(a,"CLICK_TYPE_TABLE_BORDER","table-border"),r(a,"CLICK_TYPE_IMAGE_BLOCK","image"),r(a,"CLICK_TYPE_COMP_BUTTON","comp"),r(a,"CLICK_TYPE_COMP_POP","comppop"),r(a,"CLICK_TYPE_OBJECT","object"),r(a,"CLICK_TYPE_EXPRE","expre"),r(a,"SELECT_POINT_BEG","b"),r(a,"SELECT_POINT_END","e"),r(a,"SELECT_EXT_TYPE_U","u"),r(a,"SELECT_EXT_TYPE_D","d"),r(a,"SELECT_EXT_TYPE_L","l"),r(a,"SELECT_EXT_TYPE_R","r"),r(a,"DRAG_VIEW_LINE_H","lh"),r(a,"DRAG_VIEW_LINE_V","lv"),r(a,"DRAG_VIEW_IMAGE","img"),r(a,"DRAG_VIEW_OBJECT","obj"),r(a,"DRAG_VIEW_NONE","0"),r(a,"MIN_BLOCK_WIDTH",400),r(a,"MIN_BLOCK_HEIGHT",400),r(a,"RELATIVE_UP","up"),r(a,"RELATIVE_DOWN","down"),r(a,"COMMENTS_HIDE","0"),r(a,"COMMENTS_SHOW_UN","2"),r(a,"COMMENTS_SHOW_DO","3"),r(a,"COMMENTS_STATE_UN","0"),r(a,"COMMENTS_STATE_DO","1"),r(a,"COMMENTS_STATE_DE","9"),r(a,"SYMBOL_SPECIAL","9651,9661,9675,9671,9633,9734,9655,9665,9828,9825,9826,9831,9650,9660,9679,9670,9632,9733,9654,9664,9824,9829,9830,9827,9788,9789,9792,9786,9680,9745,8730,10004,9756,9757,9758,13250,9728,9790,9794,9785,9681,9746,215,10008,9754,9759,9755,13272,9642,8226,8229,8230,9601,9602,9603,9604,9605,9606,9607,9608,8759,8251,9617,9618,9619,9615,9614,9613,9612,9611,9610,9609;9833,9834,9835,9836,167,12348,9678,164,1758,8471,174,169,9837,9839,9838,8214,182,21325,21328,9644,12307,8481,8482,13255,9740,9741,9739,9738,12927,9710,9706,9684,9685,64,12849,8470,9800,9801,9802,9803,9804,9806,9807,9808,9809,9811,9810,9805;8598,8593,8599,9640,9636,9639,9700,12964,9701,9780,9778,9783,8592,12963,8594,9641,9638,9637,12967,12965,12968,9779,9775,9777,8601,8595,8600,9643,9672,9635,9699,12966,9698,9782,9781,9776,8597,8596,8881,8923,8908,8922,8880,172,65506,9620,8224,8225;42,65290,10034,10056,10057,10047,10048,10051,10049,9784,10006,10010,10026,10084,4326,10086,10087,3007,8362,9998,9997,9996,9985,9988,9729,9730,9731,9732,9832,9735,9736,9761,10167,8889,9993,9743,9762,9763,9760,9774,12292,10169,9769,2960,9742,9992,12320,1769,10009,10015,9764,9765,9766,9767,9768,9771,9772,9823,9817,9820,9814,9822,9816,9821,9815,9819,9813,9818,9812"),r(a,"SYMBOL_PUNCTUATION","65292,12290,65311,65281,65306,65307,183,8230,126,38,64,35,44,46,63,33,58,59,12289,8230-8230,65374,65286,65312,65283,8220,8221,8216,8217,12317,12318,32,34,39,65282,65287,180,65287,40,41,12304,12305,12298,12299,65308,65310,65117,65118,60,62,40,41,91,93,171,187,8249,8250,12308,12309,12296,12297,123,125,65339,65341,12300,12301,65371,65373,12310,12311,12302,12303,65077,65079,65081,65087,65085,65089,65091,65083,65047,47,124,65078,65080,65082,65088,65086,65090,65092,65084,65048,65295,65372,65340,95,65343,65103,65101,65102,96,166,161,94,173,168,714,175,65507,65099,65097,65098,715,65076,191,711"),r(a,"SYMBOL_PINYIN","257,225,462,224,333,243,466,242,275,233,283,232,299,237,236,464,363,250,468,249,470,472,474,476"),r(a,"SYMBOL_MATH_NUM","9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9322,9323,9324,9325,9326,9327,9328,9329,9330,9331;9332,9333,9334,9335,9336,9337,9338,9339,9340,9341,9342,9343,9344,9345,9346,9347,9348,9349,9350,9351;9352,9353,9354,9355,9356,9357,9358,9359,9360,9361,9362,9363,9364,9365,9366,9367,9368,9369,9370,9371;8544,8545,8546,8547,8548,8549,8550,8551,8552,8553,8554,8555,8560,8561,8562,8563,8564,8565,8566,8567,8568,8569;10102,10103,10104,10105,10106,10107,10108,10109,10110,10111;12832,12833,12834,12835,12836,12837,12838,12839,12840,12841"),r(a,"SYMBOL_MATH_UNIT","65122,65123,183,47,61,65124,65125,8806,8807,8814,8815,8801,65291,65293,215,247,65309,65308,65310,8804,8805,8776,8786,8800,65122,65123,177,8758,8757,8756,8759,13266,13265,8721,8719,8709;8733,8765,8712,8745,8743,8857,8978,8741,8735,8739,8706,8710,8734,8780,8713,8746,8744,8853,8895,8869,8736,8747,8748,8749,37,8240,65285,186,185,178,179,8319,8453,8750,8751,8752,8321,8322,8323,189,8531,8532,188,190,176,8451,8457,12306;13198,13199,956-109,13212,13213,13214,8242,165,36,8364,3647,65505,13217,109-179,13252,109-108,109-111-108,13269,8243,65509,163,65504,8352"),r(a,"SYMBOL_GR_LT","913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937;945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969;193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,216,217,218,219,220,221,222,352,376,338913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937;945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,963,964,965,966,967,968,969;193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,216,217,218,219,220,221,222,352,376,338"),r(a,"VALUE_BOOL_TRUE",1),r(a,"VALUE_BOOL_FALSE",0),r(a,"REVISION_DEF","0"),r(a,"REVISION_INS","1"),r(a,"REVISION_DEL","2"),r(a,"EditorModels",[{name:"Word模式",value:a.CONF_MODAL_DEF},{name:"设计模式",value:a.CONF_MODAL_DES},{name:"编辑模式",value:a.CONF_MODAL_EDT},{name:"审阅模式",value:a.CONF_MODAL_REV},{name:"只读模式",value:a.CONF_MODAL_RED},{name:"查看模式",value:a.CONF_MODAL_PEV},{name:"自定义模式",value:a.CONF_MODAL_CUS}]),r(a,"PaperTypes",[{width:2100,height:2970,value:"A4",name:"A4"},{width:1480,height:2100,value:"A5",name:"A5"},{width:1760,height:2500,value:"B5",name:"B5"},{width:1250,height:1760,value:"B6",name:"B6"},{width:2160,height:2790,value:"Letter",name:"信纸"},{width:2160,height:3560,value:"Legal",name:"法律用纸"},{width:2790,height:4320,value:"Tabloid",name:"报纸"}]),r(a,"PaperMargins",[{topBottom:254,leftRight:318,headerFooter:150,name:"普通"},{topBottom:127,leftRight:127,headerFooter:47,name:"窄"},{topBottom:254,leftRight:191,headerFooter:150,name:"适中"},{topBottom:254,leftRight:508,headerFooter:150,name:"宽"}]),r(a,"FontFamilys",[{name:"宋体",value:"SimSun"},{name:"黑体",value:"SimHei"},{name:"仿宋",value:"FangSong"},{name:"楷体",value:"KaiTi"},{name:"微软雅黑",value:"Microsoft Yahei"},{name:"Arial",value:"Arial"},{name:"Tahoma",value:"Tahoma"},{name:"Times",value:"Times"},{name:"serif",value:"serif"}]),r(a,"FontSizes",[{name:"初号",value:"560",pt:"42"},{name:"小初",value:"480",pt:"36"},{name:"一号",value:"347",pt:"26"},{name:"小一",value:"320",pt:"24"},{name:"二号",value:"293",pt:"22"},{name:"小二",value:"240",pt:"18"},{name:"三号",value:"213",pt:"16"},{name:"小三",value:"200",pt:"15"},{name:"四号",value:"187",pt:"14"},{name:"小四",value:"160",pt:"12"},{name:"五号",value:"133",pt:"10.5"},{name:"小五",value:"120",pt:"9"}]),r(a,"DatePatterns",["yyyy年MM月dd日","MM月dd日","yyyy年MM月dd日WWW","yyyy年MM月dd日HH时mm分","yyyy-MM-dd","MM-dd","yyyy-MM-dd HH:mm","yyyy/MM/dd","MM/dd"]),r(a,"PaperDirections",[{value:a.PAPER_ROTATION_PORTRAIT,name:"纵向"},{value:a.PAPER_ROTATION_LANDSCAPE,name:"横向"}]),r(a,"PageNumPatterns",[{value:"{n}",name:"{n}"},{value:"{n}/{c}",name:"{n}/{c}"},{value:"第{n}页",name:"第{n}页"},{value:"第{n}页/共{c}页",name:"第{n}页/共{c}页"},{value:"page {n} of {c}",name:"page {n} of {c}"}]);var o=function(){function e(){t(this,e)}return n(e,null,[{key:"compatible",value:function(){s(this,e,l).call(this),s(this,e,h).call(this)}}]),e}();function l(){Date.prototype.pattern=function(t){var e=this.getDay(),i=Math.floor((this.getMonth()+3)/3).toString(),n={"y+":this.getFullYear().toString(),"M+":(this.getMonth()+1).toString(),"d+":this.getDate().toString(),"H+":this.getHours().toString(),"h+":this.getHours()%12==0?"12":(this.getHours()%12).toString(),"m+":this.getMinutes().toString(),"s+":this.getSeconds().toString(),"q+":i},r={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},a={1:"一",2:"二",3:"三",4:"四"};for(var s in/(W+)/.test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length>1?RegExp.$1.length>2?"星期"+r[e]:"周"+r[e]:r[e])),/(Q+)/.test(t)&&(t=t.replace(RegExp.$1,4==RegExp.$1.length?"第"+a[i]+"季度":a[i])),n){var o=new RegExp("("+s+")").exec(t);o&&(t=t.replace(o[1],1==o[1].length?n[s]:n[s].padStart(o[1].length,"0")))}return t},String.prototype.format=function(){if(0==arguments.length)return this;for(var t=this,e=0;e<arguments.length;e++)t=t.replace(new RegExp("\\{"+e+"\\}","g"),arguments[e]);return t}}function h(){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function f(t,e){if(t){if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,e):void 0}}function d(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,a=[],s=!0,o=!1;try{for(i=i.call(t);!(s=(n=i.next()).done)&&(a.push(n.value),!e||a.length!==e);s=!0);}catch(t){o=!0,r=t}finally{try{s||null==i.return||i.return()}finally{if(o)throw r}}return a}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=function(){function e(){t(this,e)}return n(e,null,[{key:"getHtmlDpi",value:function(){var t=new Array;if(window.screen.deviceXDPI)t[0]=window.screen.deviceXDPI,t[1]=window.screen.deviceYDPI;else{var e=document.createElement("DIV");e.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(e),t[0]=parseInt(e.offsetWidth),t[1]=parseInt(e.offsetHeight),e.parentNode.removeChild(e)}return t}},{key:"pxConversionMm",value:function(t){return t/this.getHtmlDpi()[0]*25.4}},{key:"mmConversionPx",value:function(t){var e=t/25.4*this.getHtmlDpi()[0];return parseInt(e)}},{key:"fullscreen",value:function(){if(document.fullscreenElement)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen();else{var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}}},{key:"detectBrowser",value:function(){if("undefined"!=typeof InstallTrigger)return"Firefox";if(window.chrome&&(window.chrome.webstore||window.chrome.runtime))return-1!==navigator.userAgent.indexOf("Edg")?"Edge Chromium":"Chrome";if(this.isSafari())return"Safari";if(this.isIE())return"IE";var t=navigator.userAgent.toLowerCase();return t.includes("firefox")?"Firefox":t.includes("chrome")?"Chrome":t.includes("safari")?"Safari":t.includes("edge")?"Edge":t.includes("msie")||t.includes("trident")?"IE":"Unknown"}},{key:"isSafari",value:function(){return/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString()}},{key:"isIE",value:function(){return!!document.documentMode}}]),e}(),v=function(){function e(){t(this,e)}return n(e,null,[{key:"pointInRect",value:function(t,e){var i=e.x,n=e.y,r=e.x+e.w,a=e.y+e.h;return Math.abs(t.x-i)+Math.abs(t.x-r)<=Math.abs(i-r)&&Math.abs(t.y-n)+Math.abs(t.y-a)<=Math.abs(n-a)}},{key:"pointToRectDistance",value:function(t,e,i,n,r,a){var s=this.pointToLineDistance(t,e,i,n,r,n),o=this.pointToLineDistance(t,e,r,n,r,a),l=this.pointToLineDistance(t,e,i,a,r,a),h=this.pointToLineDistance(t,e,i,n,i,a);return Math.min(s,o,l,h)}},{key:"pointToEllipseDistance",value:function(t,e,i,n,r,a){var s=i+(r-i)/2,o=n+(a-n)/2,l=Math.pow((r-i)/2,2),h=Math.pow((a-n)/2,2);if(l>h){var c=Math.sqrt(l-h),u=Math.sqrt(Math.pow(t-(s+c),2)+Math.pow(e-o,2)),f=Math.sqrt(Math.pow(t-(s-c),2)+Math.pow(e-o,2));return Math.abs(u+f-Math.abs(r-i))}if(l<h){var d=Math.sqrt(h-l),p=Math.sqrt(Math.pow(e-(o+d),2)+Math.pow(t-s,2)),g=Math.sqrt(Math.pow(e-(o-d),2)+Math.pow(t-s,2));return Math.abs(p+g-Math.abs(a-n))}var v=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-s,2));return Math.abs(v+v-Math.abs(a-n))}},{key:"pointToTriangleDistance",value:function(t,e,i,n,r,a){var s=i+(r-i)/2,o=this.pointToLineDistance(t,e,s,n,r,a),l=this.pointToLineDistance(t,e,i,a,r,a),h=this.pointToLineDistance(t,e,s,n,i,a);return Math.min(o,h,l)}},{key:"pointToLineDistance",value:function(t,e,i,n,r,a){if(i==r)return e>Math.max(n,a)?Math.sqrt(Math.pow(t-i,2)+Math.pow(e-Math.max(n,a),2)):e<Math.min(n,a)?Math.sqrt(Math.pow(t-i,2)+Math.pow(e-Math.min(n,a),2)):Math.abs(t-i);if(n==a)return t>Math.max(i,r)?Math.sqrt(Math.pow(e-n,2)+Math.pow(t-Math.max(i,r),2)):t<Math.min(i,r)?Math.sqrt(Math.pow(e-n,2)+Math.pow(t-Math.min(i,r),2)):Math.abs(e-n);var s=(a-n)/(r-i),o=-1/s,l=e-o*t,h=(l-n+s*i)/(s-o),c=o*h+l,u=p(i<r?[[i,n],[r,a]]:[[r,a],[i,n]],2),f=p(u[0],2),d=f[0],g=f[1],v=p(u[1],2),_=v[0],y=v[1];return h>_?Math.sqrt(Math.pow(t-_,2)+Math.pow(e-y,2)):h<d?Math.sqrt(Math.pow(t-d,2)+Math.pow(e-g,2)):Math.sqrt(Math.pow(t-h,2)+Math.pow(e-c,2))}},{key:"getBlockDragRect",value:function(t,e,i){var n=function(t,e,i,n,r,a){return{x:t,y:e,w:i,h:n,c:r,i:a}},r=e.width*e.height>=0;return[n(t.offsetX-i/2,t.offsetY-i/2,i,i,r?"nwse-resize":"nesw-resize",0),n(t.offsetX+e.width/2-i/2,t.offsetY-i/2,i,i,"ns-resize",1),n(t.offsetX+e.width-i/2,t.offsetY-i/2,i,i,r?"nesw-resize":"nwse-resize",2),n(t.offsetX-i/2,t.offsetY+e.height/2-i/2,i,i,"ew-resize",3),n(t.offsetX+e.width-i/2,t.offsetY+e.height/2-i/2,i,i,"ew-resize",4),n(t.offsetX-i/2,t.offsetY+e.height-i/2,i,i,i,r?"nesw-resize":"nwse-resize"),n(t.offsetX+e.width/2-i/2,t.offsetY+e.height-i/2,i,i,"ns-resize",6),n(t.offsetX+e.width-i/2,t.offsetY+e.height-i/2,i,i,r?"nwse-resize":"nesw-resize",7)]}},{key:"getLineObjectDrag",value:function(t,e,i,n,r){var a=function(t,e,i,n,r,a){return{x:t,y:e,w:i,h:n,c:r,i:a}};return[a(t-r/2,e-r/2,r,r,"crosshair",0),a(i-r/2,n-r/2,r,r,"crosshair",0)]}},{key:"getRectObjectDrag",value:function(t,e,i,n,r){return this.getBlockDragRect({offsetX:t,offsetY:e},{width:i-t,height:n-e},r)}}]),e}(),_=function(){function e(){t(this,e)}return n(e,null,[{key:"isChineseWord",value:function(t){return new RegExp("[\\u4E00-\\u9FFF]+","g").test(t)}},{key:"isChineseSymbol",value:function(t){return new RegExp("[。；，：“”（）、？《》！【】￥]+","g").test(t)}},{key:"isSpecialSymbol",value:function(t){var e=[];return a.SYMBOL_SPECIAL.split(";").forEach((function(t){e=[].concat(d(e),d(t.split(",")))})),a.SYMBOL_MATH_UNIT.split(";").forEach((function(t){e=[].concat(d(e),d(t.split(",")))})),a.SYMBOL_MATH_NUM.split(";").forEach((function(t){e=[].concat(d(e),d(t.split(",")))})),a.SYMBOL_GR_LT.split(";").forEach((function(t){e=[].concat(d(e),d(t.split(",")))})),e.findIndex((function(e){return e==t.charCodeAt(0)+""}))>=0}},{key:"isNumberString",value:function(t){return/^[0-9]+$/.test(t)}},{key:"isEnglish",value:function(t){return/^[A-Za-z]+$/.test(t)}},{key:"isEmptyString",value:function(t){return!("string"==typeof t&&t.length>0)}},{key:"isFullWidthChar",value:function(t){return this.isChineseSymbol(t)||this.isChineseWord(t)||this.isSpecialSymbol(t)}}]),e}(),y=function(){function e(){t(this,e)}return n(e,null,[{key:"getFieldInsertWidth",value:function(t,e,i){var n=[],r=0;t.forEach((function(t){var e=t.at(-1);0==e.property.row&&(n.push(e.property.preWidth),r+=e.property.preWidth)}));for(var a=r/(r+n[e]),s=r,o=0;o<n.length;o++)n[o]=parseInt(n[o]*a),s-=n[o];return n.splice(i,0,s),n}},{key:"getAdjoinCellBorder",value:function(t,e,i){return t.find((function(t){var n=t.getFieldIndex();return n.visible&&n.row-n.rowspan+1<=e&&n.row>=e&&n.col-n.colspan+1<=i&&n.col>=i}))}},{key:"getListLenValue",value:function(t,e,i){for(var n=0,r=e;r<=i;r++)n+=t[r];return n}},{key:"isFieldIndex",value:function(t,e,i){return t.row>=e&&t.row-t.rowspan<e&&t.col>=i&&t.col-t.colspan<i}},{key:"isFieldInsideIndex",value:function(t,e,i,n,r){return t.row-t.rowspan+1>=e&&t.row-t.rowspan+1<=n&&t.col-t.colspan+1>=i&&t.col-t.colspan+1<=r}},{key:"isFieldInside",value:function(t,e,i,n){return Math.abs(e)<=a.TABLE_FIELD_BORDER_SPAC?a.TABLE_BORDER_TOP:Math.abs(n-e)<=a.TABLE_FIELD_BORDER_SPAC?a.TABLE_BORDER_BOT:Math.abs(t)<=a.TABLE_FIELD_BORDER_SPAC?a.TABLE_BORDER_LEFT:Math.abs(i-t)<=a.TABLE_FIELD_BORDER_SPAC?a.TABLE_BORDER_RIGHT:a.TABLE_BORDER_INSIDE}}]),e}(),E=function(){function e(){t(this,e)}return n(e,null,[{key:"capture",value:function(t,e,i,n){var r=!1,a=[];if(!(t instanceof Array))return a;if(e===i)return n&&a.push(e),a;for(var s=0;s<t.length;s++){var o=t[s];if(o===e&&(r=!0,a.push(o)),r){if(o===i){n&&a.push(o);break}a.push(o)}}return a}},{key:"splice",value:function(t,e,i){var n=[].concat(d(i));n.unshift(e,0),Array.prototype.splice.apply(t,n)}},{key:"remove",value:function(t,e){e.forEach((function(e){var i=t.findIndex((function(t){return t===e}));i>=0&&t.splice(i,1)}))}},{key:"findLastIndex",value:function(t,e,i){var n=t.length-1;m.isNotUndefined(i)&&(n=i);for(var r=n;r>=0;r--){var a=t[r];if(e(a))return a}}}]),e}(),m=function(){function e(){t(this,e)}return n(e,null,[{key:"isUndefined",value:function(t){return void 0===t}},{key:"isNotUndefined",value:function(t){return!this.isUndefined(t)}}]),e}(),w=function(){function e(){t(this,e)}return n(e,null,[{key:"h16ToInt",value:function(t){var e=[0,0,0];return t&&7==t.length&&(e[0]=parseInt(t.slice(1,3),16),e[1]=parseInt(t.slice(3,5),16),e[2]=parseInt(t.slice(5,7),16)),e}},{key:"intToH16",value:function(t){var e="#000000";if(t&&3==t.length){var i=t[0].toString(16).padStart(2,"0"),n=t[1].toString(16).padStart(2,"0"),r=t[2].toString(16).padStart(2,"0");e="#".concat(i).concat(n).concat(r)}return e}}]),e}(),b=function(){function e(){t(this,e)}return n(e,null,[{key:"isEmpty",value:function(t){return!this.isNotEmpty(t)}},{key:"isNotEmpty",value:function(t){return"string"==typeof t&&t.length>0}},{key:"isBlank",value:function(t){return!this.isNotBlank(t)}},{key:"isNotBlank",value:function(t){return!!(this.isNotEmpty(t)&&t.trim().length>0)}},{key:"getUUID",value:function(){if("object"===("undefined"==typeof crypto?"undefined":c(crypto))){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();if("function"==typeof crypto.getRandomValues&&"function"==typeof Uint8Array)return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){var e=Number(t);return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var t=(new Date).getTime(),e="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){var n=16*Math.random();return t>0?(n=(t+n)%16|0,t=Math.floor(t/16)):(n=(e+n)%16|0,e=Math.floor(e/16)),("x"===i?n:3&n|8).toString(16)}))}},{key:"replaceVariables",value:function(t,e){return t.replace(/\{(\w+)\}/g,(function(t,i){return void 0!==e[i]?e[i]:t}))}}]),e}(),T=i(6129),C=i.n(T),k=i(7583);function S(t,e,i){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),function(t,e){if(void 0===t)throw new TypeError("attempted to get private static field before its declaration")}(i),function(t,e){return e.get?e.get.call(t):e.value}(t,i)}var O=function(){function e(){t(this,e)}return n(e,null,[{key:"storeImage",value:function(t){S(this,e,L).set(t.uuid,t.view)}},{key:"getImage",value:function(t){return S(this,e,L).get(t)}}]),e}(),L={writable:!0,value:new Map};function R(t,e,i,n){return P(t,e),I(i,"set"),function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,i,n),n}function x(t,e,i){return P(t,e),I(i,"get"),function(t,e){return e.get?e.get.call(t):e.value}(t,i)}function I(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function P(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}var A=function(){function e(){t(this,e)}return n(e,null,[{key:"run",value:function(t,i){var n,r;Object.assign(x(this,e,j),t),Object.assign(x(this,e,X),i),(this,n=e,r=M,P(this,n),r).call(this),x(this,e,j).init()}},{key:"synchroData",value:function(){x(this,e,j).synchroData()}},{key:"synchroPageInfo",value:function(t,i,n){x(this,e,j).synchroPageInfo(t,i,n)}},{key:"synchroStack",value:function(t,i){x(this,e,j).synchroStack(t,i)}},{key:"synchroStyle",value:function(t,i){x(this,e,j).synchroStyle(t,i)}},{key:"saveAction",value:function(t){x(this,e,X).saveAction(t)}},{key:"showContextMenu",value:function(t){x(this,e,j).showContextMenu(t)}},{key:"showMessage",value:function(t,i,n){x(this,e,j).showMessage(t,i,n)}},{key:"showPopMenu",value:function(t){x(this,e,j).showPopMenu(t)}},{key:"showMask",value:function(t,i){return x(this,e,j).showMask(t,i)}},{key:"getAppDom",value:function(){return x(this,e,j).domid}},{key:"getComments",value:function(){return x(this,e,j).commentsid}},{key:"getAppScroll",value:function(){return x(this,e,j).scrollid}},{key:"getConfig",value:function(){return x(this,e,X)}},{key:"getCommentsModel",value:function(){return x(this,e,Y)}},{key:"isShowComments",value:function(){return!0}},{key:"isPrint",value:function(){return x(this,e,F)}},{key:"isDesign",value:function(){return x(this,e,D)}},{key:"isEdit",value:function(){return x(this,e,N)}},{key:"isModify",value:function(){return x(this,e,B)}},{key:"isNote",value:function(){return x(this,e,W)}},{key:"isCopy",value:function(){return x(this,e,H)}},{key:"isFocussable",value:function(){return x(this,e,D)||x(this,e,N)||x(this,e,B)||x(this,e,W)||x(this,e,H)}},{key:"setCommentsModal",value:function(t){R(this,e,Y,t)}},{key:"deleteCommentsAction",value:function(t,i){return x(this,e,X).deleteCommentsAction(t,i)}},{key:"commitRevisionAction",value:function(t,i){x(this,e,X).commitRevisionAction(t,x(this,e,X).useraccount,i)}},{key:"commitVersionAction",value:function(t,i){x(this,e,X).commitVersionAction(t,x(this,e,X).useraccount,i)}}]),e}();function M(){switch(x(this,A,X).modal){case a.CONF_MODAL_DES:R(this,A,D,!0),R(this,A,N,!0),R(this,A,B,!1),R(this,A,W,!1),R(this,A,H,!0),R(this,A,F,!0),R(this,A,Y,a.COMMENTS_SHOW_UN);break;case a.CONF_MODAL_EDT:R(this,A,D,!1),R(this,A,N,!0),R(this,A,B,!1),R(this,A,W,!1),R(this,A,H,!0),R(this,A,F,!0),R(this,A,Y,a.COMMENTS_SHOW_UN);break;case a.CONF_MODAL_REV:R(this,A,D,!1),R(this,A,N,!1),R(this,A,B,!0),R(this,A,W,!0),R(this,A,H,!0),R(this,A,F,!0),R(this,A,Y,a.COMMENTS_SHOW_UN);break;case a.CONF_MODAL_RED:R(this,A,D,!1),R(this,A,N,!1),R(this,A,B,!1),R(this,A,W,!1),R(this,A,H,!0),R(this,A,F,!0),R(this,A,Y,a.COMMENTS_HIDE);break;case a.CONF_MODAL_PEV:R(this,A,D,!1),R(this,A,N,!1),R(this,A,B,!1),R(this,A,W,!1),R(this,A,H,!1),R(this,A,F,!1),R(this,A,Y,a.COMMENTS_HIDE);break;default:R(this,A,D,!0),R(this,A,N,!0),R(this,A,B,!0),R(this,A,W,!0),R(this,A,H,!0),R(this,A,F,!0),R(this,A,Y,a.COMMENTS_SHOW_UN)}}var D={writable:!0,value:!0},N={writable:!0,value:!0},B={writable:!0,value:!0},W={writable:!0,value:!0},H={writable:!0,value:!0},F={writable:!0,value:!0},Y={writable:!0,value:0},j={writable:!0,value:{domid:void 0,commentsid:void 0,scrollid:void 0,init:function(){},synchroData:function(){},synchroStyle:function(){},synchroStack:function(){},synchroPageInfo:function(){},showMask:function(){},showMessage:function(){},showContextMenu:function(){},showPopMenu:function(){}}},X={writable:!0,value:{license:"",licensee:"",loglevel:1,username:void 0,useraccount:void 0,modal:a.CONF_MODAL_DEF,headerDivider:!0,footerDivider:!0,textBorderColor:"#ff0000",saveAction:function(){},commitVersionAction:function(){},commitRevisionAction:function(){},deleteCommentsAction:function(){return!0}}},z=function(){function e(){t(this,e)}return n(e,null,[{key:"debug",value:function(t){this.DEBUG>=A.getConfig().loglevel&&console.debug(t)}},{key:"info",value:function(t){this.INFO>=A.getConfig().loglevel&&console.info(t)}},{key:"warn",value:function(t){this.WARN>=A.getConfig().loglevel&&console.warn(t)}},{key:"error",value:function(t,e){this.ERROR>=A.getConfig().loglevel&&console.error(t,e)}}]),e}();function U(t,e,i){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),i}r(z,"DEBUG",1),r(z,"INFO",2),r(z,"WARN",3),r(z,"ERROR",4);var G=function(){function e(){t(this,e)}return n(e,null,[{key:"defaultTextStyle",value:function(){return{font:a.getDefaultFontFamily().value,size:a.getDefaultFontSize().value,color:a.getDefaultFontColor(),bold:!1,italic:!1,underline:!1,strikethrough:!1,script:a.SCRIPT_NOR}}},{key:"defaultParagStyle",value:function(){return{align:a.ALIGN_BOTH,indentLeft:0,indentRight:0,indentSpecialType:a.INDENT_TYPE_NULL,indentSpecialvalue:0,rowspac:1,segmentSpacPre:0,segmentSpacAft:0}}},{key:"defaultProperty",value:function(){return{code:"",type:"",classify:"",imageBlock:!1,visible:!0,placeholder:!1}}},{key:"defaultDimension",value:function(){return{depth:0}}},{key:"defaultModular",value:function(){return{type:this.MODULAR_TYPE_NORM,dataID:"",dataClass:"",dataValue:"",comments:[],revision:a.REVISION_DEF}}},{key:"defaultDatePickerPro",value:function(){return Object.assign(U(this,e,V).call(this),{cls:e.COMP_CLASS_DATEPICKER,format:"yyyy年MM月dd日",value:(new Date).getTime()})}},{key:"defaultTextBoxPro",value:function(){return Object.assign(U(this,e,V).call(this),{cls:e.COMP_CLASS_TEXTBOX,placeholder:"文本框",border:!0,value:""})}},{key:"defaultCheckboxPro",value:function(){return Object.assign(U(this,e,V).call(this),{cls:e.COMP_CLASS_CHECKBOX,label:"多选框",value:0})}},{key:"defaultRadioGroupPro",value:function(){return Object.assign(U(this,e,V).call(this),{cls:e.COMP_CLASS_RADIOGROUP,options:[{code:"0",text:"选项一"},{code:"1",text:"选项二"},{code:"2",text:"选项三"}],value:"0"})}},{key:"defaultTextFieldPro",value:function(){return Object.assign(U(this,e,V).call(this),{cls:e.COMP_CLASS_TEXTFIELD,placeholder:"文本域",editable:!1,value:void 0})}},{key:"defaultSingleFieldPro",value:function(){return Object.assign(U(this,e,V).call(this),{cls:e.COMP_CLASS_SINGLEFIELD,filter:!1,placeholder:"单选选择域",datasource:"",rows:4,value:void 0,options:[]})}},{key:"defaultMultipleFieldPro",value:function(){return Object.assign(U(this,e,V).call(this),{cls:e.COMP_CLASS_MULTIPLEFIELD,filter:!1,placeholder:"多选选择域",separator:"、",datasource:"",rows:4,value:[],options:[]})}},{key:"createTextChar",value:function(t,i,n,r,a){var s={code:t,type:this.TYPE_TEXT,classify:this.CLS_TEXT_CHAR},o=this.findDimension(n,r._count);return U(this,e,q).call(this,s,i,o,a)}},{key:"createTextTab",value:function(t,i,n,r){var a={type:this.TYPE_TEXT,classify:this.CLS_TEXT_TAB},s=this.findDimension(i,n._count);return U(this,e,q).call(this,a,t,s,r)}},{key:"createImage",value:function(t,i,n,r,a,s,o){var l=this.findDimension(a,s._count);return U(this,e,Z).call(this,t,i,n,r,l,o)}},{key:"createLineFeel",value:function(t,i,n,r,a){var s=this.findDimension(n,r._count),o={type:this.TYPE_STRUCT,classify:this.CLS_LINE};return U(this,e,$).call(this,o,t,i,s,a)}},{key:"createDivder",value:function(t,i,n,r,a,s){var o=this.findDimension(r,a._count),l={type:this.TYPE_STRUCT,classify:this.CLS_DIVDER,divderType:t};return U(this,e,$).call(this,l,i,n,o,s)}},{key:"createDocumentEnd",value:function(t,i,n){var r={type:this.TYPE_STRUCT,classify:this.CLS_END};return U(this,e,$).call(this,r,t,i)}},{key:"createTableCell",value:function(t,i,n,r,s,o){var l=a.TABLE_FIELD_PADDING_H,h=a.TABLE_FIELD_PADDING_V,c=a.TABLE_FIELD_BORDER_WIDTH,u=a.TABLE_FIELD_BORDER_COLOR,f={type:this.TYPE_STRUCT,classify:this.CLS_CELL,visible:!0,row:t.row,col:t.col,colspan:1,rowspan:1,width:t.width,height:0,preWidth:t.width,preHeight:0,indentLeft:0,indentRight:0,padding:[h,l,h,l],border:[{width:c,style:0,color:u,visible:!0},{width:c,style:0,color:u,visible:!0},{width:c,style:0,color:u,visible:!0},{width:c,style:0,color:u,visible:!0}],borderHide:!1},d=this.findDimension(r,s._count);return U(this,e,$).call(this,f,i,n,d,o)}},{key:"createShape",value:function(t){var i={type:this.TYPE_OBJECT,classify:t,relativeText:a.RELATIVE_UP,lineColor:a.COLOR_DEFAULT_LINE,lineType:a.LINE_SOLID,lineWidth:a.WIDTH_LINE_DEFUALT,lineOpacity:1};return U(this,e,K).call(this,i,{x1:void 0,y1:void 0,x2:void 0,y2:void 0})}},{key:"createImageCache",value:function(t,e){var i=new Image;i.src=t,i.onload=function(){e(i)}}},{key:"createGraphicCache",value:function(t,e,i){var n=this;if(t==this.IAMGE_TYPE_BARCODE){var r=new Image;C()(r,e),r.onload=function(){i(r)}}else t==this.IAMGE_TYPE_QRCODE&&k.toDataURL(e).then((function(t){n.createImageCache(t,i)})).catch((function(t){z.error(t)}))}},{key:"createComponent",value:function(t,i,n,r,a){switch(this.getResourceCompInfo(t,i).property.cls){case this.COMP_CLASS_DATEPICKER:return U(this,e,Q).call(this,t,i,n,r,a);case this.COMP_CLASS_CHECKBOX:return U(this,e,tt).call(this,t,i,n,r,a);case this.COMP_CLASS_RADIOGROUP:return U(this,e,et).call(this,t,i,n,r,a);case this.COMP_CLASS_TEXTBOX:return U(this,e,it).call(this,t,i,n,r,a);case this.COMP_CLASS_SINGLEFIELD:return U(this,e,rt).call(this,t,i,n,r,a);case this.COMP_CLASS_MULTIPLEFIELD:return U(this,e,at).call(this,t,i,n,r,a);case this.COMP_CLASS_TEXTFIELD:return U(this,e,nt).call(this,t,i,n,r,a)}}},{key:"createExpression",value:function(t,i,n,r){var a={code:"",type:this.TYPE_TEXT,classify:this.CLS_EXPRE},s=this.findDimension(n,r._count);return U(this,e,q).call(this,a,i,s,{},t)}},{key:"findElementIndex",value:function(t,e){return t.findIndex((function(t){return t===e}))}},{key:"findPreElement",value:function(t,e){var i=this.findElementIndex(t,e);return i>0?t[i-1]:void 0}},{key:"findNextElement",value:function(t,e){var i=this.findElementIndex(t,e);return i>=0?t[i+1]:void 0}},{key:"findElementStyle",value:function(t,e){var i=this,n={},r=t.findIndex((function(t){return t===e}));n.textStyle=Object.assign({},e.textStyle);var a=t.find((function(t,e){return e>=r&&t.property.type==i.TYPE_STRUCT}));return n.paragStyle=Object.assign({},a.paragStyle),n}},{key:"findDimension",value:function(t,e){for(;e<t.length;e++){var i=t[e];if(i.property.type===this.TYPE_STRUCT){var n=Object.assign({},i.dimension);return i.property.classify!=this.CLS_CELL&&i.property.classify!=this.CLS_END||(n.depth+=1),n}}}},{key:"insertElement",value:function(t,e,i){var n=t.findIndex((function(t){return t===e}));t.splice(n,0,i)}},{key:"insertCompInfo",value:function(t,e,i,n){t.resources.component.push({id:i,part:e,property:n})}},{key:"insertElements",value:function(t,e,i){var n=t.findIndex((function(t){return t===e}));E.splice(t,n,i)}},{key:"insertComments",value:function(t,e,i){var n=b.getUUID(),r={id:n,username:A.getConfig().username,useraccount:A.getConfig().useraccount,date:(new Date).getTime(),state:0,text:i};t.resources.comments.push(r),e.forEach((function(t){t.modular.comments.push(n)}))}},{key:"pasteElements",value:function(t,i,n,r){var a=this,s=U(this,e,pt).call(this,t,i),o=t.resources.component;r.component.forEach((function(t){var e=t.id;t.id=b.getUUID(),t.part=i;var n=!1,s=0;r.elements.forEach((function(i){i.modular.type==a.MODULAR_TYPE_COMP&&i.modular.dataID==e&&(n=!0,i.modular.dataID=t.id,t.cls==a.COMP_CLASS_TEXTBOX&&i.property.classify==a.CLS_TEXTBOX_BORDER&&s++)})),n&&(t.property.cls==a.COMP_CLASS_TEXTBOX&&s<2?r.elements.forEach((function(e){e.modular.type==a.MODULAR_TYPE_COMP&&e.modular.dataID==t.id&&(e.modular.type=a.MODULAR_TYPE_NORM,e.modular.dataClass=void 0,e.modular.dataID=void 0)})):o.push(t))}));var l=this.findDimension(s,n._count),h=void 0;if(r.elements.forEach((function(t){t.property.type==a.TYPE_STRUCT&&(h=Math.min(h,t.dimension.depth))})),h){var c=l.depth-h;r.elements.forEach((function(t){t.property.type==a.TYPE_STRUCT&&(t.dimension.depth+=c)}))}r.elements.forEach((function(t){t.modular.comments=[],t.property.type==a.TYPE_STRUCT?(t.property.classify==a.CLS_LINE||t.property.classify==a.CLS_CELL)&&a.insertElement(s,n,t):a.insertElement(s,n,t)}))}},{key:"deleteElement",value:function(t,i){var n=this,r=t[i];if(r.modular.type==this.MODULAR_TYPE_COMP){var a=[this.COMP_CLASS_DATEPICKER,this.COMP_CLASS_RADIOGROUP,this.COMP_CLASS_CHECKBOX,this.COMP_CLASS_TEXTFIELD,this.COMP_CLASS_SINGLEFIELD,this.COMP_CLASS_MULTIPLEFIELD],s=[this.CLS_TEXTBOX_BORDER];if(a.includes(r.modular.dataClass)){var o=U(this,e,ct).call(this,t,r);return o.forEach((function(i){return U(n,e,st).call(n,t,i)})),o}if(s.includes(r.property.classify)){var l=U(this,e,ct).call(this,t,r);return l.forEach((function(i){return U(n,e,st).call(n,t,i)})),l}return U(this,e,st).call(this,t,r),[r]}return[this.CLS_END,this.CLS_CELL].includes(r.property.classify)?[]:(U(this,e,st).call(this,t,r),[r])}},{key:"deleteElements",value:function(t,i){var n=this;i.forEach((function(i){[n.CLS_END,n.CLS_CELL].includes(i.property.classify)||U(n,e,st).call(n,t,i)}))}},{key:"deleteObject",value:function(t,e){var i=t.resources.objects.above.findIndex((function(t){return e===t}));return i>=0?(t.resources.objects.above.splice(i,1),e):(i=t.resources.objects.below.findIndex((function(t){return e===t})))>=0?(t.resources.objects.below.splice(i,1),e):void 0}},{key:"changeCompInfo",value:function(t,i,n){var r=t.resources.component.find((function(t){return t.id==n.id}));if(r.part=i,r.property.cls==this.COMP_CLASS_TEXTBOX){var a=U(this,e,pt).call(this,t,i),s=U(this,e,ut).call(this,a,n.id);Object.assign(r.property,n.property,{value:s})}else Object.assign(r.property,n.property)}},{key:"compatibility",value:function(t){var e=this;t.forEach((function(t){t.modular=Object.assign(e.defaultModular(),t.modular)}))}},{key:"changeExpressionInfo",value:function(t,e){var i=this,n=t.find((function(t){return t.property.classify==i.CLS_EXPRE&&t.extend.id==e.id}));n&&Object.assign(n.extend,e)}},{key:"compVerify",value:function(t){for(var i=t.resources.component,n=i.length-1;n>=0;n--){var r=U(this,e,pt).call(this,t,i[n].part);0!=this.getElementCompsById(r,i[n].id).length||i.splice(n,1)}return this.getResourceCompValues(t).filter((function(t){return t.required&&m.isUndefined(t.value)}))}},{key:"commentsVerify",value:function(t){for(var i=t.resources.comments,n=U(this,e,pt).call(this,t,a.CONTENT_PART_BODY),r=0;r<i.length;r++){var s=i[r];0!=this.getElementCommentById(n,s.id).length||comps.splice(r,1)}return i.filter((function(t){return t.state==a.COMMENTS_STATE_UN}))}},{key:"revisionVerify",value:function(t){return U(this,e,ft).call(this,t).length}},{key:"revisionLocation",value:function(t,i){for(var n=U(this,e,ft).call(this,t),r=0;r<n.length;r++)if(n[r].findIndex((function(t){return i===t}))>=0)return n[r]}},{key:"prevRevision",value:function(t,e){for(var i=this.findElementIndex(t,e),n=e.modular.revision==a.REVISION_DEF,r=i-1;r>=0;r--){var s=t[r];if(n){if(s.modular.revision!=a.REVISION_DEF)return s}else s.modular.revision==a.REVISION_DEF&&(n=!0)}}},{key:"nextRevision",value:function(t,e){var i=this.findElementIndex(t,e),n=e.modular.revision==a.REVISION_DEF;console.info(1,n);for(var r=i+1;r<t.length;r++){var s=t[r];if(n){if(s.modular.revision!=a.REVISION_DEF)return s}else s.modular.revision==a.REVISION_DEF&&(n=!0)}}},{key:"processRevision",value:function(t,i,n){if(this.isRevision(i)){var r=this.revisionLocation(t,i);if(i.modular.revision==a.REVISION_INS&&n||i.modular.revision==a.REVISION_DEL&&!n)r.forEach((function(t){t.modular.revision=a.REVISION_DEF}));else if(i.modular.revision==a.REVISION_INS&&!n||i.modular.revision==a.REVISION_DEL&&n){var s=U(this,e,pt).call(this,t,a.CONTENT_PART_BODY);U(this,e,ot).call(this,s,r)}return!0}return!1}},{key:"cleanComments",value:function(t){t.resources.comments=[],U(this,e,pt).call(this,t,a.CONTENT_PART_HEADER).forEach((function(t){t.modular.comments=[]})),U(this,e,pt).call(this,t,a.CONTENT_PART_BODY).forEach((function(t){t.modular.comments=[]})),U(this,e,pt).call(this,t,a.CONTENT_PART_FOOTER).forEach((function(t){t.modular.comments=[]}))}},{key:"tableMerge",value:function(t,i){var n=this,r=[],a=[];i.fields.forEach((function(s){var o=s.at(-1);o.property.row<=i.maxrow&&o.property.row>=i.minrow&&o.property.col<=i.maxcol&&o.property.col>=i.mincol&&(U(n,e,lt).call(n,t,s,r),a.push(o))})),a.at(-1).property.visible=!0,a.at(-1).property.rowspan=i.maxrow-i.minrow+1,a.at(-1).property.colspan=i.maxcol-i.mincol+1,this.insertElements(t,a.at(-1),r)}},{key:"tableDeleteRow",value:function(t,e,i,n){this.tableDeleteCell(t,e,i,n,"row")}},{key:"tableDeleteCol",value:function(t,e,i,n){this.tableDeleteCell(t,e,i,n,"col")}},{key:"tableDeleteCell",value:function(t,i,n,r,a){var s=this,o=[],l=[],h="col"==a?"colspan":"rowspan";i.forEach((function(t){var e=t.at(-1).property[a],i=t.at(-1).property[h];1==i?e>=n&&e<=r?o.push(t):e>=r&&(t.at(-1).property[a]-=r-n+1):e-i+1<n&&e>=n?(t.at(-1).property[a]-=e-n+1,t.at(-1).property[h]-=e-n+1,l.push(t)):e-i+1<n&&e>r?(t.at(-1).property[a]-=r-n+1,t.at(-1).property[h]-=r-n+1):e-i+1>=n&&e<=r?o.push(t):e-i+1<=r&&e>r?(t.at(-1).property[a]-=r-(e-i+1)+1,t.at(-1).property[h]-=r-(e-i+1)+1):e>r&&(t.at(-1).property[a]-=r-n+1)}));var c=this.findNextElement(t,o.at(-1).at(-1));return l.forEach((function(t){var e=i.find((function(e){return e.at(-1).property.row==t.at(-1).property.row&&e.at(-1).property.col==t.at(-1).property.col}));e&&o.push(e)})),o.forEach((function(i){U(s,e,ot).call(s,t,i)})),c}},{key:"tableDelete",value:function(t,i,n){var r=this;i.forEach((function(i){U(r,e,st).call(r,t,i)}))}},{key:"tableInsertRowAbove",value:function(t,i,n){var r=this,a=[],s=void 0;n.forEach((function(t){var n=t.at(-1);if(n.property.row==i){s||(s=t.at(0));var o=JSON.parse(JSON.stringify(n.property));o.rowspan=1,o.colspan=1,o.visible=!0;var l=U(r,e,$).call(r,o,n.textStyle,n.paragStyle,n.dimension);a.push(l)}})),a.forEach((function(t){var e=n.find((function(e){var i=e.at(-1);return i.property.visible&&i.property.row-i.property.rowspan+1==t.property.row&&i.property.col==t.property.col}));if(e){var i=e.at(-1);t.property.colspan=i.property.colspan}else t.property.visible=!1})),n.forEach((function(t){var e=t.at(-1);e.property.row-e.property.rowspan+1>=i?e.property.row+=1:e.property.row-e.property.rowspan+1<i&&e.property.row>=i&&(e.property.row+=1,e.property.rowspan+=1)})),this.insertElements(t,s,a)}},{key:"tableInsertRowBelow",value:function(t,i,n){var r=this,a=[],s=void 0;n.forEach((function(t){var n=t.at(-1);if(n.property.row==i){s=t.at(-1);var o=JSON.parse(JSON.stringify(n.property));o.row+=1,o.rowspan=1;var l=U(r,e,$).call(r,o,n.textStyle,n.paragStyle,n.dimension);a.push(l)}else n.property.row>i&&(n.property.row-n.property.rowspan+1<=i&&(n.property.rowspan+=1),n.property.row+=1)}));var o=this.findNextElement(t,s);this.insertElements(t,o,a)}},{key:"tableInsertColLeft",value:function(t,i,n){var r=this,a=y.getFieldInsertWidth(n,i,i),s=[];n.forEach((function(t){var n=t.at(-1);if(n.property.col==i){var a=JSON.parse(JSON.stringify(n.property));a.rowspan=1,a.colspan=1,a.visible=!0;var o=U(r,e,$).call(r,a,n.textStyle,n.paragStyle,n.dimension);s.push(o)}})),s.forEach((function(t){var e=n.find((function(e){var i=e.at(-1);return i.property.visible&&i.property.col-i.property.colspan+1==t.property.col&&i.property.row==t.property.row}));if(e){var i=e.at(-1);t.property.rowspan=i.property.rowspan}else t.property.visible=!1})),n.forEach((function(t){var e=t.at(-1);e.property.col-e.property.colspan+1>=i?e.property.col+=1:e.property.row-e.property.colspan+1<i&&e.property.col>=i&&(e.property.col+=1,e.property.colspan+=1),e.property.preWidth=a[e.property.col]})),s.forEach((function(e){e.property.preWidth=a[e.property.col];var i=n.find((function(t){return t.at(-1).property.row==e.property.row&&t.at(-1).property.col==e.property.col+1}));r.insertElement(t,i[0],e)})),console.info(t)}},{key:"tableInsertColRight",value:function(t,i,n){var r=this,a=y.getFieldInsertWidth(n,i,i+1);n.forEach((function(n){var s=n.at(-1);if(s.property.col==i){var o=n.at(-1),l=JSON.parse(JSON.stringify(s.property));l.colspan=1,l.col+=1,l.preWidth=a[i+1],l.width=a[i+1];var h=U(r,e,$).call(r,l,s.textStyle,s.paragStyle,s.dimension),c=r.findNextElement(t,o);r.insertElement(t,c,h)}else s.property.col>i&&(s.property.col-s.property.colspan+1<=i&&(s.property.colspan+=1),s.property.col+=1);s.property.preWidth=a[s.property.col],s.property.width=a[s.property.col]}))}},{key:"tableSplitRowspan",value:function(t,e){var i=t.at(-1).property.rowspan,n=t.at(-1).property.colspan,r=t.at(-1).property.row,a=t.at(-1).property.col,s=[];t.at(-1).property.rowspan=1;for(var o=function(t){var i=e.find((function(e){return e.at(-1).property.row==r-t&&e.at(-1).property.col==a}));i.at(-1).property.visible=!0,i.at(-1).property.colspan=n,s.push(i)},l=1;l<i;l++)o(l);return s.push(t),s}},{key:"tableSplitRow",value:function(t,i,n,r){for(var a=this,s=i.at(-1).property.row,o=i.at(-1).property.col,l=[],h=function(t){n.forEach((function(i){var n=i.at(-1).property;if(n.row==s){var r=JSON.parse(JSON.stringify(i.at(-1).property));r.rowspan=1,r.row=s+t,r.visible=n.col==o,l.push(U(a,e,$).call(a,r,i.at(-1).textStyle,i.at(-1).paragStyle,i.at(-1).dimension))}}))},c=0;c<r-1;c++)h(c);var u=void 0,f=void 0;n.forEach((function(t,e){var i=t.at(-1).property;i.row==s&&(u||(u=t.at(0),f=e)),i.visible&&i.col!=o&&i.row>=s&&i.row-i.rowspan+1<=s&&(i.rowspan+=r-1),i.row>=s&&(i.row+=r-1)})),this.insertElements(t,u,l),E.splice(n,f,l.map((function(t){return[t]})));var d=[];return l.forEach((function(t){t.property.col==o&&d.push([t])})),d.push(i),d}},{key:"tableSplitColspan",value:function(t,e){console.info(e),t.forEach((function(t){for(var i=t.at(-1).property.row,n=t.at(-1).property.col,r=t.at(-1).property.colspan,a=function(r){var a=e.find((function(t){return t.at(-1).property.col==n-r&&t.at(-1).property.row==i}));a.at(-1).property.visible=!0,a.at(-1).property.colspan=1,a.at(-1).property.rowspan=t.at(-1).property.rowspan},s=1;s<r;s++)a(s);t.at(-1).property.colspan=1}))}},{key:"tableSplitCol",value:function(t,i,n,r,a,s){var o=this,l=i.map((function(t){return t.at(-1).property.row}));n.forEach((function(i){var n=i.at(-1).property.colspan,h=i.at(-1).property.rowspan,c=i.at(-1).property.col,u=i.at(-1).property.row,f=l.findIndex((function(t){return t==u}));if(c==s){i.at(-1).property.preWidth=a[r-1],i.at(-1).property.width=a[r-1];for(var d=0;d<r-1;d++){var p=JSON.parse(JSON.stringify(i.at(-1).property));p.col=c+d,p.rowspan=h,p.preWidth=a[d],p.width=a[d],p.visible=f>=0,o.insertElement(t,i.at(0),U(o,e,$).call(o,p,i.at(-1).textStyle,i.at(-1).paragStyle,i.at(-1).dimension))}}f<0&&c>=s&&c-n+1<=s&&(i.at(-1).property.colspan+=r-1),c>=s&&(i.at(-1).property.col+=r-1)}))}},{key:"isImageBlock",value:function(t){var e=[this.CLS_IMAGE,this.CLS_GAHCODE];return t&&e.includes(t.property.classify)}},{key:"isLineObject",value:function(t){var e=[this.OBJECT_SHAPE_LINE];return t&&t.property.type==this.TYPE_OBJECT&&e.includes(t.property.classify)}},{key:"isRectObject",value:function(t){var e=[this.OBJECT_SHAPE_RECT,this.OBJECT_SHAPE_ELLIPSE,this.OBJECT_SHAPE_TRIANGLE];return t&&t.property.type==this.TYPE_OBJECT&&e.includes(t.property.classify)}},{key:"isRevision",value:function(t){return t.modular.revision!=a.REVISION_DEF}},{key:"isTextbox",value:function(t){return t.modular.dataClass==this.COMP_CLASS_TEXTBOX}},{key:"isInsideTextbox",value:function(t,e){return e.modular.dataClass==this.COMP_CLASS_TEXTBOX&&this.getElementCompsById(t,e.modular.dataID).findIndex((function(t){return t===e}))>0}},{key:"isTextboxElements",value:function(t){var e=this;return t[0].modular.dataClass==this.COMP_CLASS_TEXTBOX&&t.findIndex((function(i){return!e.isSameComonent(t[0],i)}))<0&&0==t.filter((function(t){return t.property.classify==e.CLS_TEXTBOX_BORDER}))}},{key:"isHideCell",value:function(t){return t.property.type==this.TYPE_STRUCT&&t.property.classify==this.CLS_CELL&&!t.property.visible}},{key:"isSameComonent",value:function(t,e){return t.modular.type==this.MODULAR_TYPE_COMP&&e.modular.type==this.MODULAR_TYPE_COMP&&t.modular.dataClass==e.modular.dataClass&&t.modular.dataID==e.modular.dataID}},{key:"getElementOperate",value:function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.REVISION_DEF,s=i.findIndex((function(t){return t===n})),o=!0,l=[];if(s>0){var h=this.getResourceCompInfo(t,i.at(s-1).modular.dataID);h&&(o=h.property.deletable);var c=i[s-1].modular.comments,u=n.modular.comments;l=U(this,e,ht).call(this,c,u)}else o=!1;var f={cursor:!0,insert:!0,insertDivder:!0,insertTable:!0,insertLineFeel:!0,insertComp:!0,deleteText:!0,backspaceText:!0,deleteSelects:!0,isTextBox:!1,modular:Object.assign(this.defaultModular(),{comments:l,revision:r})};if(n.modular.type!=this.MODULAR_TYPE_COMP)return Object.assign(f,{backspaceText:o});var d=this.getResourceCompInfo(t,n.modular.dataID),p=U(this,e,ct).call(this,i,n),g=p.findIndex((function(t){return t===n})),v=[this.COMP_CLASS_DATEPICKER,this.COMP_CLASS_CHECKBOX,this.COMP_CLASS_RADIOGROUP,this.COMP_CLASS_TEXTFIELD,this.COMP_CLASS_SINGLEFIELD,this.COMP_CLASS_MULTIPLEFIELD],_=[this.COMP_CLASS_TEXTBOX];if(v.includes(n.modular.dataClass)){var y={insert:0==g,deleteText:0==g&&d.deletable,backspaceText:0==g&&o};return Object.assign(f,y)}if(_.includes(n.modular.dataClass)){var E={insertDivder:!1,insertTable:!1,insertLineFeel:!1,insertComp:!1,modular:n.modular,isTextBox:!0};return 0==g?Object.assign(f,{deleteText:d.deletable,backspaceText:o}):(g==p.length-1&&(E.deleteText=!1),1==g&&(E.backspaceText=!1),Object.assign(f,E))}}},{key:"getElementDeletable",value:function(t,e){var i=this.getResourceCompInfo(t,e.modular.dataID);return!i||i.property.deletable}},{key:"getElementEditable",value:function(t,e){var i=this.getResourceCompInfo(t,e.modular.dataID);return!i||i.property.cls!=this.COMP_CLASS_TEXTFIELD||i.property.editable}},{key:"getElementComps",value:function(t,i){return i.modular.type==this.MODULAR_TYPE_COMP?U(this,e,ct).call(this,t,i):[]}},{key:"getElementCompsById",value:function(t,e){return t.filter((function(t){return t.modular.dataID==e}))}},{key:"getElementCommentById",value:function(t,e){return t.filter((function(t){return t.modular.comments.includes(e)}))}},{key:"getElementCompCls",value:function(t){return t?{compClass:t.modular.dataClass,compID:t.modular.dataID}:{}}},{key:"getResourceCompList",value:function(t){return t.resources.component}},{key:"getResourceCompInfo",value:function(t,e){return t.resources.component.find((function(t){return t.id==e}))}},{key:"getResourceCompInfoByCode",value:function(t,e){return t.resources.component.filter((function(t){return t.property.code==e}))}},{key:"getParagraphElements",value:function(t,i){for(var n=[],r=!1,a=0;a<t.length;a++){var s=t[a];if(s.property.type==e.TYPE_STRUCT){if(r)break;n=[]}n.push(s),s===i&&(r=!0)}return n}},{key:"getResourceCompValues",value:function(t){var i=this;return t.resources.component.map((function(n){var r={code:n.property.code,describe:n.property.describe,value:n.property.value,required:n.property.required};if(n.property.cls==i.COMP_CLASS_DATEPICKER);else if(n.property.cls==i.COMP_CLASS_TEXTBOX){var a=U(i,e,pt).call(i,t,n.part),s=U(i,e,ut).call(i,a,n.id);Object.assign(r,{value:s})}else n.property.cls==i.COMP_CLASS_TEXTFIELD||n.property.cls==i.COMP_CLASS_CHECKBOX||n.property.cls==i.COMP_CLASS_RADIOGROUP||(n.property.cls==i.COMP_CLASS_SINGLEFIELD?n.property.value&&Object.assign(r,{value:n.property.value.code}):n.property.cls==i.COMP_CLASS_MULTIPLEFIELD&&n.property.value&&Object.assign(r,{value:n.property.value.map((function(t){return t.code})).join(",")}));return r})).filter((function(t){return b.isNotBlank(t.code)}))}},{key:"getDocumentStructure",value:function(t){var i={};return i.header=this.getElementChars(t,U(this,e,pt).call(this,t,a.CONTENT_PART_HEADER)),i.body=this.getElementChars(t,U(this,e,pt).call(this,t,a.CONTENT_PART_BODY)),i.footer=this.getElementChars(t,U(this,e,pt).call(this,t,a.CONTENT_PART_FOOTER)),i}},{key:"getElementChars",value:function(t,i){var n=this,r=[];return i.forEach((function(i){i.property.type==n.TYPE_STRUCT?i.property.classify==n.CLS_END||r.push(""):r[r.length-1]=r[r.length-1]+U(n,e,dt).call(n,t,i)})),r}},{key:"getElementHideCell",value:function(t,e){var i=this,n=[];return e.forEach((function(e){var r=e.property;if(r.type==i.TYPE_STRUCT&&r.classify==i.CLS_CELL&&r.visible&&(r.rowspan>1||r.colspan>1)){for(var a=[],s=0;s<r.rowspan;s++)for(var o=0;o<r.colspan;o++)a.push("".concat(r.row-s,",").concat(r.col-o));for(var l=i.findElementIndex(t,e);l>=0;l--){var h=t[l].property;h.type==i.TYPE_STRUCT&&h.classify==i.CLS_CELL&&!h.visible&&a.includes("".concat(h.row,",").concat(h.col))&&n.push(t[l])}}})),n}},{key:"updateTextboxValue",value:function(t,i,n){var r=this,a=[],s=[],o=U(this,e,pt).call(this,t,i);if(o.forEach((function(t){t.modular.type==r.MODULAR_TYPE_COMP&&t.modular.dataID==n.modular.dataID&&t.property.classify!=r.CLS_TEXTBOX_BORDER&&(t.property.placeholder?a.push(t):s.push(t))})),s.length>0)return this.deleteElements(o,a),a.includes(n)?this.getElementCompsById(o,n.modular.dataID).at(-1):n;var l=this.getElementCompsById(o,n.modular.dataID).at(-1),h=Object.assign({},l.textStyle);return this.deleteElements(o,a),this.insertElements(o,l,this.createComponent(t,l.modular.dataID,h,o,l)),l}},{key:"loadImageCache",value:function(t,e,i,n){var r=this;e<t.length?this.createImageCache(t[e].extend.base64,(function(a){t[e].extend.view=a,t[e].extend.uuid=b.getUUID(),i(e),O.storeImage(t[e].extend),r.loadImageCache(t,e+1,i,n)})):n()}}]),e}();function V(){return{deletable:!0,required:!1,code:"",describe:""}}function K(t,e){return{property:t,offset:e,_drag_offset:Object.assign({},e)}}function Z(t,e,i,n,r,a){var s={code:e,type:this.TYPE_TEXT,classify:this.CLS_IMAGE,imageBlock:!0,imageType:t};return U(this,G,q).call(this,s,n,r,a,i)}function J(t,e,i,n,r){var a={code:t,type:this.TYPE_TEXT,classify:e,imageBlock:!1,imageType:""};return U(this,G,q).call(this,a,i,n,r)}function q(t,e,i,n,r){return{property:Object.assign(this.defaultProperty(),t),textStyle:Object.assign(this.defaultTextStyle(),e),dimension:Object.assign(this.defaultDimension(),i),modular:Object.assign(this.defaultModular(),n),extend:Object.assign({},r)}}function $(t,e,i,n,r){return{property:Object.assign(this.defaultProperty(),t),textStyle:Object.assign(this.defaultTextStyle(),e),paragStyle:Object.assign(this.defaultParagStyle(),i),dimension:Object.assign(this.defaultDimension(),n),modular:Object.assign(this.defaultModular(),r),extend:{}}}function Q(t,e,i,n,r){var a=this.getResourceCompInfo(t,e),s=new Date(a.property.value).pattern(a.property.format),o=[],l={type:this.MODULAR_TYPE_COMP,dataID:e,dataClass:this.COMP_CLASS_DATEPICKER};return s.split("").forEach((function(t){var e=G.createTextChar(t,i,n,r,l);o.push(e)})),o}function tt(t,e,i,n,r){var a=this,s=this.findDimension(n,r._count),o=this.getResourceCompInfo(t,e),l={type:this.MODULAR_TYPE_COMP,dataID:e,dataClass:this.COMP_CLASS_CHECKBOX},h=[];return h.push(U(this,G,J).call(this,o.property.value,this.CLS_CHECKBOX_BOTTON,i,s,l)),o.property.label.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR},n=U(a,G,q).call(a,e,i,s,l);h.push(n)})),h}function et(t,e,i,n,r){var a=this,s=this.findDimension(n,r._count),o=this.getResourceCompInfo(t,e),l=[];return o.property.options.forEach((function(t){var n={type:a.MODULAR_TYPE_COMP,dataClass:a.COMP_CLASS_RADIOGROUP,dataID:e};l.push(U(a,G,J).call(a,t.code,a.CLS_RADIOBOX_BOTTON,i,s,n)),t.text.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR},r=U(a,G,q).call(a,e,i,s,n);l.push(r)}))})),l}function it(t,e,i,n,r){var a=this,s=this.getResourceCompInfo(t,e),o=this.findDimension(n,r._count),l={type:this.MODULAR_TYPE_COMP,dataID:e,dataClass:this.COMP_CLASS_TEXTBOX},h=[];return h.push(U(this,G,J).call(this,"0",this.CLS_TEXTBOX_BORDER,i,o,l)),s.property.value?s.property.value.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR},n=U(a,G,q).call(a,e,i,o,l);h.push(n)})):s.property.placeholder.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR,placeholder:!0},n=U(a,G,q).call(a,e,i,o,l);h.push(n)})),h.push(U(this,G,J).call(this,"1",this.CLS_TEXTBOX_BORDER,i,o,l)),h}function nt(t,e,i,n,r){var a=this,s=this.findDimension(n,r._count),o=this.getResourceCompInfo(t,e),l={type:this.MODULAR_TYPE_COMP,dataID:e,dataClass:this.COMP_CLASS_TEXTFIELD},h=[];return o.property.value?o.property.value.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR},n=U(a,G,q).call(a,e,i,s,l);h.push(n)})):(b.isEmpty(o.property.placeholder)?" ":o.property.placeholder).split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR,placeholder:!0},n=U(a,G,q).call(a,e,i,s,l);h.push(n)})),h}function rt(t,e,i,n,r){var a=this,s=this.findDimension(n,r._count),o=this.getResourceCompInfo(t,e),l={type:this.MODULAR_TYPE_COMP,dataID:e,dataClass:this.COMP_CLASS_SINGLEFIELD},h=[];return o.property.value?o.property.value.text.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR},n=U(a,G,q).call(a,e,i,s,l);h.push(n)})):o.property.placeholder.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR,placeholder:!0},n=U(a,G,q).call(a,e,i,s,l);h.push(n)})),h}function at(t,e,i,n,r){var a=this,s=this.findDimension(n,r._count),o=this.getResourceCompInfo(t,e),l={type:this.MODULAR_TYPE_COMP,dataID:e,dataClass:this.COMP_CLASS_MULTIPLEFIELD},h=[];return o.property.value.length>0?o.property.value.map((function(t){return t.text})).join(o.property.separator).split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR},n=U(a,G,q).call(a,e,i,s,l);h.push(n)})):o.property.placeholder.split("").forEach((function(t){var e={code:t,type:a.TYPE_TEXT,classify:a.CLS_TEXT_CHAR,placeholder:!0},n=U(a,G,q).call(a,e,i,s,l);h.push(n)})),h}function st(t,e){var i=t.findIndex((function(t){return t===e}));t.splice(i,1)}function ot(t,e){var i=this;e.forEach((function(e){return U(i,G,st).call(i,t,e)}))}function lt(t,e,i){var n=e.at(-1);if(n.property.visible=!1,e.length>1){for(var r=0;r<e.length-1;r++)i.push(e[r]),U(this,G,st).call(this,t,e[r]);var a=this.defaultDimension();a.depth=n.dimension+1;var s={type:this.TYPE_STRUCT,classify:this.CLS_LINE};i.push(U(this,G,$).call(this,s,n.textStyle,n.paragStyle,a))}}function ht(t,e){if(0==t.length||0==e.length)return[];var i=[];return t.forEach((function(t){e.includes(t)&&i.push(t)})),i}function ct(t,e){return t.filter((function(t){return t.modular.dataID==e.modular.dataID}))}function ut(t,e){var i=this;return t.filter((function(t){return t.modular.dataID==e&&t.property.classify==i.CLS_TEXT_CHAR&&!t.property.placeholder})).map((function(t){return t.property.code})).join("")}function ft(t){for(var e=U(this,G,pt).call(this,t,a.CONTENT_PART_BODY),i=[],n=[],r=a.REVISION_DEF,s=!1,o=0;o<e.length;o++){var l=e[o].modular;l.revision!=a.REVISION_DEF?s&&r==l.revision?n.push(e[o]):((n=[]).push(e[o]),i.push(n),s=!0,r=l.revision):s=!1}return i}function dt(t,e){if(e.property.classify==G.CLS_TEXT_CHAR)return e.property.code;if(e.property.classify==G.CLS_TEXTBOX_BORDER)return"0"==t.property.code?"[":"]";if(e.property.classify==G.CLS_EXPRE)switch(e.extend.type){case G.EXP_MH:return"[月经史]";case G.EXP_TM:return"[牙位图]";case G.EXP_FN:return"[胎心位置]";default:return"[表达式]"}else{if(e.property.classify==G.CLS_CHECKBOX_BOTTON)return t.property.code==a.VALUE_BOOL_TRUE?"[√]":"[]";if(e.property.classify==G.CLS_RADIOBOX_BOTTON)return G.getResourceCompInfo(t,e.modular.dataID).property.value==t.property.code?"●":"○";if(G.isImageBlock(e))return"[图片]"}return""}function pt(t,e){return e==a.CONTENT_PART_BODY?t.body:e==a.CONTENT_PART_HEADER?t.header:e==a.CONTENT_PART_FOOTER?t.footer:t.body}r(G,"MODULAR_TYPE_NORM","0"),r(G,"MODULAR_TYPE_COMP","1"),r(G,"COMP_CLASS_DATEPICKER","1"),r(G,"COMP_CLASS_TEXTBOX","2"),r(G,"COMP_CLASS_TEXTFIELD","3"),r(G,"COMP_CLASS_CHECKBOX","4"),r(G,"COMP_CLASS_RADIOGROUP","5"),r(G,"COMP_CLASS_SINGLEFIELD","6"),r(G,"COMP_CLASS_MULTIPLEFIELD","7"),r(G,"TYPE_STRUCT",1),r(G,"TYPE_TEXT",2),r(G,"TYPE_OBJECT",3),r(G,"CLS_LINE",110),r(G,"CLS_END",111),r(G,"CLS_CELL",120),r(G,"CLS_DIVDER",130),r(G,"CLS_TEXT_CHAR",210),r(G,"CLS_TEXT_TAB",211),r(G,"CLS_IMAGE",220),r(G,"CLS_GAHCODE",221),r(G,"CLS_EXPRE",222),r(G,"CLS_TEXTBOX_BORDER",230),r(G,"CLS_CHECKBOX_BOTTON",232),r(G,"CLS_RADIOBOX_BOTTON",233),r(G,"EXP_MH",0),r(G,"EXP_TM",1),r(G,"EXP_FN",2),r(G,"OBJECT_SHAPE_LINE","line"),r(G,"OBJECT_SHAPE_ELLIPSE","ellipse"),r(G,"OBJECT_SHAPE_RECT","rect"),r(G,"OBJECT_SHAPE_TRIANGLE","triangle"),r(G,"IAMGE_TYPE_NORMAL",0),r(G,"IAMGE_TYPE_BARCODE",1),r(G,"IAMGE_TYPE_QRCODE",2),r(G,"IAMGE_TYPE_SIGNATURE",3),r(G,"WORD_STYLE_PROPERTYS",["font","size","color","bold","italic","underline","strikethrough","script"]),r(G,"PARAGRAPH_STYLE_PROPERTYS",["align","indentLeft","indentRight","indentSpecialType","indentSpecialvalue","rowspac","segmentSpacPre","segmentSpacAft"]);var gt=function(){function e(){t(this,e)}return n(e,null,[{key:"getDefalueResources",value:function(){return{component:[],comments:[],objects:{above:[],below:[]}}}},{key:"getDefalueInfo",value:function(t){return{name:t.name,createuser:t.useraccount,createusername:t.username,createtime:Date.now(),version:this.VERSION,canvasdpi:0,pagecount:0}}},{key:"getDefaluePaper",value:function(){return{type:a.PaperTypes[0].value,width:a.PaperTypes[0].width,height:a.PaperTypes[0].height,top:a.PaperMargins[0].topBottom,bottom:a.PaperMargins[0].topBottom,left:a.PaperMargins[0].leftRight,right:a.PaperMargins[0].leftRight,headerTop:a.PaperMargins[0].headerFooter,footerBottom:a.PaperMargins[0].headerFooter,direction:a.PAPER_ROTATION_PORTRAIT}}},{key:"getDefaluePageInfo",value:function(){return{number:"0",format:"{n}/{c}",align:a.ALIGN_CENTER,size:a.getDefaultFontSize().value,family:a.getDefaultFontFamily().value,watermark:void 0}}},{key:"getDefalueConfig",value:function(){return{usedColors:[]}}},{key:"createNewDocument",value:function(t){return{body:[G.createDocumentEnd()],header:[G.createDocumentEnd()],footer:[G.createDocumentEnd()],view:[],config:this.getDefalueConfig(),paper:this.getDefaluePaper(),info:this.getDefalueInfo(t),page:this.getDefaluePageInfo(),resources:this.getDefalueResources()}}},{key:"createParagLine",value:function(t,e,i,n,r,a){return{elements:[],left:i,right:e,width:t,height:0,surplus:t-i-e-n-r-a,baseLine:0,descent:0,alignLeft:0,indentLeft:n,indentRight:r,indentSpecia:a,marginTop:0,marginBot:0}}},{key:"createParagFrag",value:function(){return{elements:[],isBefBreak:!1,isAftBreak:!1}}},{key:"getDocumentCharCount",value:function(t){var e=0;return t.forEach((function(t){var i=t.property;i.type==G.TYPE_TEXT&&i.classify==G.CLS_TEXT_CHAR&&e++})),e}}]),e}();function vt(t,e,i,n,r,a,s){try{var o=t[a](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,r)}function _t(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function s(t){vt(a,n,r,s,o,"next",t)}function o(t){vt(a,n,r,s,o,"throw",t)}s(void 0)}))}}function yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Et(t,e){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Et(t,e)}function mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Et(t,e)}function wt(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yt(t)}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bt(t)}function Tt(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function Ct(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Tt(t,e,"get"))}function kt(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,Tt(t,e,"set"),i),i}r(gt,"VERSION",1.1);var St=i(2207),Ot=i.n(St),Lt=n((function e(){t(this,e)}));r(Lt,"CUT_SUCCESSFULLY","剪切成功"),r(Lt,"PASTE_SUCCESSFULLY","粘贴成功");var Rt=function(){function e(){t(this,e)}return n(e,[{key:"getCurrentPartData",value:function(t,e){return e==a.CONTENT_PART_BODY?t.body:e==a.CONTENT_PART_HEADER?t.header:e==a.CONTENT_PART_FOOTER?t.footer:void 0}},{key:"getCurrentPartModel",value:function(t,e){return e==a.CONTENT_PART_BODY?t.getBodyModel():e==a.CONTENT_PART_HEADER?t.getHeaderModel():e==a.CONTENT_PART_FOOTER?t.getFooterModel():void 0}},{key:"getCanvasOffset",value:function(t){var e=this.getCurrentRatio();return{offsetX:t.offsetX/e,offsetY:t.offsetY/e}}},{key:"getCurrentRatio",value:function(){return a.SYS_ZOOM*a.SYS_STANDARD_RATIO}}]),e}();function xt(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}var It=new WeakMap,Pt=new WeakMap,At=new WeakMap,Mt=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,Bt=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,Ft=new WeakMap,Yt=function(e){mt(o,e);var i,r,s=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function o(){var e;t(this,o);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return xt(yt(e=s.call.apply(s,[this].concat(n))),It,{writable:!0,value:void 0}),xt(yt(e),Pt,{writable:!0,value:void 0}),xt(yt(e),At,{writable:!0,value:void 0}),xt(yt(e),Mt,{writable:!0,value:void 0}),xt(yt(e),Dt,{writable:!0,value:void 0}),xt(yt(e),Nt,{writable:!0,value:void 0}),xt(yt(e),Bt,{writable:!0,value:void 0}),xt(yt(e),Wt,{writable:!0,value:void 0}),xt(yt(e),Ht,{writable:!0,value:void 0}),xt(yt(e),Ft,{writable:!0,value:void 0}),e}return n(o,[{key:"clearSelects",value:function(t){t.splice(0,t.length)}},{key:"arrangeElements",value:function(t,e,i){var n=G.getElementHideCell(t,i);E.splice(i,0,n),i.length>0&&G.isTextboxElements(i)||i.forEach((function(e){G.getElementComps(t,e).forEach((function(t){i.includes(t)||i.push(t)}))}));var r=i.findIndex((function(t){return t.property.classify==G.CLS_END}));r>=0&&i.splice(r,1);var a=Array.from(new Set(i));a.sort((function(t,e){return t._count-e._count})),e.splice(0,e.length),E.splice(e,0,a)}},{key:"getCurrentPartOffset",value:function(t,e,i,n){var r=t.getPageSize(),s=s=parseInt(n/r.pxHeight);return e==a.CONTENT_PART_BODY?n-=r.pxHeaderHeight:e==a.CONTENT_PART_HEADER?n%=r.pxHeight:e==a.CONTENT_PART_FOOTER&&(n=n%r.pxHeight-(r.pxHeight-r.pxFooterHeight)),{offsetX:i,offsetY:n,pagenum:s}}},{key:"setCursorCallBack",value:function(t){kt(this,It,t)}},{key:"setChangeCallBack",value:function(t){kt(this,At,t)}},{key:"setRefreshCallBack",value:function(t){kt(this,Mt,t)}},{key:"setDragCallBack",value:function(t){kt(this,Nt,t)}},{key:"setContextMenuCallBack",value:function(t){kt(this,Bt,t)}},{key:"setPopMenuCallBack",value:function(t){kt(this,Ht,t)}},{key:"setSaveMirrorCallBack",value:function(t){kt(this,Dt,t)}},{key:"setCursorStyleCallBack",value:function(t){kt(this,Pt,t)}},{key:"setLocateInputCallBack",value:function(t){kt(this,Wt,t)}},{key:"setChangePartCallBack",value:function(t){kt(this,Ft,t)}},{key:"callbackSetCursor",value:function(t,e,i,n){Ct(this,It).call(this,t,e,i,n)}},{key:"callbackContextMenu",value:function(t){Ct(this,Bt).call(this,t)}},{key:"callbackPopMenu",value:function(t){Ct(this,Ht).call(this,t)}},{key:"callbackRefresh",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Ct(this,Mt).call(this,t)}},{key:"callbackChange",value:function(){Ct(this,At).call(this)}},{key:"callbackDrag",value:function(){Ct(this,Nt).call(this)}},{key:"callbackSaveMirror",value:function(t,e){Ct(this,Dt).call(this,t,e)}},{key:"callbackCursorStyle",value:function(t){Ct(this,Pt).call(this,t)}},{key:"callbackLocateInput",value:function(){Ct(this,Wt).call(this)}},{key:"callbackChangePart",value:function(t){Ct(this,Ft).call(this,t)}},{key:"callbackRefreshByChange",value:function(t,e){Ct(this,Dt).call(this,t,e),Ct(this,At).call(this),Ct(this,Mt).call(this)}}]),o}(Rt);function jt(t,e){zt(t,e),e.add(t)}function Xt(t,e,i){zt(t,e),e.set(t,i)}function zt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ut(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}r(Yt,"INSERT_WORD","insertWord"),r(Yt,"INSERT_LINEFEEL","insertLineFeel"),r(Yt,"INSERT_TAB","inserTab"),r(Yt,"INSERT_TABLE","insertTable"),r(Yt,"INSERT_IMAGE","insertImage"),r(Yt,"INSERT_COMP","insertComp"),r(Yt,"INSERT_SIGNATURE","insertSignature"),r(Yt,"INSERT_DIVDER","insertDivder"),r(Yt,"INSERT_GRAPHICCODE","insertGraphicCode"),r(Yt,"INSERT_TEXTFIELD","insertTextField"),r(Yt,"INSERT_WATERMARK","insertWatermark"),r(Yt,"INSERT_PAGENUMBER","insertPageNumber"),r(Yt,"INSERT_COMMENTS","insertComments"),r(Yt,"BACKSPACE_TEXT","backspaceText"),r(Yt,"PASTE_TEXT","pasteText"),r(Yt,"CUT_TEXT","cutText"),r(Yt,"DELETE_TEXT","deleteText"),r(Yt,"DELETE_WATERMARK","deleteWatermark"),r(Yt,"CHANGE_TEXT_STYLE","changeTextStyle"),r(Yt,"CHANGE_PARAG_STYLE","changeParagStyle"),r(Yt,"CHANGE_FONT_COLOR","changeFontColor"),r(Yt,"CHANGE_BLOCK_SIZE","changeBlockSize"),r(Yt,"CHANGE_TABLE_SIZE","changeTableSize"),r(Yt,"CHANGE_OBJECT_SIZE","changeObjectSize"),r(Yt,"CHANGE_EXP_VALUE","changeExpValue"),r(Yt,"CHANGE_COMMENTS","changeComments"),r(Yt,"TABLE_MERGE","tableMerge"),r(Yt,"TABLE_DELETE_ROW","tableDeleteRow"),r(Yt,"TABLE_DELETE_COL","tableDeleteCol"),r(Yt,"TABLE_DELETE_CELL","tableDeleteCell"),r(Yt,"TABLE_DELETE","tableDelete"),r(Yt,"TABLE_INSERT_CELL","tableInsertCell"),r(Yt,"TABLE_SPLIT","tableSplit"),r(Yt,"TABLE_BORDER_CHANGE","tableBorderchange"),r(Yt,"REVISION_ACCEPT","acceptrevision"),r(Yt,"REVISION_REFUSE","refuserevision");var Gt=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,qt=new WeakMap,$t=new WeakMap,Qt=new WeakSet,te=new WeakSet,ee=new WeakSet,ie=new WeakSet,ne=new WeakSet,re=new WeakSet,ae=new WeakSet,se=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e;t(this,s);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return jt(yt(e=a.call.apply(a,[this].concat(n))),ae),jt(yt(e),re),jt(yt(e),ne),jt(yt(e),ie),jt(yt(e),ee),jt(yt(e),te),jt(yt(e),Qt),Xt(yt(e),Gt,{writable:!0,value:void 0}),Xt(yt(e),Vt,{writable:!0,value:void 0}),Xt(yt(e),Kt,{writable:!0,value:void 0}),Xt(yt(e),Zt,{writable:!0,value:void 0}),Xt(yt(e),Jt,{writable:!0,value:void 0}),Xt(yt(e),qt,{writable:!0,value:void 0}),Xt(yt(e),$t,{writable:!0,value:void 0}),e}return n(s,[{key:"init",value:function(t,e,i,n,r,a){kt(this,Gt,t),kt(this,Vt,e),kt(this,Jt,i),kt(this,Kt,n),kt(this,Zt,r),kt(this,qt,a)}},{key:"action",value:function(t,e){e?Ut(this,ee,he).call(this,t):Ut(this,Qt,oe).call(this,t),this.callbackRefresh()}}]),s}(Yt);function oe(t){var e=this.getCurrentPartData(Ct(this,Gt),Ct(this,qt));if(Ct(this,Jt).length>0){if(t==a.KEY_ARROWLEFT){var i=Ct(this,Jt).at(0);this.clearSelects(Ct(this,Jt)),this.callbackSetCursor(i,i)}else if(t==a.KEY_ARROWRIGHT){var n=Ct(this,Jt).at(-1);n.property.type!=G.TYPE_STRUCT&&(n=G.findNextElement(e,n)),this.clearSelects(Ct(this,Jt)),this.callbackSetCursor(n,n)}else if(t==a.KEY_ARROWUP){var r=Ct(this,Jt).at(0);this.clearSelects(Ct(this,Jt));var s=Ut(this,te,le).call(this,t,r,r);this.callbackSetCursor(s.element,s.nextelement,void 0,s.offsetX)}else if(t==a.KEY_ARROWDOWN){var o=Ct(this,Jt).at(-1);o.property.type!=G.TYPE_STRUCT&&(o=G.findNextElement(e,o)),this.clearSelects(Ct(this,Jt));var l=Ut(this,te,le).call(this,t,o,o);this.callbackSetCursor(l.element,l.nextelement,void 0,l.offsetX)}}else if(t==a.KEY_ARROWLEFT){var h=e[Math.max(Ct(this,Zt)._count-1,0)];this.callbackSetCursor(h,h)}else if(t==a.KEY_ARROWRIGHT){var c=e[Math.min(Ct(this,Zt)._count+1,e.length-1)];this.callbackSetCursor(c,c)}else if(t==a.KEY_ARROWUP||t==a.KEY_ARROWDOWN){var u=Ut(this,te,le).call(this,t,Ct(this,Kt),Ct(this,Zt));this.callbackSetCursor(u.element,u.nextelement,void 0,u.offsetX)}}function le(t,e,i){var n=this.getCurrentPartModel(Ct(this,Vt),Ct(this,qt)),r=void 0;e._cursor?r=e._cursor:(r=e._offset.offsetX,e!==i&&(r+=e._size.width));var s={};if(t==a.KEY_ARROWUP&&n.localeUpElement(e,r,s)){if(s.element.property.type!=G.TYPE_STRUCT&&s.next){var o=data.findIndex((function(t){return t===s.element}));s.nextelement=data[o+1]}else s.nextelement=s.element;return s.offsetX=r,s}if(t==a.KEY_ARROWDOWN&&n.localeDownElement(e,r,s))if(s.element.property.type!=G.TYPE_STRUCT&&s.next){var l=data.findIndex((function(t){return t===s.element}));s.nextelement=data[l+1]}else s.nextelement=s.element;return s}function he(t){t==a.KEY_ARROWLEFT?Ut(this,ie,ce).call(this,Ct(this,Jt).length>0):t==a.KEY_ARROWRIGHT?Ut(this,ne,ue).call(this,Ct(this,Jt).length>0):t==a.KEY_ARROWUP?Ut(this,re,fe).call(this,Ct(this,Jt).length>0):t==a.KEY_ARROWDOWN&&Ut(this,ae,de).call(this,Ct(this,Jt).length>0)}function ce(t){var e=this.getCurrentPartData(Ct(this,Gt),Ct(this,qt)),i=this.getCurrentPartModel(Ct(this,Vt),Ct(this,qt));if(t)i.selectElement2(Ct(this,Jt),Ct(this,$t),a.SELECT_EXT_TYPE_L),this.arrangeElements(e,Ct(this,Jt),Ct(this,Jt));else if(Ct(this,Zt)._count>0){var n=G.findPreElement(e,Ct(this,Zt)),r=i.selectElement(n,Ct(this,Zt));this.arrangeElements(e,Ct(this,Jt),r),kt(this,$t,a.SELECT_POINT_BEG)}}function ue(t){var e=this.getCurrentPartData(Ct(this,Gt),Ct(this,qt)),i=this.getCurrentPartModel(Ct(this,Vt),Ct(this,qt));if(t)i.selectElement2(Ct(this,Jt),Ct(this,$t),a.SELECT_EXT_TYPE_R),this.arrangeElements(e,Ct(this,Jt),Ct(this,Jt));else if(Ct(this,Zt).property.classify!=G.CLS_END){var n=G.findNextElement(e,Ct(this,Zt)),r=i.selectElement(Ct(this,Zt),n);this.arrangeElements(e,Ct(this,Jt),r),kt(this,$t,a.SELECT_POINT_END)}}function fe(t){var e=this.getCurrentPartData(Ct(this,Gt),Ct(this,qt)),i=this.getCurrentPartModel(Ct(this,Vt),Ct(this,qt));if(t)i.selectElement2(Ct(this,Jt),Ct(this,$t),a.SELECT_EXT_TYPE_U),this.arrangeElements(e,Ct(this,Jt),Ct(this,Jt));else if(Ct(this,Zt)._count>0){var n=Ut(this,te,le).call(this,a.KEY_ARROWUP,Ct(this,Kt),Ct(this,Zt));n.element||(n.element=e.at(0));var r=i.selectElement(n.element,Ct(this,Zt));this.arrangeElements(e,Ct(this,Jt),r),kt(this,$t,a.SELECT_POINT_BEG)}}function de(t){var e=this.getCurrentPartData(Ct(this,Gt),Ct(this,qt)),i=this.getCurrentPartModel(Ct(this,Vt),Ct(this,qt));if(t)i.selectElement2(Ct(this,Jt),Ct(this,$t),a.SELECT_EXT_TYPE_D),this.arrangeElements(e,Ct(this,Jt),Ct(this,Jt));else if(Ct(this,Zt).property.classify!=G.CLS_END){var n=Ut(this,te,le).call(this,a.KEY_ARROWDOWN,Ct(this,Kt),Ct(this,Zt));n.element||(n.element=e.at(-1));var r=i.selectElement(Ct(this,Zt),n.element);this.arrangeElements(e,Ct(this,Jt),r),kt(this,$t,a.SELECT_POINT_END)}}function pe(t,e){ve(t,e),e.add(t)}function ge(t,e,i){ve(t,e),e.set(t,i)}function ve(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _e(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var ye=new WeakMap,Ee=new WeakMap,me=new WeakMap,we=new WeakMap,be=new WeakMap,Te=new WeakMap,Ce=new WeakMap,ke=new WeakMap,Se=new WeakSet,Oe=new WeakSet,Le=new WeakSet,Re=new WeakSet,xe=new WeakSet,Ie=new WeakSet,Pe=new WeakSet,Ae=new WeakSet,Me=new WeakSet,De=new WeakSet,Ne=function(e){mt(o,e);var i,r,s=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function o(){var e;t(this,o);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return pe(yt(e=s.call.apply(s,[this].concat(n))),De),pe(yt(e),Me),pe(yt(e),Ae),pe(yt(e),Pe),pe(yt(e),Ie),pe(yt(e),xe),pe(yt(e),Re),pe(yt(e),Le),pe(yt(e),Oe),pe(yt(e),Se),ge(yt(e),ye,{writable:!0,value:void 0}),ge(yt(e),Ee,{writable:!0,value:void 0}),ge(yt(e),me,{writable:!0,value:void 0}),ge(yt(e),we,{writable:!0,value:void 0}),ge(yt(e),be,{writable:!0,value:void 0}),ge(yt(e),Te,{writable:!0,value:void 0}),ge(yt(e),Ce,{writable:!0,value:void 0}),ge(yt(e),ke,{writable:!0,value:void 0}),e}return n(o,[{key:"init",value:function(t,e,i,n,r,a,s,o){kt(this,ye,t),kt(this,Ee,e),kt(this,me,i),kt(this,we,n),kt(this,be,r),kt(this,ke,s),kt(this,Ce,a),kt(this,Te,o)}},{key:"insertWord",value:function(t){var e=this,i=0;if(A.isEdit());else{if(!A.isModify())return;if(Ct(this,me).length>0)return;i=1}Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var n=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),r=G.getElementOperate(Ct(this,ye),n,Ct(this,we),i);if(r.insert){var a=[];if(t.split("").forEach((function(t){a.push(G.createTextChar(t,Ct(e,Ce),n,Ct(e,we),r.modular))})),G.insertElements(n,Ct(this,we),a),G.isInsideTextbox(n,Ct(this,we))){var s=G.updateTextboxValue(Ct(this,ye),Ct(this,Te),Ct(this,we));this.callbackSetCursor(s,s)}else this.callbackSetCursor(Ct(this,we),Ct(this,we));this.callbackRefreshByChange(Yt.INSERT_TAB,t)}}},{key:"insertLinefeel",value:function(){if(A.isEdit()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var t=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),e=G.getElementOperate(Ct(this,ye),t,Ct(this,we));if(e.insert&&e.insertLineFeel){var i=G.createLineFeel(Ct(this,Ce),Ct(this,ke),t,Ct(this,we),e.modular);G.insertElement(t,Ct(this,we),i),this.callbackSetCursor(Ct(this,we),Ct(this,we)),this.callbackRefreshByChange(Yt.INSERT_LINEFEEL)}}}},{key:"inserTab",value:function(){if(A.isModify()){if(Ct(this,me).length>0)return}else if(!A.isEdit())return;Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var t=G.getElementOperate(Ct(this,ye),elements,Ct(this,we),0);if(t.insert){var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.createTextTab(Ct(this,Ce),e,Ct(this,we),t.modular);G.insertElement(e,Ct(this,we),i),this.callbackSetCursor(Ct(this,we),Ct(this,we)),this.callbackRefreshByChange(Yt.INSERT_TAB)}}},{key:"insertTable",value:function(t){if(A.isEdit()&&!(Ct(this,me).length>0)){var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertTable){var n=this.getCurrentPartModel(Ct(this,Ee),Ct(this,Te));if(Ct(this,we)._count>0&&e[Ct(this,we)._count-1].property.type!=G.TYPE_STRUCT){var r=G.createLineFeel(Ct(this,Ce),Ct(this,ke),e,Ct(this,we));G.insertElement(e,Ct(this,we),r)}for(var a=n.getChapterSize(Ct(this,we)),s=parseInt((a.lineWidth-a.lineLeft-a.lineRight)/t.cols),o=[],l=0;l<t.rows;l++)for(var h=0;h<t.cols;h++){var c={row:l,col:h,width:s};o.push(G.createTableCell(c,Ct(this,Ce),Ct(this,ke),e,Ct(this,we)))}var u=o[0];G.insertElements(e,Ct(this,we),o),this.callbackSetCursor(u,u),this.callbackRefreshByChange(Yt.INSERT_TABLE)}}}},{key:"insertImage",value:function(t){if(A.isEdit()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te));G.getElementOperate(Ct(this,ye),e,Ct(this,we)).insert&&_e(this,Ie,je).call(this,G.IAMGE_TYPE_NORMAL,t,Yt.INSERT_IMAGE)}}},{key:"insertSignature",value:function(t){if(A.isEdit()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te));G.getElementOperate(Ct(this,ye),e,Ct(this,we)).insert&&_e(this,Ie,je).call(this,G.IAMGE_TYPE_SIGNATURE,t,Yt.INSERT_SIGNATURE)}}},{key:"insertGraphicCode",value:function(t,e){if(A.isEdit()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var i=this.getCurrentPartData(Ct(this,ye),Ct(this,Te));G.getElementOperate(Ct(this,ye),i,Ct(this,we)).insert&&_e(this,Pe,Xe).call(this,t,e,Yt.INSERT_GRAPHICCODE)}}},{key:"insertDivder",value:function(t){if(A.isEdit()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertDivder){var n=G.createDivder(t,Ct(this,Ce),Ct(this,ke),e,Ct(this,we));G.insertElement(e,Ct(this,we),n),this.callbackSetCursor(Ct(this,we),Ct(this,we)),this.callbackRefreshByChange(Yt.INSERT_DIVDER)}}}},{key:"insertDatePicker",value:function(t,e){if(A.isDesign()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var i=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),n=G.getElementOperate(Ct(this,ye),i,Ct(this,we));if(n.insert&&n.insertComp){var r=b.getUUID(),a=t,s=Object.assign(G.defaultDatePickerPro(),{format:e,value:a});G.insertCompInfo(Ct(this,ye),Ct(this,Te),r,s),_e(this,Me,Ue).call(this,Ct(this,we),r)}}}},{key:"insertTextBox",value:function(t){if(A.isDesign()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertComp){var n=b.getUUID(),r=Object.assign(G.defaultTextBoxPro(),t);G.insertCompInfo(Ct(this,ye),Ct(this,Te),n,r),_e(this,Me,Ue).call(this,Ct(this,we),n)}}}},{key:"insertCheckbox",value:function(t){if(A.isDesign()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertComp){var n=b.getUUID(),r=Object.assign(G.defaultCheckboxPro(),t);G.insertCompInfo(Ct(this,ye),Ct(this,Te),n,r),_e(this,Me,Ue).call(this,Ct(this,we),n)}}}},{key:"insertRadioGroup",value:function(t){if(A.isDesign()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertComp){var n=b.getUUID(),r=Object.assign(G.defaultRadioGroupPro(),t);G.insertCompInfo(Ct(this,ye),Ct(this,Te),n,r),_e(this,Me,Ue).call(this,Ct(this,we),n)}}}},{key:"insertTextField",value:function(t){if(A.isDesign()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertComp){var n=b.getUUID(),r=Object.assign(G.defaultTextFieldPro(),t);G.insertCompInfo(Ct(this,ye),Ct(this,Te),n,r),_e(this,Me,Ue).call(this,Ct(this,we),n)}}}},{key:"insertSingleField",value:function(t){if(A.isDesign()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertComp){var n=b.getUUID(),r=Object.assign(G.defaultSingleFieldPro(),t);G.insertCompInfo(Ct(this,ye),Ct(this,Te),n,r),_e(this,Me,Ue).call(this,Ct(this,we),n)}}}},{key:"insertMultipleField",value:function(t){if(A.isDesign()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementOperate(Ct(this,ye),e,Ct(this,we));if(i.insert&&i.insertComp){var n=b.getUUID(),r=Object.assign(G.defaultMultipleFieldPro(),t);G.insertCompInfo(Ct(this,ye),Ct(this,Te),n,r),_e(this,Me,Ue).call(this,Ct(this,we),n)}}}},{key:"insertExpression",value:function(t){if(A.isEdit()){Ct(this,me).length>0&&_e(this,xe,Ye).call(this);var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te));if(G.getElementOperate(Ct(this,ye),e,Ct(this,we)).insert){var i=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),n=G.createExpression(t,Ct(this,Ce),i,Ct(this,we));G.insertElement(i,Ct(this,we),n),this.callbackSetCursor(Ct(this,we),Ct(this,we)),this.callbackRefreshByChange(Yt.INSERT_COMP)}}}},{key:"insertWatermark",value:function(t,e){if(A.isDesign()){if("reserve"==t){var i={text:"",style:"0",transparency:30,fontfamily:a.FontFamilys[0].value,fontsize:3e3};"1"==e?Object.assign(i,{text:"保密",style:"1"}):"2"==e?Object.assign(i,{text:"样本",style:"0"}):"3"==e?Object.assign(i,{text:"严禁复制",style:"1",fontsize:2e3}):"4"==e?Object.assign(i,{text:"原稿",style:"0"}):"5"==e?Object.assign(i,{text:"绝密",style:"1"}):"6"==e&&Object.assign(i,{text:"紧急",style:"0"}),Ct(this,ye).page.watermark=i}else Ct(this,ye).page.watermark=e;this.callbackRefreshByChange(Yt.INSERT_WATERMARK)}}},{key:"insertPageNumber",value:function(t){A.isDesign()&&("0"==t?Ct(this,ye).page=Object.assign(Ct(this,ye).page,{number:"0"}):"1"==t?Ct(this,ye).page=Object.assign(Ct(this,ye).page,{number:"1",align:a.ALIGN_LEFT}):"2"==t?Ct(this,ye).page=Object.assign(Ct(this,ye).page,{number:"1",align:a.ALIGN_CENTER}):"3"==t&&(Ct(this,ye).page=Object.assign(Ct(this,ye).page,{number:"1",align:a.ALIGN_RIGHT})),this.callbackRefreshByChange(Yt.INSERT_PAGENUMBER))}},{key:"insertComments",value:function(t){if(A.isNote())if(Ct(this,me).length>0)G.insertComments(Ct(this,ye),Ct(this,me),t),this.callbackRefreshByChange(Yt.INSERT_COMMENTS);else{var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getParagraphElements(e,Ct(this,we));G.insertComments(Ct(this,ye),i,t),this.callbackRefreshByChange(Yt.INSERT_COMMENTS)}}},{key:"insertRevision",value:function(){A.isModify()}},{key:"backspaceText",value:function(){var t="0";if(A.isEdit());else{if(!A.isModify())return;t="2"}if(Ct(this,me).length>0)_e(this,xe,Ye).call(this,t),this.callbackRefreshByChange(Yt.BACKSPACE_TEXT);else{var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.findElementIndex(e,Ct(this,we));G.getElementOperate(Ct(this,ye),e,Ct(this,we)).backspaceText&&("2"==t?e[i-1].modular.revision==a.REVISION_INS?(_e(this,Re,Fe).call(this,i-1),this.callbackSetCursor(Ct(this,we),Ct(this,we))):(e[i-1].modular.revision=t,this.callbackSetCursor(e[i-1],e[i-1])):_e(this,Re,Fe).call(this,i-1).length>0&&this.callbackSetCursor(Ct(this,we),Ct(this,we)),this.callbackRefreshByChange(Yt.BACKSPACE_TEXT))}}},{key:"deleteText",value:function(){var t=this,e="0";if(A.isEdit());else{if(!A.isModify())return;e="2"}if(Ct(this,me).length>0)_e(this,xe,Ye).call(this,e),this.callbackRefreshByChange(Yt.DELETE_TEXT);else{var i=function(i){var n=t.getCurrentPartData(Ct(t,ye),Ct(t,Te)),r=G.getElementOperate(Ct(t,ye),n,i),s=G.findElementIndex(n,i);r.deleteText&&("2"==e?n[s].modular.revision==a.REVISION_INS?(_e(t,Re,Fe).call(t,s),t.callbackSetCursor(n[s],n[s])):(n[s].modular.revision=e,t.callbackSetCursor(n[s+1],n[s+1])):(_e(t,Re,Fe).call(t,s),t.callbackSetCursor(n[s],n[s])),t.callbackRefreshByChange(Yt.DELETE_TEXT))};m.isNotUndefined(Ct(this,be))?G.deleteObject(Ct(this,ye),Ct(this,be))?(this.callbackSetCursor(Ct(this,we),Ct(this,we)),this.callbackRefreshByChange(Yt.DELETE_TEXT)):i(Ct(this,be)):i(Ct(this,we))}}},{key:"cutText",value:function(){if(A.isModify()){if(Ct(this,me).length>0)return}else if(!A.isEdit())return;Ct(this,me).length>0&&(_e(this,xe,Ye).call(this),this.callbackRefreshByChange(Yt.CUT_TEXT))}},{key:"pasteObj",value:function(t){if(A.isDesign());else if(!A.isEdit())return;t.elements.length>0?(G.pasteElements(Ct(this,ye),Ct(this,Te),Ct(this,we),t),this.callbackRefreshByChange(Yt.PASTE_TEXT)):this.callbackRefresh(!0)}},{key:"deleteWatermark",value:function(){A.isDesign()&&(Ct(this,ye).page.watermark=void 0,this.callbackRefreshByChange(Yt.DELETE_WATERMARK))}},{key:"changeCompInfo",value:function(t){A.isDesign()&&(G.changeCompInfo(Ct(this,ye),Ct(this,Te),t),_e(this,Se,Be).call(this,t.id))}},{key:"changeCompValue",value:function(t){if(A.isEdit()){for(var e in t)_e(this,Oe,We).call(this,G.getResourceCompInfoByCode(Ct(this,ye),e),t[e]);this.callbackChange(),this.callbackRefresh()}}},{key:"changeDatePickerValue",value:function(t,e){A.isEdit()&&(G.getResourceCompInfo(Ct(this,ye),t).property.value=e,_e(this,Se,Be).call(this,t))}},{key:"changeTextFieldValue",value:function(t,e){A.isEdit()&&(G.getResourceCompInfo(Ct(this,ye),t).property.value=e,_e(this,Se,Be).call(this,t))}},{key:"changeSingleFieldValue",value:function(t,e){A.isEdit()&&(G.getResourceCompInfo(Ct(this,ye),t).property.value=e,_e(this,Se,Be).call(this,t))}},{key:"changeMultipleFieldValue",value:function(t,e){if(A.isEdit()){var i=G.getResourceCompInfo(Ct(this,ye),t);Array.isArray(e)&&(i.property.value=e,_e(this,Se,Be).call(this,t))}}},{key:"changeExpressionValue",value:function(t){if(A.isEdit()){var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te));G.changeExpressionInfo(e,t),this.callbackRefreshByChange(Yt.CHANGE_EXP_VALUE)}}},{key:"changeCommentsState",value:function(t,e){if(A.isEdit()||A.isNote()){var i=Ct(this,ye).resources.comments.find((function(e){return e.id==t}));i&&(i.state=e,this.callbackRefreshByChange(Yt.INSERT_COMMENTS))}}},{key:"acceptRevision",value:function(){A.isEdit()&&(G.processRevision(Ct(this,ye),Ct(this,we),!0)?this.callbackRefreshByChange(Yt.REVISION_ACCEPT):this.callbackRefresh(!0))}},{key:"refuseRevision",value:function(){A.isEdit()&&(G.processRevision(Ct(this,ye),Ct(this,we),!1)?this.callbackRefreshByChange(Yt.REVISION_REFUSE):this.callbackRefresh(!0))}}]),o}(Yt);function Be(t){var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),i=G.getElementCompsById(e,t);if(i.length>0){var n=G.findNextElement(e,i.at(-1));G.deleteElements(e,i),_e(this,Me,Ue).call(this,n,t)}}function We(t,e){var i=this;t.forEach((function(t){t.property.value=e,_e(i,Le,He).call(i,Ct(i,ye).body,t),_e(i,Le,He).call(i,Ct(i,ye).header,t),_e(i,Le,He).call(i,Ct(i,ye).footer,t)}))}function He(t,e){var i=G.getElementCompsById(t,e.id);if(i.length>0){var n=G.findNextElement(t,i.at(-1)),r=i.at(-1).textStyle;G.deleteElements(t,i),G.insertElements(t,n,G.createComponent(Ct(this,ye),e.id,r,t,n))}}function Fe(t){var e=this.getCurrentPartData(Ct(this,ye),Ct(this,Te));return G.deleteElement(e,t)}function Ye(t){var e=this;if("2"==t){var i=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),n=G.findElementIndex(i,Ct(this,me)[0]),r=G.findElementIndex(i,Ct(this,me).at(-1)),s=Math.min(n,r),o=Ct(this,me).filter((function(t){return t.modular.revision==a.REVISION_INS}));G.deleteElements(i,o),Ct(this,me).filter((function(t){return!!G.getElementDeletable(Ct(e,ye),t)&&t.property.type!=a.TYPE_STRUCT})).forEach((function(e){e.modular.revision=t})),this.clearSelects(Ct(this,me)),this.callbackSetCursor(i[s],i[s]),kt(this,we,i[s])}else{var l=Math.min(Ct(this,me)[0]._count,Ct(this,me).at(-1)._count),h=Ct(this,me).filter((function(t){return G.getElementDeletable(Ct(e,ye),t)})),c=this.getCurrentPartData(Ct(this,ye),Ct(this,Te));G.deleteElements(c,h),this.clearSelects(Ct(this,me)),this.callbackSetCursor(c[l],c[l]),kt(this,we,c[l])}}function je(t,e,i){var n=this;G.createImageCache(e,(function(r){Ct(n,me).length>0&&_e(n,xe,Ye).call(n),_e(n,Ae,ze).call(n,t,e,r,i)}))}function Xe(t,e,i){var n=this;G.createGraphicCache(t,e,(function(r){Ct(n,me).length>0&&_e(n,xe,Ye).call(n),_e(n,Ae,ze).call(n,t,e,r,i)}))}function ze(t,e,i,n){var r=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),a=_e(this,De,Ge).call(this,i),s=G.createImage(t,e,a,Ct(this,Ce),r,Ct(this,we));G.insertElement(r,Ct(this,we),s),this.callbackSetCursor(s,s),this.callbackRefreshByChange(n)}function Ue(t,e){var i=this.getCurrentPartData(Ct(this,ye),Ct(this,Te)),n=G.createComponent(Ct(this,ye),e,Ct(this,Ce),i,t);G.insertElements(i,t,n),this.callbackSetCursor(t,t),this.callbackRefreshByChange(Yt.INSERT_COMP)}function Ge(t){var e={},i=this.getCurrentPartModel(Ct(this,Ee),Ct(this,Te)).getChapterSize(Ct(this,we)),n=parseInt(i.lineWidth-i.lineLeft-i.lineRight);return e.width=t.width/a.SYS_STANDARD_RATIO,e.height=t.height/a.SYS_STANDARD_RATIO,e.width>n&&(e.height=e.height*n/e.width,e.width=n),e.height>n&&(e.width=e.width*n/e.height,e.height=n),e.view=t,e.base64=t.src,e.uuid=b.getUUID(),O.storeImage(e),e}function Ve(t,e){Ze(t,e),e.add(t)}function Ke(t,e,i){Ze(t,e),e.set(t,i)}function Ze(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Je(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var qe=new WeakMap,$e=new WeakMap,Qe=new WeakMap,ti=new WeakMap,ei=new WeakMap,ii=new WeakMap,ni=new WeakMap,ri=new WeakMap,ai=new WeakMap,si=new WeakMap,oi=new WeakMap,li=new WeakMap,hi=new WeakMap,ci=new WeakSet,ui=new WeakSet,fi=new WeakSet,di=new WeakSet,pi=new WeakSet,gi=new WeakSet,vi=new WeakSet,_i=new WeakSet,yi=new WeakSet,Ei=new WeakSet,mi=new WeakSet,wi=new WeakSet,bi=new WeakSet,Ti=new WeakSet,Ci=new WeakSet,ki=new WeakSet,Si=new WeakSet,Oi=new WeakSet,Li=new WeakSet,Ri=new WeakSet,xi=new WeakSet,Ii=new WeakSet,Pi=new WeakSet,Ai=new WeakSet,Mi=new WeakSet,Di=new WeakSet,Ni=new WeakSet,Bi=new WeakSet,Wi=new WeakSet,Hi=function(e){mt(o,e);var i,r,s=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function o(){var e;t(this,o);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return Ve(yt(e=s.call.apply(s,[this].concat(n))),Wi),Ve(yt(e),Bi),Ve(yt(e),Ni),Ve(yt(e),Di),Ve(yt(e),Mi),Ve(yt(e),Ai),Ve(yt(e),Pi),Ve(yt(e),Ii),Ve(yt(e),xi),Ve(yt(e),Ri),Ve(yt(e),Li),Ve(yt(e),Oi),Ve(yt(e),Si),Ve(yt(e),ki),Ve(yt(e),Ci),Ve(yt(e),Ti),Ve(yt(e),bi),Ve(yt(e),wi),Ve(yt(e),mi),Ve(yt(e),Ei),Ve(yt(e),yi),Ve(yt(e),_i),Ve(yt(e),vi),Ve(yt(e),gi),Ve(yt(e),pi),Ve(yt(e),di),Ve(yt(e),fi),Ve(yt(e),ui),Ve(yt(e),ci),Ke(yt(e),qe,{writable:!0,value:void 0}),Ke(yt(e),$e,{writable:!0,value:void 0}),Ke(yt(e),Qe,{writable:!0,value:void 0}),Ke(yt(e),ti,{writable:!0,value:void 0}),Ke(yt(e),ei,{writable:!0,value:void 0}),Ke(yt(e),ii,{writable:!0,value:void 0}),Ke(yt(e),ni,{writable:!0,value:void 0}),Ke(yt(e),ri,{writable:!0,value:void 0}),Ke(yt(e),ai,{writable:!0,value:void 0}),Ke(yt(e),si,{writable:!0,value:void 0}),Ke(yt(e),oi,{writable:!0,value:void 0}),Ke(yt(e),li,{writable:!0,value:void 0}),Ke(yt(e),hi,{writable:!0,value:void 0}),e}return n(o,[{key:"init",value:function(t,e,i,n,r,a,s,o,l){kt(this,qe,t),kt(this,$e,e),kt(this,Qe,i),kt(this,ti,n),kt(this,ei,r),kt(this,ii,a),kt(this,ni,s),kt(this,ai,l),kt(this,ri,o)}},{key:"setPendingCallBack",value:function(t){kt(this,hi,t)}},{key:"mousedown",value:function(t){kt(this,si,t),kt(this,oi,t),m.isNotUndefined(Ct(this,ni))?(Je(this,ci,Fi).call(this,t),this.callbackRefresh(!0)):Je(this,di,Xi).call(this,t)}},{key:"mousemove",value:function(t){Je(this,Wi,gn).call(this,t)&&(m.isNotUndefined(Ct(this,ni))?(Je(this,ui,Yi).call(this,t),this.callbackRefresh()):Je(this,pi,zi).call(this,t),kt(this,oi,t))}},{key:"mouseup",value:function(t){Ct(this,si)&&(m.isUndefined(t)&&(t=Ct(this,oi)),m.isNotUndefined(Ct(this,ni))?Je(this,fi,ji).call(this,t):Je(this,gi,Ui).call(this,t),kt(this,si,void 0),this.callbackRefresh())}},{key:"mousecursor",value:function(t){var e=this.getCanvasOffset(t),i="text",n="move",r=A.isEdit(),s=Je(this,Li,an).call(this,e.offsetX,e.offsetY,!r);if(s.type==a.CLICK_TYPE_ELEMENT)G.isImageBlock(s.element)&&(i=n);else if(s.type==a.CLICK_TYPE_COMP_BUTTON)i="pointer";else if(s.type==a.CLICK_TYPE_TABLE_BORDER)i=s.border==a.TABLE_BORDER_BOT||s.border==a.TABLE_BORDER_TOP?"row-resize":"col-resize";else if(s.type==a.CLICK_TYPE_IMAGE_BLOCK)if(Ct(this,ii)){var o=Je(this,Ii,ln).call(this,e,s.element);i=m.isNotUndefined(o)?o.c:n}else i=n;else if(s.type==a.CLICK_TYPE_OBJECT)if(Ct(this,ii)&&G.isLineObject(s.element)){var l=Je(this,Pi,hn).call(this,e,s.element);i=m.isNotUndefined(l)?l.c:n}else if(Ct(this,ii)&&G.isRectObject(s.element)){var h=Je(this,Ai,cn).call(this,e,s.element);i=m.isNotUndefined(h)?h.c:n}else i=n;this.callbackCursorStyle(i)}},{key:"mousemenu",value:function(t){var e=this.getCanvasOffset(t),i=Je(this,Mi,un).call(this,t);if(Ct(this,ai)!=i){var n={type:"1",pageX:t.pageX,pageY:t.pageY,seg:i};this.callbackContextMenu(n)}else{var r=Je(this,Li,an).call(this,e.offsetX,e.offsetY,!0),a=Je(this,Li,an).call(this,e.offsetX,e.offsetY,!1),s=this.getCurrentPartModel(Ct(this,$e),Ct(this,ai)),o=s.findTableMergeInfo(Ct(this,Qe)),l=s.isTableElement(Ct(this,ei),Ct(this,Qe)),h=Je(this,Ni,dn).call(this,r.element),c=A.isEdit(),u=A.isNote(),f={type:"0",pageX:t.pageX,pageY:t.pageY,copy:Ct(this,Qe).length>0,paragraph:c,symbols:c,table:c&&l,tableMerge:o.rect,tableSplit:0==Ct(this,Qe).length,tableDeleteRow:o.arow,tableDeleteCol:o.acol,tableDeleteCell:!o.cell&&l,tableDelete:o.table,tableBorder:o.border,compClass:c&&h.compClass,compID:h.compID,comments:Ct(this,Qe).length>0&&u,image:c&&a.element&&a.element.property.classify==G.CLS_IMAGE,gahcode:c&&a.element&&a.element.property.classify==G.CLS_GAHCODE,expExtent:c&&a.element&&a.element.extend};this.callbackContextMenu(f)}}},{key:"mousedblclick",value:function(t){if(A.isEdit()){var e=Je(this,Mi,un).call(this,t),i=this.getCanvasOffset(t);if(e!=Ct(this,ai))kt(this,ai,e),this.callbackChangePart(Ct(this,ai)),kt(this,li,Je(this,Li,an).call(this,i.offsetX,i.offsetY,!1)),Je(this,wi,qi).call(this),this.callbackChange(),this.callbackRefresh();else{var n=this.getCurrentPartData(Ct(this,qe),Ct(this,ai));if(G.isTextbox(Ct(this,ei))){var r=G.getElementComps(n,Ct(this,ei));this.arrangeElements(n,Ct(this,Qe),r.slice(1,r.length-1)),this.callbackRefresh(!0)}}}}},{key:"selectall",value:function(){var t=this.getCurrentPartData(Ct(this,qe),Ct(this,ai)),e=Je(this,Li,an).call(this,9999999999999,9999999999999,!0),i=this.getCurrentPartModel(Ct(this,$e),Ct(this,ai)).selectElement(t[0],e.element);this.arrangeElements(t,Ct(this,Qe),i),this.callbackRefresh(!0)}}]),o}(Yt);function Fi(t){var e=this.getCanvasOffset(t);z.debug("mousedown1 [".concat(e.offsetX,",").concat(e.offsetY,"]")),Ct(this,ni)._drag_offset.y1=e.offsetY,Ct(this,ni)._drag_offset.x1=e.offsetX,Ct(this,ni).offset.y1=e.offsetY,Ct(this,ni).offset.x1=e.offsetX,this.callbackCursorStyle("crosshair")}function Yi(t){var e=this.getCanvasOffset(t);z.debug("mousemove1 [".concat(e.offsetX,",").concat(e.offsetY,"]")),Ct(this,ni)._drag_offset.y2=e.offsetY,Ct(this,ni)._drag_offset.x2=e.offsetX,this.callbackCursorStyle("crosshair")}function ji(t){var e=this.getCanvasOffset(t);z.debug("mouseup1 [".concat(e.offsetX,",").concat(e.offsetY,"]")),Ct(this,ni)._drag_offset.y2=e.offsetY,Ct(this,ni)._drag_offset.x2=e.offsetX,Ct(this,ni).offset.y2=e.offsetY,Ct(this,ni).offset.x2=e.offsetX,this.callbackCursorStyle("crosshair"),Ct(this,hi).call(this)}function Xi(t){var e=this.getCanvasOffset(t);z.debug("mousedown [".concat(e.offsetX,",").concat(e.offsetY,"]"));var i=A.isEdit();kt(this,li,Je(this,Li,an).call(this,e.offsetX,e.offsetY,!i)),Ct(this,li).type==a.CLICK_TYPE_ELEMENT?(Je(this,wi,qi).call(this),this.callbackRefresh(!0)):Ct(this,li).type==a.CLICK_TYPE_COMP_BUTTON?(Je(this,wi,qi).call(this),Je(this,Oi,rn).call(this),this.callbackChange()):Ct(this,li).type==a.CLICK_TYPE_COMP_POP?(Je(this,wi,qi).call(this),this.callbackRefresh(!1)):Ct(this,li).type==a.CLICK_TYPE_TABLE_BORDER?(Je(this,bi,$i).call(this),this.callbackRefresh(!1)):Ct(this,li).type==a.CLICK_TYPE_IMAGE_BLOCK?(Je(this,Ti,Qi).call(this,e),this.callbackRefresh(!0)):Ct(this,li).type==a.CLICK_TYPE_OBJECT?(Je(this,Ci,tn).call(this,e),this.callbackRefresh(!0)):(Je(this,wi,qi).call(this),this.callbackRefresh(!0))}function zi(t){var e=this.getCanvasOffset(t);if(z.debug("mousemove [".concat(e.offsetX,",").concat(e.offsetY,"]")),Ct(this,li).type==a.CLICK_TYPE_ELEMENT||Ct(this,li).type==a.CLICK_TYPE_COMP_POP){var i,n=this.getCurrentPartModel(Ct(this,$e),Ct(this,ai)),r=this.getCurrentPartData(Ct(this,qe),Ct(this,ai)),s=Je(this,Li,an).call(this,e.offsetX,e.offsetY,!0);i=s.element._count>Ct(this,li).element._count?n.selectElement(Ct(this,li).element,s.element):n.selectElement(s.element,Ct(this,li).element),this.arrangeElements(r,Ct(this,Qe),i),this.callbackRefresh(!0)}else Ct(this,li).type==a.CLICK_TYPE_TABLE_BORDER?(Ct(this,li).border==a.TABLE_BORDER_LEFT||Ct(this,li).border==a.TABLE_BORDER_RIGHT?Ct(this,ri).setType(a.DRAG_VIEW_LINE_V,e):Ct(this,ri).setType(a.DRAG_VIEW_LINE_H,e),this.callbackRefresh(!1)):Ct(this,li).type==a.CLICK_TYPE_IMAGE_BLOCK?(Je(this,ki,en).call(this,t),this.callbackRefresh(!0)):Ct(this,li).type==a.CLICK_TYPE_OBJECT&&(Je(this,Si,nn).call(this,t),this.callbackRefresh(!0))}function Ui(t){var e=this.getCanvasOffset(t);if(z.debug("mouseup [".concat(e.offsetX,",").concat(e.offsetY,"]")),Ct(this,li))if(Ct(this,li).type==a.CLICK_TYPE_ELEMENT);else if(Ct(this,li).type==a.CLICK_TYPE_COMP_POP){if(Je(this,Li,an).call(this,e.offsetX,e.offsetY,!1).element==Ct(this,li).element){var i=G.getResourceCompInfo(Ct(this,qe),Ct(this,li).element.modular.dataID);Je(this,Bi,pn).call(this,Ct(this,li).element)&&this.callbackPopMenu(i)}}else Ct(this,li).type==a.CLICK_TYPE_TABLE_BORDER?(Je(this,vi,Gi).call(this,t),this.callbackSaveMirror(Yt.CHANGE_TABLE_SIZE),this.callbackChange(),Ct(this,ri).setType(a.DRAG_VIEW_NONE)):Ct(this,li).type==a.CLICK_TYPE_IMAGE_BLOCK?(Je(this,Ei,Zi).call(this,t),this.callbackSaveMirror(Yt.CHANGE_BLOCK_SIZE),this.callbackChange(),Ct(this,ri).setType(a.DRAG_VIEW_NONE)):Ct(this,li).type==a.CLICK_TYPE_OBJECT&&(Je(this,mi,Ji).call(this,t),this.callbackSaveMirror(Yt.CHANGE_OBJECT_SIZE),this.callbackChange(),Ct(this,ri).setType(a.DRAG_VIEW_NONE))}function Gi(t){var e=this.getCanvasOffset(Ct(this,si)),i=this.getCanvasOffset(t),n=Ct(this,li).cell,r=Ct(this,li).border,s=Ct(this,li).all;r==a.TABLE_BORDER_TOP?Je(this,_i,Vi).call(this,n.property.row-n.property.rowspan,s,i.offsetY-e.offsetY):r==a.TABLE_BORDER_BOT?Je(this,_i,Vi).call(this,n.property.row,s,i.offsetY-e.offsetY):r==a.TABLE_BORDER_LEFT?Je(this,yi,Ki).call(this,n.property.col-n.property.colspan,s,i.offsetX-e.offsetX):r==a.TABLE_BORDER_RIGHT&&Je(this,yi,Ki).call(this,n.property.col,s,i.offsetX-e.offsetX)}function Vi(t,e,i){t>=0&&e.forEach((function(e){e.property.row==t&&(e.property.preHeight=Math.max(e.property.preHeight+i,a.TABLE_FIELD_MIN_HEIGHT))}))}function Ki(t,e,i){var n=0,r=0,s=0,o=[];e.forEach((function(t){0==t.property.row&&(n=Math.max(n,t.property.col),r=t.property.indentRight,s=t.property.indentLeft,o.push(t.property.preWidth))}));var l=void 0;t<0?(l=i>=0?Math.min(i,o[0]-a.TABLE_FIELD_MIN_WIDTH):i,s+=l,o[0]-=l):t<n?(l=i>=0?Math.min(i,o[t+1]-a.TABLE_FIELD_MIN_WIDTH):-1*Math.min(Math.abs(i),o[t]-a.TABLE_FIELD_MIN_WIDTH),o[t]+=l,o[t+1]-=l):(l=i>=0?i:-1*Math.min(Math.abs(i),o[t]-a.TABLE_FIELD_MIN_WIDTH),o[t]+=l,r-=l),e.forEach((function(t){t.property.preWidth=o[t.property.col],t.property.indentRight=r,t.property.indentLeft=s}))}function Zi(){if(Ct(this,ii)&&G.isImageBlock(Ct(this,ii))){var t=Ct(this,ii)._drag_size,e=Ct(this,ii).extend;e.width=Math.abs(t.width),e.height=Math.abs(t.height)}}function Ji(){(Ct(this,ii)&&G.isLineObject(Ct(this,ii))||Ct(this,ii)&&G.isRectObject(Ct(this,ii)))&&(Ct(this,ii).offset.x1=Ct(this,ii)._drag_offset.x1,Ct(this,ii).offset.y1=Ct(this,ii)._drag_offset.y1,Ct(this,ii).offset.x2=Ct(this,ii)._drag_offset.x2,Ct(this,ii).offset.y2=Ct(this,ii)._drag_offset.y2)}function qi(){var t=this;this.clearSelects(Ct(this,Qe));var e=this.getCurrentPartData(Ct(this,qe),Ct(this,ai));if(Ct(this,li).next){var i=e.findIndex((function(e){return e===Ct(t,li).element}));this.callbackSetCursor(Ct(this,li).element,e[i+1])}else this.callbackSetCursor(Ct(this,li).element,Ct(this,li).element)}function $i(){}function Qi(t){if(Ct(this,ii)===Ct(this,li).element){var e=Je(this,Ii,ln).call(this,t,Ct(this,li).element);m.isNotUndefined(e)?Ct(this,li).point=e.i:Ct(this,li).point=-1}else Ct(this,li).point=-1,this.clearSelects(Ct(this,Qe)),this.callbackSetCursor(Ct(this,li).element,Ct(this,li).element,Ct(this,li).element)}function tn(t){if(Ct(this,ii)===Ct(this,li).element){if(G.isLineObject(Ct(this,ii))){var e=Je(this,Pi,hn).call(this,t,Ct(this,li).element);m.isNotUndefined(e)?Ct(this,li).point=e.i:Ct(this,li).point=-1}else if(G.isRectObject(Ct(this,ii))){var i=Je(this,Ai,cn).call(this,t,Ct(this,li).element);m.isNotUndefined(i)?Ct(this,li).point=i.i:Ct(this,li).point=-1}}else Ct(this,li).point=-1,this.clearSelects(Ct(this,Qe)),this.callbackSetCursor(Ct(this,ti),Ct(this,ei),Ct(this,li).element)}function en(t){var e=this.getCanvasOffset(Ct(this,oi)),i=this.getCanvasOffset(t),n=i.offsetX-e.offsetX,r=i.offsetY-e.offsetY,s=Ct(this,ii)._drag_size,o=Ct(this,ii)._drag_offset;0==Ct(this,li).point?(s.height=s.height-r,s.width=s.width-n,o.offsetX+=n,o.offsetY+=r):1==Ct(this,li).point?(o.offsetY+=r,s.height=s.height-r):2==Ct(this,li).point?(o.offsetY+=r,s.height=s.height-r,s.width=s.width+n):3==Ct(this,li).point?(o.offsetX+=n,s.width=s.width-n):4==Ct(this,li).point?s.width=s.width+n:5==Ct(this,li).point?(o.offsetX+=n,s.height=s.height+r,s.width=s.width-n):6==Ct(this,li).point?s.height=s.height+r:7==Ct(this,li).point&&(s.height=s.height+r,s.width=s.width+n),Ct(this,ri).setType(a.DRAG_VIEW_IMAGE,Ct(this,ii))}function nn(t){var e=this.getCanvasOffset(t);if(G.isLineObject(Ct(this,ii))){var i=Ct(this,ii)._drag_offset;if(0==Ct(this,li).point)i.x1=e.offsetX,i.y1=e.offsetY;else if(1==Ct(this,li).point)i.x2=e.offsetX,i.y2=e.offsetY;else{var n=this.getCanvasOffset(Ct(this,oi));i.x1+=e.offsetX-n.offsetX,i.y1+=e.offsetY-n.offsetY,i.x2+=e.offsetX-n.offsetX,i.y2+=e.offsetY-n.offsetY}}else if(G.isRectObject(Ct(this,ii))){var r=Ct(this,ii)._drag_offset;if(0==Ct(this,li).point)r.x1=e.offsetX,r.y1=e.offsetY;else if(1==Ct(this,li).point)r.y1=e.offsetY;else if(2==Ct(this,li).point)r.x2=e.offsetX,r.y1=e.offsetY;else if(3==Ct(this,li).point)r.x1=e.offsetX;else if(4==Ct(this,li).point)r.x2=e.offsetX;else if(5==Ct(this,li).point)r.x1=e.offsetX,r.y2=e.offsetY;else if(6==Ct(this,li).point)r.y2=e.offsetY;else if(7==Ct(this,li).point)r.x2=e.offsetX,r.y2=e.offsetY;else{var s=this.getCanvasOffset(Ct(this,oi));r.x1+=e.offsetX-s.offsetX,r.y1+=e.offsetY-s.offsetY,r.x2+=e.offsetX-s.offsetX,r.y2+=e.offsetY-s.offsetY}}Ct(this,ri).setType(a.DRAG_VIEW_OBJECT,Ct(this,ii))}function rn(){var t=Ct(this,li).element;if(Je(this,Di,fn).call(this)&&t)if(t.property.classify==G.CLS_CHECKBOX_BOTTON){var e=G.getResourceCompInfo(Ct(this,qe),t.modular.dataID),i=Math.abs(t.property.code-1);t.property.code=i,e.property.value=i}else t.property.classify==G.CLS_RADIOBOX_BOTTON&&(G.getResourceCompInfo(Ct(this,qe),t.modular.dataID).property.value=t.property.code)}function an(t,e,i){var n=this.getCurrentPartOffset(Ct(this,$e),Ct(this,ai),t,e),r=this.getCurrentPartModel(Ct(this,$e),Ct(this,ai));if(i)return r.localeElement(n.offsetX,n.offsetY);if(Ct(this,ii)){var s=Je(this,xi,on).call(this,t,e);if(m.isNotUndefined(s))return s}var o=Je(this,Ri,sn).call(this,Ct(this,qe).resources.objects.above,t,e);if(m.isNotUndefined(o))return{element:o,type:a.CLICK_TYPE_OBJECT};var l=r.positionElement(n.offsetX,n.offsetY);return m.isNotUndefined(l)?l:r.localeElement(n.offsetX,n.offsetY)}function sn(t,e,i){return t.find((function(t){if(G.isLineObject(t)){var n=t.offset;return v.pointToLineDistance(e,i,n.x1,n.y1,n.x2,n.y2)<=a.LEN_GAP_DRAG}if(G.isRectObject(t)){if(t.property.classify==G.OBJECT_SHAPE_RECT){var r=t.offset;return v.pointToRectDistance(e,i,r.x1,r.y1,r.x2,r.y2)<=a.LEN_GAP_DRAG}if(t.property.classify==G.OBJECT_SHAPE_ELLIPSE){var s=t.offset;return v.pointToEllipseDistance(e,i,s.x1,s.y1,s.x2,s.y2)<=a.LEN_GAP_DRAG}if(t.property.classify==G.OBJECT_SHAPE_TRIANGLE){var o=t.offset;return v.pointToTriangleDistance(e,i,o.x1,o.y1,o.x2,o.y2)<=a.LEN_GAP_DRAG}return!1}return!1}))}function on(t,e){if(G.isImageBlock(Ct(this,ii))){var i=Je(this,Ii,ln).call(this,{offsetX:t,offsetY:e},Ct(this,ii));if(m.isNotUndefined(i))return{element:Ct(this,ii),type:a.CLICK_TYPE_IMAGE_BLOCK}}else if(G.isLineObject(Ct(this,ii))){var n=Je(this,Pi,hn).call(this,{offsetX:t,offsetY:e},Ct(this,ii));if(m.isNotUndefined(n))return{element:Ct(this,ii),type:a.CLICK_TYPE_OBJECT}}else if(G.isRectObject(Ct(this,ii))){var r=Je(this,Ai,cn).call(this,{offsetX:t,offsetY:e},Ct(this,ii));if(m.isNotUndefined(r))return{element:Ct(this,ii),type:a.CLICK_TYPE_OBJECT}}}function ln(t,e){return v.getBlockDragRect(e._offset,e._size,a.LEN_BLOCK_DRAG).find((function(e){return v.pointInRect({x:t.offsetX,y:t.offsetY},e)}))}function hn(t,e){if(G.isLineObject(e))return v.getLineObjectDrag(e.offset.x1,e.offset.y1,e.offset.x2,e.offset.y2,a.LEN_BLOCK_DRAG).find((function(e){return v.pointInRect({x:t.offsetX,y:t.offsetY},e)}))}function cn(t,e){if(G.isRectObject(e))return v.getRectObjectDrag(e.offset.x1,e.offset.y1,e.offset.x2,e.offset.y2,a.LEN_BLOCK_DRAG).find((function(e){return v.pointInRect({x:t.offsetX,y:t.offsetY},e)}))}function un(t){var e=this.getCanvasOffset(t),i=Ct(this,$e).getPageSize(),n=e.offsetY%i.pxHeight;return n<i.pxHeaderHeight?a.CONTENT_PART_HEADER:n>i.pxHeight-i.pxFooterHeight?a.CONTENT_PART_FOOTER:a.CONTENT_PART_BODY}function fn(){var t=[a.CONF_MODAL_DEF,a.CONF_MODAL_EDT],e=A.getConfig();return!!t.includes(e.modal)}function dn(t){var e=[a.CONF_MODAL_DEF,a.CONF_MODAL_DES],i=A.getConfig();return e.includes(i.modal)?G.getElementCompCls(t):{}}function pn(t){var e=[a.CONF_MODAL_DEF,a.CONF_MODAL_EDT],i=A.getConfig();return!!e.includes(i.modal)&&G.getElementEditable(Ct(this,qe),t)}function gn(t){return Ct(this,si)&&t.timeStamp-Ct(this,oi).timeStamp>20}function vn(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}var _n=new WeakMap,yn=new WeakMap,En=new WeakMap,mn=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e;t(this,s);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return vn(yt(e=a.call.apply(a,[this].concat(n))),_n,{writable:!0,value:void 0}),vn(yt(e),yn,{writable:!0,value:void 0}),vn(yt(e),En,{writable:!0,value:void 0}),e}return n(s,[{key:"init",value:function(t,e,i){kt(this,_n,t),kt(this,yn,e),kt(this,En,i)}},{key:"changeEditPart",value:function(t){if(A.isEdit()&&t!=Ct(this,En)){var e=this.getCurrentPartData(Ct(this,_n),t);this.callbackChangePart(t),this.callbackSetCursor(e[0],e[0]),this.clearSelects(Ct(this,yn)),this.callbackChange(),this.callbackRefresh()}}},{key:"changePaperInfo",value:function(t){A.isDesign()&&(Object.assign(Ct(this,_n).paper,t),this.callbackChange(),this.callbackRefresh())}},{key:"changePageNum",value:function(t){A.isDesign()&&(Ct(this,_n).page.number=t.number,Ct(this,_n).page.format=t.format,Ct(this,_n).page.align=t.align,Ct(this,_n).page.size=t.size,Ct(this,_n).page.family=t.family,this.callbackChange(),this.callbackRefresh())}},{key:"changeCommentsView",value:function(t){A.isEdit()&&(A.setCommentsModal(t),this.callbackChange(),this.callbackRefresh())}}]),s}(Yt);function wn(t,e){Tn(t,e),e.add(t)}function bn(t,e,i){Tn(t,e),e.set(t,i)}function Tn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Cn(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var kn=new WeakMap,Sn=new WeakMap,On=new WeakMap,Ln=new WeakMap,Rn=new WeakSet,xn=new WeakSet,In=new WeakSet,Pn=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e;t(this,s);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return wn(yt(e=a.call.apply(a,[this].concat(n))),In),wn(yt(e),xn),wn(yt(e),Rn),bn(yt(e),kn,{writable:!0,value:void 0}),bn(yt(e),Sn,{writable:!0,value:void 0}),bn(yt(e),On,{writable:!0,value:void 0}),bn(yt(e),Ln,{writable:!0,value:void 0}),e}return n(s,[{key:"init",value:function(t,e,i,n){kt(this,kn,t),kt(this,On,e),kt(this,Sn,i),kt(this,Ln,n)}},{key:"changeTextStyle",value:function(t){A.isEdit()&&Cn(this,Rn,An).call(this,t,Yt.CHANGE_TEXT_STYLE)}},{key:"changeParagStyle",value:function(t){var e=this;A.isEdit()&&(Object.keys(t).forEach((function(e){m.isUndefined(t[e])&&delete t[e]})),Ct(this,On).length>0?(Ct(this,On).length>2&&Ct(this,On).forEach((function(i){i.property.type==G.TYPE_STRUCT&&Cn(e,xn,Mn).call(e,i,t)})),Cn(this,xn,Mn).call(this,Ct(this,On)[0],t),Cn(this,xn,Mn).call(this,Ct(this,On).at(-1),t)):Cn(this,xn,Mn).call(this,Ct(this,Sn),t),this.callbackRefreshByChange(Yt.CHANGE_PARAG_STYLE))}},{key:"changeFontColor",value:function(t){if(A.isEdit()){Cn(this,Rn,An).call(this,{color:t},Yt.CHANGE_FONT_COLOR);var e=Ct(this,kn).config.usedColors;e.unshift(t),e.length>20&&e.splice(20,e.length-20)}}},{key:"getParagStyle",value:function(){if(Ct(this,On).length>0){for(var t=[],e=0;e<Ct(this,On).length;e++){var i=Ct(this,On)[e];i.property.type==G.TYPE_STRUCT&&t.push(i.paragStyle)}Ct(this,On).at(-1).type!=G.TYPE_STRUCT&&t.push(Cn(this,In,Dn).call(this,Ct(this,On).at(-1)));var n=Object.assign({},t.at(0));return t.forEach((function(t){["align","indentLeft","indentRight","indentSpecialType","indentSpecialvalue","rowspac","segmentSpacPre","segmentSpacAft"].forEach((function(e){t[e]!=n[e]&&delete n[e]}))})),n}return Cn(this,In,Dn).call(this,Ct(this,Sn))}},{key:"getUsedColors",value:function(){return Ct(this,kn)?Ct(this,kn).config.usedColors:[]}}]),s}(Yt);function An(t,e){Ct(this,On).length>0&&(Ct(this,On).forEach((function(e){Object.assign(e.textStyle,t)})),this.callbackRefreshByChange(e))}function Mn(t,e){for(var i=this.getCurrentPartData(Ct(this,kn),Ct(this,Ln)),n=G.findElementIndex(i,t);n<i.length;n++){var r=i[n];if(r.property.type==G.TYPE_STRUCT){Object.assign(r.paragStyle,e);break}}}function Dn(t){for(var e=this.getCurrentPartData(Ct(this,kn),Ct(this,Ln)),i=t._count;i<e.length;i++){var n=e[i];if(n.property.type==G.TYPE_STRUCT)return n.paragStyle}}function Nn(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}var Bn=new WeakMap,Wn=new WeakMap,Hn=new WeakMap,Fn=new WeakMap,Yn=new WeakMap,jn=new WeakMap,Xn=function(e){mt(o,e);var i,r,s=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function o(){var e;t(this,o);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return Nn(yt(e=s.call.apply(s,[this].concat(n))),Bn,{writable:!0,value:void 0}),Nn(yt(e),Wn,{writable:!0,value:void 0}),Nn(yt(e),Hn,{writable:!0,value:void 0}),Nn(yt(e),Fn,{writable:!0,value:void 0}),Nn(yt(e),Yn,{writable:!0,value:void 0}),Nn(yt(e),jn,{writable:!0,value:void 0}),e}return n(o,[{key:"init",value:function(t,e,i,n,r,a){kt(this,Bn,t),kt(this,Wn,e),kt(this,Fn,n),kt(this,Hn,i),kt(this,Yn,r),kt(this,jn,a)}},{key:"tableMerge",value:function(){if(A.isEdit()){var t=this.getCurrentPartData(Ct(this,Bn),Ct(this,jn)),e=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableMergeInfo(Ct(this,Hn));e.rect&&(G.tableMerge(t,e),this.callbackSetCursor(Ct(this,Hn).at(-1),Ct(this,Hn).at(-1)),this.clearSelects(Ct(this,Hn)),this.callbackRefreshByChange(Yt.TABLE_MERGE))}}},{key:"tableDeleteRow",value:function(){if(A.isEdit()){var t=this.getCurrentPartData(Ct(this,Bn),Ct(this,jn)),e=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableMergeInfo(Ct(this,Hn));if(e.rect&&e.arow){var i=G.findNextElement(t,Ct(this,Hn).at(-1));G.tableDeleteRow(t,e.fields,e.minrow,e.maxrow),this.clearSelects(Ct(this,Hn)),this.callbackSetCursor(i,i),this.callbackRefreshByChange(Yt.TABLE_DELETE_ROW)}}}},{key:"tableDeleteCol",value:function(){if(A.isEdit()){var t=this.getCurrentPartData(Ct(this,Bn),Ct(this,jn)),e=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableMergeInfo(Ct(this,Hn));if(e.rect&&e.acol){var i=G.findNextElement(t,Ct(this,Hn).at(-1));G.tableDeleteCol(t,e.fields,e.mincol,e.maxcol),this.clearSelects(Ct(this,Hn)),this.callbackSetCursor(i,i),this.callbackRefreshByChange(Yt.TABLE_DELETE_COL)}}}},{key:"tableDeleteCell",value:function(t){if(A.isEdit()){var e=this.getCurrentPartData(Ct(this,Bn),Ct(this,jn)),i=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableFieldInfo(Ct(this,Yn),Ct(this,Hn));if("col"==t){var n=G.tableDeleteCell(e,i.fields,i.mincol,i.maxcol,t);this.callbackSetCursor(n,n)}else{var r=G.tableDeleteCell(e,i.fields,i.minrow,i.maxrow,t);this.callbackSetCursor(r,r)}this.clearSelects(Ct(this,Hn)),this.callbackRefreshByChange(Yt.TABLE_DELETE_CELL)}}},{key:"tableDelete",value:function(){if(A.isEdit()){var t=this.getCurrentPartData(Ct(this,Bn),Ct(this,jn)),e=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableMergeInfo(Ct(this,Hn));if(e.rect&&e.table){var i=G.findNextElement(t,Ct(this,Hn).at(-1));G.tableDelete(t,Ct(this,Hn),e),this.clearSelects(Ct(this,Hn)),this.callbackSetCursor(i,i),this.callbackRefreshByChange(Yt.TABLE_DELETE)}}}},{key:"tableInsertCell",value:function(t){if(A.isEdit()){var e=this.getCurrentPartData(Ct(this,Bn),Ct(this,jn)),i=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableFieldInfo(Ct(this,Yn),Ct(this,Hn));i&&(t==a.TABLE_INSERT_ABOVE?G.tableInsertRowAbove(e,i.minrow,i.fields):t==a.TABLE_INSERT_BELOW?G.tableInsertRowBelow(e,i.maxrow,i.fields):t==a.TABLE_INSERT_LEFT?G.tableInsertColLeft(e,i.mincol,i.fields):t==a.TABLE_INSERT_RIGHT&&G.tableInsertColRight(e,i.maxcol,i.fields),this.clearSelects(Ct(this,Hn)),this.callbackRefreshByChange(Yt.TABLE_INSERT_CELL))}}},{key:"tableSplit",value:function(t){if(A.isEdit()){z.debug("tableSplit [".concat(t.rows,",").concat(t.cols,"]"));var e=this.getCurrentPartData(Ct(this,Bn),Ct(this,jn)),i=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableFieldInfo(Ct(this,Yn),Ct(this,Hn)),n=i.field.at(-1).property.rowspan,r=i.field.at(-1).property.colspan,a=i.field.at(-1).property.col,s=(i.field.at(-1).property.row,i.field.at(-1).property.preWidth);if(!(t.rows>1&&n>1&&t.rows!=n||t.cols>1&&r>1&&t.cols!=r)){var o=[];if(t.rows>1?o=n>1?G.tableSplitRowspan(i.field,i.fields):G.tableSplitRow(e,i.field,i.fields,t.rows):o.push(i.field),t.cols>1)if(r>1)G.tableSplitColspan(o,i.fields);else{for(var l=[],h=parseInt(s/t.cols),c=0;c<t.cols;c++)c==t.cols-1?l.push(s):l.push(h),s-=h;G.tableSplitCol(e,o,i.fields,t.cols,l,a)}this.clearSelects(Ct(this,Hn)),this.callbackRefreshByChange(Yt.TABLE_SPLIT)}}}},{key:"tableBorderVisible",value:function(t){A.isEdit()&&(this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableFieldInfo(Ct(this,Yn),Ct(this,Hn)).fields.forEach((function(e){e.at(-1).property.borderHide=t})),this.callbackRefreshByChange(Yt.TABLE_BORDER_CHANGE))}},{key:"tableBorderChange",value:function(t){if(A.isEdit()){var e=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableFieldInfo(Ct(this,Yn),Ct(this,Hn));"0"==t.range?e.fields.forEach((function(i){var n=i.at(-1).property;n.row>=e.minrow&&n.row<=e.maxrow&&n.col>=e.mincol&&n.col<=e.maxcol&&n.border.forEach((function(e,i){return Object.assign(e,t.border[i])}))})):e.fields.forEach((function(e){e.at(-1).property.border.forEach((function(e,i){return Object.assign(e,t.border[i])}))})),this.callbackRefreshByChange(Yt.TABLE_BORDER_CHANGE)}}},{key:"tableCellInfo",value:function(){var t=this.getCurrentPartModel(Ct(this,Wn),Ct(this,jn)).findTableFieldInfo(Ct(this,Yn),Ct(this,Hn));if(t.maxrow-t.minrow==0&&t.maxcol-t.mincol==0){var e=t.fields.find((function(e){var i=e.at(-1).property;return i.row==t.maxrow&&i.col==t.maxcol}));if(e&&e.at(-1))return{border:e.at(-1).property.border.map((function(t){return Object.assign({},t)}))}}return{border:[{visible:!0},{visible:!0},{visible:!0},{visible:!0}]}}}]),o}(Yt);function zn(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}var Un=new WeakMap,Gn=new WeakMap,Vn=new WeakMap,Kn=function(){function e(){t(this,e),zn(this,Un,{writable:!0,value:void 0}),zn(this,Gn,{writable:!0,value:void 0}),zn(this,Vn,{writable:!0,value:void 0})}return n(e,[{key:"setState",value:function(t){kt(this,Un,t)}},{key:"setType",value:function(t,e){kt(this,Gn,t),kt(this,Vn,e)}},{key:"getType",value:function(){return Ct(this,Gn)}},{key:"getObject",value:function(){return Ct(this,Vn)}},{key:"isActive",value:function(){return Ct(this,Un)}}]),e}();function Zn(){return Zn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bt(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}},Zn.apply(this,arguments)}function Jn(t,e,i){qn(t,e),e.set(t,i)}function qn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $n(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var Qn=new WeakMap,tr=new WeakMap,er=new WeakMap,ir=new WeakSet,nr=function(){function e(){var i;t(this,e),qn(this,i=ir),i.add(this),Jn(this,Qn,{writable:!0,value:void 0}),Jn(this,tr,{writable:!0,value:600}),Jn(this,er,{writable:!0,value:void 0})}return n(e,[{key:"setMillisec",value:function(t){kt(this,tr,t)}},{key:"setAction",value:function(t){kt(this,er,t)}},{key:"start",value:function(t){var e=this;clearInterval(Ct(this,Qn)),kt(this,Qn,window.setTimeout((function(){$n(e,ir,rr).call(e)}),t))}},{key:"pause",value:function(){window.clearInterval(Ct(this,Qn))}}]),e}();function rr(){var t=this;Ct(this,er).call(this),kt(this,Qn,window.setTimeout((function(){$n(t,ir,rr).call(t,0)}),Ct(this,tr)))}var ar=new WeakMap,sr=new WeakMap,or=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e;t(this,s);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return Jn(yt(e=a.call.apply(a,[this].concat(n))),ar,{writable:!0,value:void 0}),Jn(yt(e),sr,{writable:!0,value:void 0}),e}return n(s,[{key:"start",value:function(t){Zn(bt(s.prototype),"start",this).call(this,t),kt(this,ar,!0)}},{key:"switch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){kt(this,sr,t)}))},{key:"setRefresh",value:function(t){var e=this;this.setAction((function(){t(Ct(e,sr)&&Ct(e,ar)),kt(e,ar,!Ct(e,ar))}))}}]),s}(nr);function lr(t,e,i){return cr(t,e),function(t,e){if(void 0===t)throw new TypeError("attempted to get private static field before its declaration")}(i),function(t,e){return e.get?e.get.call(t):e.value}(t,i)}function hr(t,e,i){return cr(t,e),i}function cr(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}var ur=function(){function e(){t(this,e)}return n(e,null,[{key:"preview",value:function(t){var i=this,n=hr(this,e,fr).call(this);"Firefox"==g.detectBrowser()?n.onload=function(){hr(i,e,dr).call(i,n,t.paper,t.view,t.page)}:hr(this,e,dr).call(this,n,t.paper,t.view,t.page)}}]),e}();function fr(){var t=document.createElement("iframe");return t.style.display="none",document.body.append(t),t.contentWindow.onafterprint=function(e){document.body.removeChild(t)},t}function dr(t,e,i,n){var r=t.contentWindow.document,s="".concat(e.direction==a.PAPER_ROTATION_LANDSCAPE?"landscape":"portrait"),o=r.createElement("style");o.innerHTML="@media print{@page{size:".concat(s," !important;;margin:0;padding:0}body{margin:0;padding:0;font-family:Arial,sans-serif}header,footer,.no-print,.print-header,.print-footer{display:none !important}@page{margin-top:0;margin-bottom:0}body:before,body:after{display:none !important}@page{-moz-print-header:none;-moz-print-footer:none}table{page-break-inside:avoid}.page-break{page-break-after:always}}"),r.head.appendChild(o);var l=0;i.forEach((function(t){l=Math.max(t.pageNum+1,l)}));for(var h=[],c=0;c<l;c++){var u=r.createElementNS(lr(this,ur,Tr),"svg");e.direction==a.PAPER_ROTATION_LANDSCAPE?(u.setAttribute("width","".concat(e.height/10,"mm")),u.setAttribute("height","".concat(e.width/10,"mm")),hr(this,ur,pr).call(this,r,u,n,e.height,e.width)):(u.setAttribute("width","".concat(e.width/10,"mm")),u.setAttribute("height","".concat(e.height/10,"mm")),hr(this,ur,pr).call(this,r,u,n,e.width,e.height)),r.body.append(u),h.push(u);var f=r.createElement("div");f.classList.add("page-break"),r.body.append(f)}hr(this,ur,gr).call(this,r,h,i,0,(function(){t.contentWindow.print()}))}function pr(t,e,i,n,r){if(i.watermark){var a=Object.assign({text:"",style:"0",transparency:30,fontfamily:"",fontsize:3e4},i.watermark),s=t.createElementNS(lr(this,ur,Tr),"text"),o=g.mmConversionPx(n/10),l=g.mmConversionPx(r/10);s.setAttribute("x","".concat(o/2)),s.setAttribute("y","".concat(l/2)),s.setAttribute("text-anchor","middle"),s.setAttribute("text-baseline","middle"),s.setAttribute("dominant-baseline","middle"),s.setAttribute("font-family",a.fontfamily),s.setAttribute("font-size",a.fontsize/10),s.setAttribute("fill","rgba(0,0,0,".concat(a.transparency/100,")")),"1"==a.style&&s.setAttribute("transform","rotate(-45 ".concat(o/2," ").concat(l/2,")")),s.textContent=a.text,e.appendChild(s)}}function gr(t,e,i,n,r){var a=this;n<i.length?"line"==i[n].cls?hr(this,ur,vr).call(this,t,i[n],e[i[n].pageNum],(function(){hr(a,ur,gr).call(a,t,e,i,n+1,r)})):"text"==i[n].cls?hr(this,ur,_r).call(this,t,i[n],e[i[n].pageNum],(function(){hr(a,ur,gr).call(a,t,e,i,n+1,r)})):"image"==i[n].cls?hr(this,ur,yr).call(this,t,i[n],e[i[n].pageNum],(function(){hr(a,ur,gr).call(a,t,e,i,n+1,r)})):"strokerect"==i[n].cls?hr(this,ur,Er).call(this,t,i[n],e[i[n].pageNum],(function(){hr(a,ur,gr).call(a,t,e,i,n+1,r)})):"strokeellipse"==i[n].cls?hr(this,ur,mr).call(this,t,i[n],e[i[n].pageNum],(function(){hr(a,ur,gr).call(a,t,e,i,n+1,r)})):"fillellipse"==i[n].cls?hr(this,ur,wr).call(this,t,i[n],e[i[n].pageNum],(function(){hr(a,ur,gr).call(a,t,e,i,n+1,r)})):"stroketriangle"==i[n].cls?hr(this,ur,br).call(this,t,i[n],e[i[n].pageNum],(function(){hr(a,ur,gr).call(a,t,e,i,n+1,r)})):hr(this,ur,gr).call(this,t,e,i,n+1,r):r()}function vr(t,e,i,n){var r=t.createElementNS(lr(this,ur,Tr),"line");r.setAttribute("x1","".concat(e.pageX1/10)),r.setAttribute("y1","".concat(e.pageY1/10)),r.setAttribute("x2","".concat(e.pageX2/10)),r.setAttribute("y2","".concat(e.pageY2/10)),r.setAttribute("stroke",e.color),r.setAttribute("stroke-width",e.weight/10),i.appendChild(r),n()}function _r(t,e,i,n){var r=t.createElementNS(lr(this,ur,Tr),"text");r.setAttribute("x","".concat(e.pageX/10)),r.setAttribute("y","".concat(e.pageY/10)),r.setAttribute("font-family",e.font),r.setAttribute("font-size",e.size/10),r.setAttribute("fill",e.color),e.bold?(r.setAttribute("font-weight","700"),"simsun"==e.font.toLowerCase()&&(r.setAttribute("stroke",e.color),r.setAttribute("stroke-width","0.4"))):r.setAttribute("font-weight","400"),e.italic&&r.setAttribute("font-style","italic"),r.textContent=e.code,i.appendChild(r),n()}function yr(t,e,i,n){var r=t.createElementNS(lr(this,ur,Tr),"image");r.setAttribute("x","".concat(e.pageX/10)),r.setAttribute("y","".concat(e.pageY/10)),r.setAttribute("width","".concat(e.width/10)),r.setAttribute("height","".concat(e.height/10)),r.setAttribute("preserveAspectRatio","none"),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.code),i.appendChild(r),n()}function Er(t,e,i,n){var r=t.createElementNS(lr(this,ur,Tr),"rect");r.setAttribute("x","".concat(e.pageX/10)),r.setAttribute("y","".concat(e.pageY/10)),r.setAttribute("width","".concat(e.width/10)),r.setAttribute("height","".concat(e.height/10)),r.setAttribute("stroke",e.style),r.setAttribute("fill-opacity",0),i.appendChild(r),n()}function mr(t,e,i,n){var r=t.createElementNS(lr(this,ur,Tr),"ellipse");r.setAttribute("cx","".concat(e.pageX/10)),r.setAttribute("cy","".concat(e.pageY/10)),r.setAttribute("rx","".concat(e.width/10)),r.setAttribute("ry","".concat(e.height/10)),r.setAttribute("stroke",e.style),r.setAttribute("fill-opacity",0),r.setAttribute("stroke-width",e.linewidth/10),i.appendChild(r),n()}function wr(t,e,i,n){var r=t.createElementNS(lr(this,ur,Tr),"ellipse");r.setAttribute("cx","".concat(e.pageX/10)),r.setAttribute("cy","".concat(e.pageY/10)),r.setAttribute("rx","".concat(e.width/10)),r.setAttribute("ry","".concat(e.height/10)),r.setAttribute("stroke",e.style),r.setAttribute("fill-opacity",1),r.setAttribute("stroke-width",e.linewidth/10),i.appendChild(r),n()}function br(t,e,i,n){var r=t.createElementNS(lr(this,ur,Tr),"polygon"),a=[e.pageX1/10,e.pageY1/10,e.pageX2/10,e.pageY2/10,e.pageX3/10,e.pageY3/10];r.setAttribute("points",a.join(",")),r.setAttribute("stroke",e.style),r.setAttribute("fill","none"),r.setAttribute("stroke-width",e.linewidth/10),i.appendChild(r),n()}var Tr={writable:!0,value:"http://www.w3.org/2000/svg"};function Cr(t){let e=t.length;for(;--e>=0;)t[e]=0}const kr=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Sr=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Or=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Lr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rr=new Array(576);Cr(Rr);const xr=new Array(60);Cr(xr);const Ir=new Array(512);Cr(Ir);const Pr=new Array(256);Cr(Pr);const Ar=new Array(29);Cr(Ar);const Mr=new Array(30);function Dr(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}let Nr,Br,Wr;function Hr(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}Cr(Mr);const Fr=t=>t<256?Ir[t]:Ir[256+(t>>>7)],Yr=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},jr=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,Yr(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},Xr=(t,e,i)=>{jr(t,i[2*e],i[2*e+1])},zr=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},Ur=(t,e,i)=>{const n=new Array(16);let r,a,s=0;for(r=1;r<=15;r++)s=s+i[r-1]<<1,n[r]=s;for(a=0;a<=e;a++){let e=t[2*a+1];0!==e&&(t[2*a]=zr(n[e]++,e))}},Gr=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Vr=t=>{t.bi_valid>8?Yr(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Kr=(t,e,i,n)=>{const r=2*e,a=2*i;return t[r]<t[a]||t[r]===t[a]&&n[e]<=n[i]},Zr=(t,e,i)=>{const n=t.heap[i];let r=i<<1;for(;r<=t.heap_len&&(r<t.heap_len&&Kr(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!Kr(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n},Jr=(t,e,i)=>{let n,r,a,s,o=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+o++],n+=(255&t.pending_buf[t.sym_buf+o++])<<8,r=t.pending_buf[t.sym_buf+o++],0===n?Xr(t,r,e):(a=Pr[r],Xr(t,a+256+1,e),s=kr[a],0!==s&&(r-=Ar[a],jr(t,r,s)),n--,a=Fr(n),Xr(t,a,i),s=Sr[a],0!==s&&(n-=Mr[a],jr(t,n,s)))}while(o<t.sym_next);Xr(t,256,e)},qr=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.has_stree,a=e.stat_desc.elems;let s,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<a;s++)0!==i[2*s]?(t.heap[++t.heap_len]=h=s,t.depth[s]=0):i[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,i[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=n[2*l+1]);for(e.max_code=h,s=t.heap_len>>1;s>=1;s--)Zr(t,i,s);l=a;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Zr(t,i,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,i[2*l]=i[2*s]+i[2*o],t.depth[l]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,i[2*s+1]=i[2*o+1]=l,t.heap[1]=l++,Zr(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,n=e.max_code,r=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,c,u,f,d,p,g=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(i[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)c=t.heap[h],f=i[2*i[2*c+1]+1]+1,f>l&&(f=l,g++),i[2*c+1]=f,c>n||(t.bl_count[f]++,d=0,c>=o&&(d=s[c-o]),p=i[2*c],t.opt_len+=p*(f+d),a&&(t.static_len+=p*(r[2*c+1]+d)));if(0!==g){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,g-=2}while(g>0);for(f=l;0!==f;f--)for(c=t.bl_count[f];0!==c;)u=t.heap[--h],u>n||(i[2*u+1]!==f&&(t.opt_len+=(f-i[2*u+1])*i[2*u],i[2*u+1]=f),c--)}})(t,e),Ur(i,h,t.bl_count)},$r=(t,e,i)=>{let n,r,a=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++o<l&&r===s||(o<h?t.bl_tree[2*r]+=o:0!==r?(r!==a&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=r,0===s?(l=138,h=3):r===s?(l=6,h=3):(l=7,h=4))},Qr=(t,e,i)=>{let n,r,a=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++o<l&&r===s)){if(o<h)do{Xr(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(Xr(t,r,t.bl_tree),o--),Xr(t,16,t.bl_tree),jr(t,o-3,2)):o<=10?(Xr(t,17,t.bl_tree),jr(t,o-3,3)):(Xr(t,18,t.bl_tree),jr(t,o-11,7));o=0,a=r,0===s?(l=138,h=3):r===s?(l=6,h=3):(l=7,h=4)}};let ta=!1;const ea=(t,e,i,n)=>{jr(t,0+(n?1:0),3),Vr(t),Yr(t,i),Yr(t,~i),i&&t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i};var ia={_tr_init:t=>{ta||((()=>{let t,e,i,n,r;const a=new Array(16);for(i=0,n=0;n<28;n++)for(Ar[n]=i,t=0;t<1<<kr[n];t++)Pr[i++]=n;for(Pr[i-1]=n,r=0,n=0;n<16;n++)for(Mr[n]=r,t=0;t<1<<Sr[n];t++)Ir[r++]=n;for(r>>=7;n<30;n++)for(Mr[n]=r<<7,t=0;t<1<<Sr[n]-7;t++)Ir[256+r++]=n;for(e=0;e<=15;e++)a[e]=0;for(t=0;t<=143;)Rr[2*t+1]=8,t++,a[8]++;for(;t<=255;)Rr[2*t+1]=9,t++,a[9]++;for(;t<=279;)Rr[2*t+1]=7,t++,a[7]++;for(;t<=287;)Rr[2*t+1]=8,t++,a[8]++;for(Ur(Rr,287,a),t=0;t<30;t++)xr[2*t+1]=5,xr[2*t]=zr(t,5);Nr=new Dr(Rr,kr,257,286,15),Br=new Dr(xr,Sr,0,30,15),Wr=new Dr(new Array(0),Or,0,19,7)})(),ta=!0),t.l_desc=new Hr(t.dyn_ltree,Nr),t.d_desc=new Hr(t.dyn_dtree,Br),t.bl_desc=new Hr(t.bl_tree,Wr),t.bi_buf=0,t.bi_valid=0,Gr(t)},_tr_stored_block:ea,_tr_flush_block:(t,e,i,n)=>{let r,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),qr(t,t.l_desc),qr(t,t.d_desc),s=(t=>{let e;for($r(t,t.dyn_ltree,t.l_desc.max_code),$r(t,t.dyn_dtree,t.d_desc.max_code),qr(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Lr[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=r&&(r=a)):r=a=i+5,i+4<=r&&-1!==e?ea(t,e,i,n):4===t.strategy||a===r?(jr(t,2+(n?1:0),3),Jr(t,Rr,xr)):(jr(t,4+(n?1:0),3),((t,e,i,n)=>{let r;for(jr(t,e-257,5),jr(t,i-1,5),jr(t,n-4,4),r=0;r<n;r++)jr(t,t.bl_tree[2*Lr[r]+1],3);Qr(t,t.dyn_ltree,e-1),Qr(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Jr(t,t.dyn_ltree,t.dyn_dtree)),Gr(t),n&&Vr(t)},_tr_tally:(t,e,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(Pr[i]+256+1)]++,t.dyn_dtree[2*Fr(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{jr(t,2,3),Xr(t,256,Rr),(t=>{16===t.bi_valid?(Yr(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},na=(t,e,i,n)=>{let r=65535&t,a=t>>>16&65535,s=0;for(;0!==i;){s=i>2e3?2e3:i,i-=s;do{r=r+e[n++]|0,a=a+r|0}while(--s);r%=65521,a%=65521}return r|a<<16};const ra=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var aa=(t,e,i,n)=>{const r=ra,a=n+i;t^=-1;for(let i=n;i<a;i++)t=t>>>8^r[255&(t^e[i])];return~t},sa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},oa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:la,_tr_stored_block:ha,_tr_flush_block:ca,_tr_tally:ua,_tr_align:fa}=ia,{Z_NO_FLUSH:da,Z_PARTIAL_FLUSH:pa,Z_FULL_FLUSH:ga,Z_FINISH:va,Z_BLOCK:_a,Z_OK:ya,Z_STREAM_END:Ea,Z_STREAM_ERROR:ma,Z_DATA_ERROR:wa,Z_BUF_ERROR:ba,Z_DEFAULT_COMPRESSION:Ta,Z_FILTERED:Ca,Z_HUFFMAN_ONLY:ka,Z_RLE:Sa,Z_FIXED:Oa,Z_DEFAULT_STRATEGY:La,Z_UNKNOWN:Ra,Z_DEFLATED:xa}=oa,Ia=258,Pa=262,Aa=42,Ma=113,Da=666,Na=(t,e)=>(t.msg=sa[e],e),Ba=t=>2*t-(t>4?9:0),Wa=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Ha=t=>{let e,i,n,r=t.w_size;e=t.hash_size,n=e;do{i=t.head[--n],t.head[n]=i>=r?i-r:0}while(--e);e=r,n=e;do{i=t.prev[--n],t.prev[n]=i>=r?i-r:0}while(--e)};let Fa=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const Ya=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},ja=(t,e)=>{ca(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Ya(t.strm)},Xa=(t,e)=>{t.pending_buf[t.pending++]=e},za=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Ua=(t,e,i,n)=>{let r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),i),1===t.state.wrap?t.adler=na(t.adler,e,r,i):2===t.state.wrap&&(t.adler=aa(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)},Ga=(t,e)=>{let i,n,r=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-Pa?t.strstart-(t.w_size-Pa):0,h=t.window,c=t.w_mask,u=t.prev,f=t.strstart+Ia;let d=h[a+s-1],p=h[a+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,h[i+s]===p&&h[i+s-1]===d&&h[i]===h[a]&&h[++i]===h[a+1]){a+=2,i++;do{}while(h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&h[++a]===h[++i]&&a<f);if(n=Ia-(f-a),a=f-Ia,n>s){if(t.match_start=e,s=n,n>=o)break;d=h[a+s-1],p=h[a+s]}}}while((e=u[e&c])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},Va=t=>{const e=t.w_size;let i,n,r;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Pa)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Ha(t),n+=e),0===t.strm.avail_in)break;if(i=Ua(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=i,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=Fa(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=Fa(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Pa&&0!==t.strm.avail_in)},Ka=(t,e)=>{let i,n,r,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s=0,o=t.strm.avail_in;do{if(i=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r)break;if(r=t.strm.avail_out-r,n=t.strstart-t.block_start,i>n+t.strm.avail_in&&(i=n+t.strm.avail_in),i>r&&(i=r),i<a&&(0===i&&e!==va||e===da||i!==n+t.strm.avail_in))break;s=e===va&&i===n+t.strm.avail_in?1:0,ha(t,0,0,s),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,Ya(t.strm),n&&(n>i&&(n=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,i-=n),i&&(Ua(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(0===s);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?4:e!==da&&e!==va&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(Ua(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r,a=r>t.w_size?t.w_size:r,n=t.strstart-t.block_start,(n>=a||(n||e===va)&&e!==da&&0===t.strm.avail_in&&n<=r)&&(i=n>r?r:n,s=e===va&&0===t.strm.avail_in&&i===n?1:0,ha(t,t.block_start,i,s),t.block_start+=i,Ya(t.strm)),s?3:1)},Za=(t,e)=>{let i,n;for(;;){if(t.lookahead<Pa){if(Va(t),t.lookahead<Pa&&e===da)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Fa(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Pa&&(t.match_length=Ga(t,i)),t.match_length>=3)if(n=ua(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Fa(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Fa(t,t.ins_h,t.window[t.strstart+1]);else n=ua(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(ja(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===va?(ja(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ja(t,!1),0===t.strm.avail_out)?1:2},Ja=(t,e)=>{let i,n,r;for(;;){if(t.lookahead<Pa){if(Va(t),t.lookahead<Pa&&e===da)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Fa(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Pa&&(t.match_length=Ga(t,i),t.match_length<=5&&(t.strategy===Ca||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=ua(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=Fa(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(ja(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=ua(t,0,t.window[t.strstart-1]),n&&ja(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=ua(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===va?(ja(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ja(t,!1),0===t.strm.avail_out)?1:2};function qa(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}const $a=[new qa(0,0,0,0,Ka),new qa(4,4,8,4,Za),new qa(4,5,16,8,Za),new qa(4,6,32,32,Za),new qa(4,4,16,16,Ja),new qa(8,16,32,32,Ja),new qa(8,16,128,128,Ja),new qa(8,32,128,256,Ja),new qa(32,128,258,1024,Ja),new qa(32,258,258,4096,Ja)];function Qa(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xa,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Wa(this.dyn_ltree),Wa(this.dyn_dtree),Wa(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Wa(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Wa(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ts=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Aa&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==Ma&&e.status!==Da?1:0},es=t=>{if(ts(t))return Na(t,ma);t.total_in=t.total_out=0,t.data_type=Ra;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?Aa:Ma,t.adler=2===e.wrap?0:1,e.last_flush=-2,la(e),ya},is=t=>{const e=es(t);var i;return e===ya&&((i=t.state).window_size=2*i.w_size,Wa(i.head),i.max_lazy_match=$a[i.level].max_lazy,i.good_match=$a[i.level].good_length,i.nice_match=$a[i.level].nice_length,i.max_chain_length=$a[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),e},ns=(t,e,i,n,r,a)=>{if(!t)return ma;let s=1;if(e===Ta&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||i!==xa||n<8||n>15||e<0||e>9||a<0||a>Oa||8===n&&1!==s)return Na(t,ma);8===n&&(n=9);const o=new Qa;return t.state=o,o.strm=t,o.status=Aa,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=a,o.method=i,is(t)};var rs={deflateInit:(t,e)=>ns(t,e,xa,15,8,La),deflateInit2:ns,deflateReset:is,deflateResetKeep:es,deflateSetHeader:(t,e)=>ts(t)||2!==t.state.wrap?ma:(t.state.gzhead=e,ya),deflate:(t,e)=>{if(ts(t)||e>_a||e<0)return t?Na(t,ma):ma;const i=t.state;if(!t.output||0!==t.avail_in&&!t.input||i.status===Da&&e!==va)return Na(t,0===t.avail_out?ba:ma);const n=i.last_flush;if(i.last_flush=e,0!==i.pending){if(Ya(t),0===t.avail_out)return i.last_flush=-1,ya}else if(0===t.avail_in&&Ba(e)<=Ba(n)&&e!==va)return Na(t,ba);if(i.status===Da&&0!==t.avail_in)return Na(t,ba);if(i.status===Aa&&0===i.wrap&&(i.status=Ma),i.status===Aa){let e=xa+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=ka||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=n<<6,0!==i.strstart&&(e|=32),e+=31-e%31,za(i,e),0!==i.strstart&&(za(i,t.adler>>>16),za(i,65535&t.adler)),t.adler=1,i.status=Ma,Ya(t),0!==i.pending)return i.last_flush=-1,ya}if(57===i.status)if(t.adler=0,Xa(i,31),Xa(i,139),Xa(i,8),i.gzhead)Xa(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Xa(i,255&i.gzhead.time),Xa(i,i.gzhead.time>>8&255),Xa(i,i.gzhead.time>>16&255),Xa(i,i.gzhead.time>>24&255),Xa(i,9===i.level?2:i.strategy>=ka||i.level<2?4:0),Xa(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Xa(i,255&i.gzhead.extra.length),Xa(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=aa(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Xa(i,0),Xa(i,0),Xa(i,0),Xa(i,0),Xa(i,0),Xa(i,9===i.level?2:i.strategy>=ka||i.level<2?4:0),Xa(i,3),i.status=Ma,Ya(t),0!==i.pending)return i.last_flush=-1,ya;if(69===i.status){if(i.gzhead.extra){let e=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let r=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>e&&(t.adler=aa(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex+=r,Ya(t),0!==i.pending)return i.last_flush=-1,ya;e=0,n-=r}let r=new Uint8Array(i.gzhead.extra);i.pending_buf.set(r.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>e&&(t.adler=aa(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=aa(t.adler,i.pending_buf,i.pending-n,n)),Ya(t),0!==i.pending)return i.last_flush=-1,ya;n=0}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Xa(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=aa(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=aa(t.adler,i.pending_buf,i.pending-n,n)),Ya(t),0!==i.pending)return i.last_flush=-1,ya;n=0}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Xa(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=aa(t.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(Ya(t),0!==i.pending))return i.last_flush=-1,ya;Xa(i,255&t.adler),Xa(i,t.adler>>8&255),t.adler=0}if(i.status=Ma,Ya(t),0!==i.pending)return i.last_flush=-1,ya}if(0!==t.avail_in||0!==i.lookahead||e!==da&&i.status!==Da){let n=0===i.level?Ka(i,e):i.strategy===ka?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(Va(t),0===t.lookahead)){if(e===da)return 1;break}if(t.match_length=0,i=ua(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(ja(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===va?(ja(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ja(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===Sa?((t,e)=>{let i,n,r,a;const s=t.window;for(;;){if(t.lookahead<=Ia){if(Va(t),t.lookahead<=Ia&&e===da)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){a=t.strstart+Ia;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<a);t.match_length=Ia-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=ua(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=ua(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(ja(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===va?(ja(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ja(t,!1),0===t.strm.avail_out)?1:2})(i,e):$a[i.level].func(i,e);if(3!==n&&4!==n||(i.status=Da),1===n||3===n)return 0===t.avail_out&&(i.last_flush=-1),ya;if(2===n&&(e===pa?fa(i):e!==_a&&(ha(i,0,0,!1),e===ga&&(Wa(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Ya(t),0===t.avail_out))return i.last_flush=-1,ya}return e!==va?ya:i.wrap<=0?Ea:(2===i.wrap?(Xa(i,255&t.adler),Xa(i,t.adler>>8&255),Xa(i,t.adler>>16&255),Xa(i,t.adler>>24&255),Xa(i,255&t.total_in),Xa(i,t.total_in>>8&255),Xa(i,t.total_in>>16&255),Xa(i,t.total_in>>24&255)):(za(i,t.adler>>>16),za(i,65535&t.adler)),Ya(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?ya:Ea)},deflateEnd:t=>{if(ts(t))return ma;const e=t.state.status;return t.state=null,e===Ma?Na(t,wa):ya},deflateSetDictionary:(t,e)=>{let i=e.length;if(ts(t))return ma;const n=t.state,r=n.wrap;if(2===r||1===r&&n.status!==Aa||n.lookahead)return ma;if(1===r&&(t.adler=na(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===r&&(Wa(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const a=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,Va(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=Fa(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Va(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=o,t.avail_in=a,n.wrap=r,ya},deflateInfo:"pako deflate (from Nodeca project)"};const as=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var ss={assign:function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)as(i,e)&&(t[e]=i[e])}}return t},flattenChunks:t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;const i=new Uint8Array(e);for(let e=0,n=0,r=t.length;e<r;e++){let r=t[e];i.set(r,n),n+=r.length}return i}};let os=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){os=!1}const ls=new Uint8Array(256);for(let t=0;t<256;t++)ls[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ls[254]=ls[254]=1;var hs={string2buf:t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,i,n,r,a,s=t.length,o=0;for(r=0;r<s;r++)i=t.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(o),a=0,r=0;a<o;r++)i=t.charCodeAt(r),55296==(64512&i)&&r+1<s&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?e[a++]=i:i<2048?(e[a++]=192|i>>>6,e[a++]=128|63&i):i<65536?(e[a++]=224|i>>>12,e[a++]=128|i>>>6&63,e[a++]=128|63&i):(e[a++]=240|i>>>18,e[a++]=128|i>>>12&63,e[a++]=128|i>>>6&63,e[a++]=128|63&i);return e},buf2string:(t,e)=>{const i=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,r;const a=new Array(2*i);for(r=0,n=0;n<i;){let e=t[n++];if(e<128){a[r++]=e;continue}let s=ls[e];if(s>4)a[r++]=65533,n+=s-1;else{for(e&=2===s?31:3===s?15:7;s>1&&n<i;)e=e<<6|63&t[n++],s--;s>1?a[r++]=65533:e<65536?a[r++]=e:(e-=65536,a[r++]=55296|e>>10&1023,a[r++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&os)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i})(a,r)},utf8border:(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+ls[t[i]]>e?i:e}},cs=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const us=Object.prototype.toString,{Z_NO_FLUSH:fs,Z_SYNC_FLUSH:ds,Z_FULL_FLUSH:ps,Z_FINISH:gs,Z_OK:vs,Z_STREAM_END:_s,Z_DEFAULT_COMPRESSION:ys,Z_DEFAULT_STRATEGY:Es,Z_DEFLATED:ms}=oa;function ws(t){this.options=ss.assign({level:ys,method:ms,chunkSize:16384,windowBits:15,memLevel:8,strategy:Es},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cs,this.strm.avail_out=0;let i=rs.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==vs)throw new Error(sa[i]);if(e.header&&rs.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?hs.string2buf(e.dictionary):"[object ArrayBuffer]"===us.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=rs.deflateSetDictionary(this.strm,t),i!==vs)throw new Error(sa[i]);this._dict_set=!0}}function bs(t,e){const i=new ws(e);if(i.push(t,!0),i.err)throw i.msg||sa[i.err];return i.result}ws.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let r,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?gs:fs,"string"==typeof t?i.input=hs.string2buf(t):"[object ArrayBuffer]"===us.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(a===ds||a===ps)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(r=rs.deflate(i,a),r===_s)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=rs.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===vs;if(0!==i.avail_out){if(a>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},ws.prototype.onData=function(t){this.chunks.push(t)},ws.prototype.onEnd=function(t){t===vs&&(this.result=ss.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ts={Deflate:ws,deflate:bs,deflateRaw:function(t,e){return(e=e||{}).raw=!0,bs(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,bs(t,e)},constants:oa};const Cs=16209;var ks=function(t,e){let i,n,r,a,s,o,l,h,c,u,f,d,p,g,v,_,y,E,m,w,b,T,C,k;const S=t.state;i=t.next_in,C=t.input,n=i+(t.avail_in-5),r=t.next_out,k=t.output,a=r-(e-t.avail_out),s=r+(t.avail_out-257),o=S.dmax,l=S.wsize,h=S.whave,c=S.wnext,u=S.window,f=S.hold,d=S.bits,p=S.lencode,g=S.distcode,v=(1<<S.lenbits)-1,_=(1<<S.distbits)-1;t:do{d<15&&(f+=C[i++]<<d,d+=8,f+=C[i++]<<d,d+=8),y=p[f&v];e:for(;;){if(E=y>>>24,f>>>=E,d-=E,E=y>>>16&255,0===E)k[r++]=65535&y;else{if(!(16&E)){if(64&E){if(32&E){S.mode=16191;break t}t.msg="invalid literal/length code",S.mode=Cs;break t}y=p[(65535&y)+(f&(1<<E)-1)];continue e}for(m=65535&y,E&=15,E&&(d<E&&(f+=C[i++]<<d,d+=8),m+=f&(1<<E)-1,f>>>=E,d-=E),d<15&&(f+=C[i++]<<d,d+=8,f+=C[i++]<<d,d+=8),y=g[f&_];;){if(E=y>>>24,f>>>=E,d-=E,E=y>>>16&255,16&E){if(w=65535&y,E&=15,d<E&&(f+=C[i++]<<d,d+=8,d<E&&(f+=C[i++]<<d,d+=8)),w+=f&(1<<E)-1,w>o){t.msg="invalid distance too far back",S.mode=Cs;break t}if(f>>>=E,d-=E,E=r-a,w>E){if(E=w-E,E>h&&S.sane){t.msg="invalid distance too far back",S.mode=Cs;break t}if(b=0,T=u,0===c){if(b+=l-E,E<m){m-=E;do{k[r++]=u[b++]}while(--E);b=r-w,T=k}}else if(c<E){if(b+=l+c-E,E-=c,E<m){m-=E;do{k[r++]=u[b++]}while(--E);if(b=0,c<m){E=c,m-=E;do{k[r++]=u[b++]}while(--E);b=r-w,T=k}}}else if(b+=c-E,E<m){m-=E;do{k[r++]=u[b++]}while(--E);b=r-w,T=k}for(;m>2;)k[r++]=T[b++],k[r++]=T[b++],k[r++]=T[b++],m-=3;m&&(k[r++]=T[b++],m>1&&(k[r++]=T[b++]))}else{b=r-w;do{k[r++]=k[b++],k[r++]=k[b++],k[r++]=k[b++],m-=3}while(m>2);m&&(k[r++]=k[b++],m>1&&(k[r++]=k[b++]))}break}if(64&E){t.msg="invalid distance code",S.mode=Cs;break t}y=g[(65535&y)+(f&(1<<E)-1)]}}break}}while(i<n&&r<s);m=d>>3,i-=m,d-=m<<3,f&=(1<<d)-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<s?s-r+257:257-(r-s),S.hold=f,S.bits=d};const Ss=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Os=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ls=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Rs=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var xs=(t,e,i,n,r,a,s,o)=>{const l=o.bits;let h,c,u,f,d,p,g=0,v=0,_=0,y=0,E=0,m=0,w=0,b=0,T=0,C=0,k=null;const S=new Uint16Array(16),O=new Uint16Array(16);let L,R,x,I=null;for(g=0;g<=15;g++)S[g]=0;for(v=0;v<n;v++)S[e[i+v]]++;for(E=l,y=15;y>=1&&0===S[y];y--);if(E>y&&(E=y),0===y)return r[a++]=20971520,r[a++]=20971520,o.bits=1,0;for(_=1;_<y&&0===S[_];_++);for(E<_&&(E=_),b=1,g=1;g<=15;g++)if(b<<=1,b-=S[g],b<0)return-1;if(b>0&&(0===t||1!==y))return-1;for(O[1]=0,g=1;g<15;g++)O[g+1]=O[g]+S[g];for(v=0;v<n;v++)0!==e[i+v]&&(s[O[e[i+v]]++]=v);if(0===t?(k=I=s,p=20):1===t?(k=Ss,I=Os,p=257):(k=Ls,I=Rs,p=0),C=0,v=0,g=_,d=a,m=E,w=0,u=-1,T=1<<E,f=T-1,1===t&&T>852||2===t&&T>592)return 1;for(;;){L=g-w,s[v]+1<p?(R=0,x=s[v]):s[v]>=p?(R=I[s[v]-p],x=k[s[v]-p]):(R=96,x=0),h=1<<g-w,c=1<<m,_=c;do{c-=h,r[d+(C>>w)+c]=L<<24|R<<16|x}while(0!==c);for(h=1<<g-1;C&h;)h>>=1;if(0!==h?(C&=h-1,C+=h):C=0,v++,0==--S[g]){if(g===y)break;g=e[i+s[v]]}if(g>E&&(C&f)!==u){for(0===w&&(w=E),d+=_,m=g-w,b=1<<m;m+w<y&&(b-=S[m+w],!(b<=0));)m++,b<<=1;if(T+=1<<m,1===t&&T>852||2===t&&T>592)return 1;u=C&f,r[u]=E<<24|m<<16|d-a}}return 0!==C&&(r[d+C]=g-w<<24|64<<16),o.bits=E,0};const{Z_FINISH:Is,Z_BLOCK:Ps,Z_TREES:As,Z_OK:Ms,Z_STREAM_END:Ds,Z_NEED_DICT:Ns,Z_STREAM_ERROR:Bs,Z_DATA_ERROR:Ws,Z_MEM_ERROR:Hs,Z_BUF_ERROR:Fs,Z_DEFLATED:Ys}=oa,js=16180,Xs=16190,zs=16191,Us=16192,Gs=16194,Vs=16199,Ks=16200,Zs=16206,Js=16209,qs=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function $s(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Qs=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<js||e.mode>16211?1:0},to=t=>{if(Qs(t))return Bs;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=js,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Ms},eo=t=>{if(Qs(t))return Bs;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,to(t)},io=(t,e)=>{let i;if(Qs(t))return Bs;const n=t.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Bs:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,eo(t))},no=(t,e)=>{if(!t)return Bs;const i=new $s;t.state=i,i.strm=t,i.window=null,i.mode=js;const n=io(t,e);return n!==Ms&&(t.state=null),n};let ro,ao,so=!0;const oo=t=>{if(so){ro=new Int32Array(512),ao=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(xs(1,t.lens,0,288,ro,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;xs(2,t.lens,0,32,ao,0,t.work,{bits:5}),so=!1}t.lencode=ro,t.lenbits=9,t.distcode=ao,t.distbits=5},lo=(t,e,i,n)=>{let r;const a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>n&&(r=n),a.window.set(e.subarray(i-n,i-n+r),a.wnext),(n-=r)?(a.window.set(e.subarray(i-n,i),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};var ho={inflateReset:eo,inflateReset2:io,inflateResetKeep:to,inflateInit:t=>no(t,15),inflateInit2:no,inflate:(t,e)=>{let i,n,r,a,s,o,l,h,c,u,f,d,p,g,v,_,y,E,m,w,b,T,C=0;const k=new Uint8Array(4);let S,O;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Qs(t)||!t.output||!t.input&&0!==t.avail_in)return Bs;i=t.state,i.mode===zs&&(i.mode=Us),s=t.next_out,r=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,h=i.hold,c=i.bits,u=o,f=l,T=Ms;t:for(;;)switch(i.mode){case js:if(0===i.wrap){i.mode=Us;break}for(;c<16;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(2&i.wrap&&35615===h){0===i.wbits&&(i.wbits=15),i.check=0,k[0]=255&h,k[1]=h>>>8&255,i.check=aa(i.check,k,2,0),h=0,c=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",i.mode=Js;break}if((15&h)!==Ys){t.msg="unknown compression method",i.mode=Js;break}if(h>>>=4,c-=4,b=8+(15&h),0===i.wbits&&(i.wbits=b),b>15||b>i.wbits){t.msg="invalid window size",i.mode=Js;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&h?16189:zs,h=0,c=0;break;case 16181:for(;c<16;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(i.flags=h,(255&i.flags)!==Ys){t.msg="unknown compression method",i.mode=Js;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=Js;break}i.head&&(i.head.text=h>>8&1),512&i.flags&&4&i.wrap&&(k[0]=255&h,k[1]=h>>>8&255,i.check=aa(i.check,k,2,0)),h=0,c=0,i.mode=16182;case 16182:for(;c<32;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}i.head&&(i.head.time=h),512&i.flags&&4&i.wrap&&(k[0]=255&h,k[1]=h>>>8&255,k[2]=h>>>16&255,k[3]=h>>>24&255,i.check=aa(i.check,k,4,0)),h=0,c=0,i.mode=16183;case 16183:for(;c<16;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}i.head&&(i.head.xflags=255&h,i.head.os=h>>8),512&i.flags&&4&i.wrap&&(k[0]=255&h,k[1]=h>>>8&255,i.check=aa(i.check,k,2,0)),h=0,c=0,i.mode=16184;case 16184:if(1024&i.flags){for(;c<16;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}i.length=h,i.head&&(i.head.extra_len=h),512&i.flags&&4&i.wrap&&(k[0]=255&h,k[1]=h>>>8&255,i.check=aa(i.check,k,2,0)),h=0,c=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(d=i.length,d>o&&(d=o),d&&(i.head&&(b=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(a,a+d),b)),512&i.flags&&4&i.wrap&&(i.check=aa(i.check,n,d,a)),o-=d,a+=d,i.length-=d),i.length))break t;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===o)break t;d=0;do{b=n[a+d++],i.head&&b&&i.length<65536&&(i.head.name+=String.fromCharCode(b))}while(b&&d<o);if(512&i.flags&&4&i.wrap&&(i.check=aa(i.check,n,d,a)),o-=d,a+=d,b)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===o)break t;d=0;do{b=n[a+d++],i.head&&b&&i.length<65536&&(i.head.comment+=String.fromCharCode(b))}while(b&&d<o);if(512&i.flags&&4&i.wrap&&(i.check=aa(i.check,n,d,a)),o-=d,a+=d,b)break t}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;c<16;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(4&i.wrap&&h!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Js;break}h=0,c=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=zs;break;case 16189:for(;c<32;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}t.adler=i.check=qs(h),h=0,c=0,i.mode=Xs;case Xs:if(0===i.havedict)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,i.hold=h,i.bits=c,Ns;t.adler=i.check=1,i.mode=zs;case zs:if(e===Ps||e===As)break t;case Us:if(i.last){h>>>=7&c,c-=7&c,i.mode=Zs;break}for(;c<3;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}switch(i.last=1&h,h>>>=1,c-=1,3&h){case 0:i.mode=16193;break;case 1:if(oo(i),i.mode=Vs,e===As){h>>>=2,c-=2;break t}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=Js}h>>>=2,c-=2;break;case 16193:for(h>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Js;break}if(i.length=65535&h,h=0,c=0,i.mode=Gs,e===As)break t;case Gs:i.mode=16195;case 16195:if(d=i.length,d){if(d>o&&(d=o),d>l&&(d=l),0===d)break t;r.set(n.subarray(a,a+d),s),o-=d,a+=d,l-=d,s+=d,i.length-=d;break}i.mode=zs;break;case 16196:for(;c<14;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(i.nlen=257+(31&h),h>>>=5,c-=5,i.ndist=1+(31&h),h>>>=5,c-=5,i.ncode=4+(15&h),h>>>=4,c-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Js;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;c<3;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}i.lens[L[i.have++]]=7&h,h>>>=3,c-=3}for(;i.have<19;)i.lens[L[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},T=xs(0,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,T){t.msg="invalid code lengths set",i.mode=Js;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;C=i.lencode[h&(1<<i.lenbits)-1],v=C>>>24,_=C>>>16&255,y=65535&C,!(v<=c);){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(y<16)h>>>=v,c-=v,i.lens[i.have++]=y;else{if(16===y){for(O=v+2;c<O;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(h>>>=v,c-=v,0===i.have){t.msg="invalid bit length repeat",i.mode=Js;break}b=i.lens[i.have-1],d=3+(3&h),h>>>=2,c-=2}else if(17===y){for(O=v+3;c<O;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}h>>>=v,c-=v,b=0,d=3+(7&h),h>>>=3,c-=3}else{for(O=v+7;c<O;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}h>>>=v,c-=v,b=0,d=11+(127&h),h>>>=7,c-=7}if(i.have+d>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Js;break}for(;d--;)i.lens[i.have++]=b}}if(i.mode===Js)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=Js;break}if(i.lenbits=9,S={bits:i.lenbits},T=xs(1,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,T){t.msg="invalid literal/lengths set",i.mode=Js;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},T=xs(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,T){t.msg="invalid distances set",i.mode=Js;break}if(i.mode=Vs,e===As)break t;case Vs:i.mode=Ks;case Ks:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,i.hold=h,i.bits=c,ks(t,f),s=t.next_out,r=t.output,l=t.avail_out,a=t.next_in,n=t.input,o=t.avail_in,h=i.hold,c=i.bits,i.mode===zs&&(i.back=-1);break}for(i.back=0;C=i.lencode[h&(1<<i.lenbits)-1],v=C>>>24,_=C>>>16&255,y=65535&C,!(v<=c);){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(_&&!(240&_)){for(E=v,m=_,w=y;C=i.lencode[w+((h&(1<<E+m)-1)>>E)],v=C>>>24,_=C>>>16&255,y=65535&C,!(E+v<=c);){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}h>>>=E,c-=E,i.back+=E}if(h>>>=v,c-=v,i.back+=v,i.length=y,0===_){i.mode=16205;break}if(32&_){i.back=-1,i.mode=zs;break}if(64&_){t.msg="invalid literal/length code",i.mode=Js;break}i.extra=15&_,i.mode=16201;case 16201:if(i.extra){for(O=i.extra;c<O;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}i.length+=h&(1<<i.extra)-1,h>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;C=i.distcode[h&(1<<i.distbits)-1],v=C>>>24,_=C>>>16&255,y=65535&C,!(v<=c);){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(!(240&_)){for(E=v,m=_,w=y;C=i.distcode[w+((h&(1<<E+m)-1)>>E)],v=C>>>24,_=C>>>16&255,y=65535&C,!(E+v<=c);){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}h>>>=E,c-=E,i.back+=E}if(h>>>=v,c-=v,i.back+=v,64&_){t.msg="invalid distance code",i.mode=Js;break}i.offset=y,i.extra=15&_,i.mode=16203;case 16203:if(i.extra){for(O=i.extra;c<O;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}i.offset+=h&(1<<i.extra)-1,h>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Js;break}i.mode=16204;case 16204:if(0===l)break t;if(d=f-l,i.offset>d){if(d=i.offset-d,d>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Js;break}d>i.wnext?(d-=i.wnext,p=i.wsize-d):p=i.wnext-d,d>i.length&&(d=i.length),g=i.window}else g=r,p=s-i.offset,d=i.length;d>l&&(d=l),l-=d,i.length-=d;do{r[s++]=g[p++]}while(--d);0===i.length&&(i.mode=Ks);break;case 16205:if(0===l)break t;r[s++]=i.length,l--,i.mode=Ks;break;case Zs:if(i.wrap){for(;c<32;){if(0===o)break t;o--,h|=n[a++]<<c,c+=8}if(f-=l,t.total_out+=f,i.total+=f,4&i.wrap&&f&&(t.adler=i.check=i.flags?aa(i.check,r,f,s-f):na(i.check,r,f,s-f)),f=l,4&i.wrap&&(i.flags?h:qs(h))!==i.check){t.msg="incorrect data check",i.mode=Js;break}h=0,c=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;c<32;){if(0===o)break t;o--,h+=n[a++]<<c,c+=8}if(4&i.wrap&&h!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Js;break}h=0,c=0}i.mode=16208;case 16208:T=Ds;break t;case Js:T=Ws;break t;case 16210:return Hs;default:return Bs}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,i.hold=h,i.bits=c,(i.wsize||f!==t.avail_out&&i.mode<Js&&(i.mode<Zs||e!==Is))&&lo(t,t.output,t.next_out,f-t.avail_out),u-=t.avail_in,f-=t.avail_out,t.total_in+=u,t.total_out+=f,i.total+=f,4&i.wrap&&f&&(t.adler=i.check=i.flags?aa(i.check,r,f,t.next_out-f):na(i.check,r,f,t.next_out-f)),t.data_type=i.bits+(i.last?64:0)+(i.mode===zs?128:0)+(i.mode===Vs||i.mode===Gs?256:0),(0===u&&0===f||e===Is)&&T===Ms&&(T=Fs),T},inflateEnd:t=>{if(Qs(t))return Bs;let e=t.state;return e.window&&(e.window=null),t.state=null,Ms},inflateGetHeader:(t,e)=>{if(Qs(t))return Bs;const i=t.state;return 2&i.wrap?(i.head=e,e.done=!1,Ms):Bs},inflateSetDictionary:(t,e)=>{const i=e.length;let n,r,a;return Qs(t)?Bs:(n=t.state,0!==n.wrap&&n.mode!==Xs?Bs:n.mode===Xs&&(r=1,r=na(r,e,i,0),r!==n.check)?Ws:(a=lo(t,e,i,i),a?(n.mode=16210,Hs):(n.havedict=1,Ms)))},inflateInfo:"pako inflate (from Nodeca project)"},co=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const uo=Object.prototype.toString,{Z_NO_FLUSH:fo,Z_FINISH:po,Z_OK:go,Z_STREAM_END:vo,Z_NEED_DICT:_o,Z_STREAM_ERROR:yo,Z_DATA_ERROR:Eo,Z_MEM_ERROR:mo}=oa;function wo(t){this.options=ss.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(15&e.windowBits||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cs,this.strm.avail_out=0;let i=ho.inflateInit2(this.strm,e.windowBits);if(i!==go)throw new Error(sa[i]);if(this.header=new co,ho.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=hs.string2buf(e.dictionary):"[object ArrayBuffer]"===uo.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=ho.inflateSetDictionary(this.strm,e.dictionary),i!==go)))throw new Error(sa[i])}function bo(t,e){const i=new wo(e);if(i.push(t),i.err)throw i.msg||sa[i.err];return i.result}wo.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=e===~~e?e:!0===e?po:fo,"[object ArrayBuffer]"===uo.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),a=ho.inflate(i,s),a===_o&&r&&(a=ho.inflateSetDictionary(i,r),a===go?a=ho.inflate(i,s):a===Eo&&(a=_o));i.avail_in>0&&a===vo&&i.state.wrap>0&&0!==t[i.next_in];)ho.inflateReset(i),a=ho.inflate(i,s);switch(a){case yo:case Eo:case _o:case mo:return this.onEnd(a),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(0===i.avail_out||a===vo))if("string"===this.options.to){let t=hs.utf8border(i.output,i.next_out),e=i.next_out-t,r=hs.buf2string(i.output,t);i.next_out=e,i.avail_out=n-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(a!==go||0!==o){if(a===vo)return a=ho.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},wo.prototype.onData=function(t){this.chunks.push(t)},wo.prototype.onEnd=function(t){t===go&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ss.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var To={Inflate:wo,inflate:bo,inflateRaw:function(t,e){return(e=e||{}).raw=!0,bo(t,e)},ungzip:bo,constants:oa};const{Deflate:Co,deflate:ko,deflateRaw:So,gzip:Oo}=Ts,{Inflate:Lo,inflate:Ro,inflateRaw:xo,ungzip:Io}=To;var Po={Deflate:Co,deflate:ko,deflateRaw:So,gzip:Oo,Inflate:Lo,inflate:Ro,inflateRaw:xo,ungzip:Io,constants:oa},Ao=function(){function e(){t(this,e)}return n(e,null,[{key:"zip",value:function(t){for(var e=(new TextEncoder).encode(t),i=Po.gzip(e),n="",r=0;r<i.length;r++)n+=String.fromCharCode(i[r]);return btoa(n)}},{key:"unzip",value:function(t){for(var e=atob(t),i=e.length,n=new Uint8Array(i),r=0;r<i;r++)n[r]=e.charCodeAt(r);var a=Po.inflate(n);return(new TextDecoder).decode(a)}}]),e}();function Mo(t,e,i){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),i}var Do=function(){function e(){t(this,e)}return n(e,null,[{key:"filePreview",value:function(t,i,n){Mo(this,e,Bo).call(this,t,"preview",i,n)}},{key:"filePrint",value:function(t,i,n){Mo(this,e,Bo).call(this,t,"print",i,n)}},{key:"fileExpImage",value:function(t,i){var n=this,r=t.toDataURL({format:"image/png",quality:1}),a=new Image;a.src=r,a.onload=function(){var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var s=r.getContext("2d");s.fillStyle="#ffffff",s.fillRect(0,0,r.width,r.height),s.drawImage(a,0,0,r.width,r.height);var o="".concat(i.info.name,"-").concat(Date.now(),".png");Mo(n,e,Wo).call(n,r.toDataURL({format:"image/png",quality:1}),o)}}},{key:"fileDownload",value:function(t,i,n){var r=window.URL.createObjectURL(new Blob(n?[this.compressData(t)]:[t]));Mo(this,e,Wo).call(this,r,i)}},{key:"compressData",value:function(t){var i=JSON.parse(JSON.stringify(t));return Mo(this,e,No).call(this,i.body),Mo(this,e,No).call(this,i.footer),Mo(this,e,No).call(this,i.header),this.compressJson(i)}},{key:"loadData",value:function(t,e,i){var n=[];t.header.forEach((function(t){G.isImageBlock(t)&&n.push(t)})),t.body.forEach((function(t){G.isImageBlock(t)&&n.push(t)})),t.footer.forEach((function(t){G.isImageBlock(t)&&n.push(t)})),G.loadImageCache(n,0,(function(t){e("正在加载".concat(t+1,"/").concat(n.length,"图片"))}),(function(){i(t)}))}},{key:"importData",value:function(t){return JSON.parse(Ao.unzip(t))}},{key:"compressJson",value:function(t){var e=JSON.stringify(t);return Ao.zip(e)}}]),e}();function No(t){t.forEach((function(t){delete t._size,delete t._drag_size,delete t._offset,delete t._drag_offset}))}function Bo(t,e,i,n){ur.preview({view:t.view,paper:t.paper,page:t.page,info:t.info})}function Wo(t,e){var i=document.createElement("a");i.href=t,i.setAttribute("download",e),i.click()}var Ho=function(){function e(){t(this,e)}var i,r;return n(e,null,[{key:"copy",value:(r=_t(Ot().mark((function t(i,n){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(i);case 3:z.debug("navigator.clipboard"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),z.debug("commandCopy"),Mo(this,e,Fo).call(this,i);case 10:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e){return r.apply(this,arguments)})},{key:"paste",value:(i=_t(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.readText();case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Mo(this,e,Yo).call(this));case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(){return i.apply(this,arguments)})}]),e}();function Fo(t){var e=document.createElement("input");e.setAttribute("value",t),e.classList.add("editor-clipboard"),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}function Yo(){var t=document.createElement("input");t.classList.add("editor-clipboard"),document.body.appendChild(t),t.focus(),document.execCommand("paste");var e=t.value;return document.body.removeChild(t),e}function jo(t,e){zo(t,e),e.add(t)}function Xo(t,e,i){zo(t,e),e.set(t,i)}function zo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Uo(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var Go=new WeakMap,Vo=new WeakMap,Ko=new WeakSet,Zo=new WeakSet,Jo=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e;return t(this,s),jo(yt(e=a.call(this)),Zo),jo(yt(e),Ko),Xo(yt(e),Go,{writable:!0,value:void 0}),Xo(yt(e),Vo,{writable:!0,value:void 0}),kt(yt(e),Go,[]),kt(yt(e),Vo,[]),e}return n(s,[{key:"reset",value:function(){Ct(this,Go).splice(0,Ct(this,Go).length),Ct(this,Vo).splice(0,Ct(this,Vo).length)}},{key:"save",value:function(t,e,i,n,r,a,s){Ct(this,Vo).splice(0,Ct(this,Vo).length),Uo(this,Ko,qo).call(this,t,e,i,n,r,a,s)}},{key:"prev",value:function(){return Ct(this,Vo).push(Ct(this,Go).pop()),Uo(this,Zo,$o).call(this,Ct(this,Go),-1)}},{key:"next",value:function(){return Ct(this,Go).push(Ct(this,Vo).pop()),Uo(this,Zo,$o).call(this,Ct(this,Go),-1)}},{key:"stackSize",value:function(){return Ct(this,Go).length}},{key:"recycleSize",value:function(){return Ct(this,Vo).length}}]),s}(Rt);function qo(t,e,i,n,r,a,s){var o=this.getCurrentPartData(i,n),l=r.map((function(t){return o.findIndex((function(e){return e===t}))})),h=o.findIndex((function(t){return t===a})),c=o.findIndex((function(t){return t===s})),u={action:t,options:e,data:JSON.stringify(i),part:n,selects:l,insert:h,cursor:c};Ct(this,Go).push(u)}function $o(t,e){var i=t.at(e),n=JSON.parse(i.data);n.header.forEach((function(t){G.isImageBlock(t)&&(t.extend.view=O.getImage(t.extend.uuid))})),n.body.forEach((function(t){G.isImageBlock(t)&&(console.info(O.getImage(t.extend.uuid)),t.extend.view=O.getImage(t.extend.uuid))})),n.footer.forEach((function(t){G.isImageBlock(t)&&(t.extend.view=O.getImage(t.extend.uuid))}));var r=this.getCurrentPartData(n,i.part),a=i.selects.map((function(t){return r.at(t)}));return{data:n,part:i.part,selects:a,insert:r.at(i.insert),cursor:r.at(i.cursor)}}function Qo(t){throw new TypeError('"'+t+'" is read-only')}function tl(t,e,i){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),i}var el=function(){function e(){t(this,e)}return n(e,null,[{key:"lineFeel",value:function(t,e){e=e||1;var i=a.STYLE_LINE_HEIGHT,n=e*i,r=parseInt(t*this.SIZE_SCALE),s=Math.max(Math.ceil(t*this.LINE_SCALE/i)*i,n);return{width:0,height:s,lineHeight:s,baseLine:parseInt((s-r)/2),fontHeight:r,descent:parseInt(t*this.BASELINE_SCALE)}}},{key:"divder",value:function(t,e,i){e=e||1;var n=a.STYLE_LINE_HEIGHT,r=e*n,s=i,o=parseInt(t*this.SIZE_SCALE),l=Math.max(Math.ceil(t*this.LINE_SCALE/n)*n,r);return{width:s,height:l,lineHeight:l,baseLine:parseInt((l-o)/2),fontHeight:o,descent:parseInt(t*this.BASELINE_SCALE)}}},{key:"character",value:function(t,e,i,n){n=n||1;var r=a.STYLE_LINE_HEIGHT,s=n*r,o=parseInt(i);_.isFullWidthChar(t)?e!=a.SCRIPT_SUB&&e!=a.SCRIPT_SUP||(o=parseInt(o/2)):(o=parseInt(o/2),e!=a.SCRIPT_SUB&&e!=a.SCRIPT_SUP||(o=parseInt(2*o/3)));var l=parseInt(i*this.SIZE_SCALE),h=Math.max(Math.ceil(i*this.LINE_SCALE/r)*r,s);return{width:o,height:h,lineHeight:h,baseLine:parseInt((h-l)/2),fontHeight:l,descent:parseInt(i*this.BASELINE_SCALE)}}},{key:"tab",value:function(t,e){e=e||1;var i=a.STYLE_LINE_HEIGHT,n=e*i,r=2*parseInt(t),s=parseInt(t*this.SIZE_SCALE),o=Math.max(Math.ceil(s/i)*i,n);return{width:r,height:o,lineHeight:o,baseLine:parseInt((o-s)/2),fontHeight:s,descent:parseInt(t*this.BASELINE_SCALE)}}},{key:"block",value:function(t,e,i){i=i||1;var n=a.STYLE_LINE_HEIGHT,r=i*n,s=e,o=Math.max(Math.ceil(s/n)*n,r);return{width:t,height:o,lineHeight:o,baseLine:0,fontHeight:s,descent:0}}},{key:"textboxBorder",value:function(t,e){e=e||1;var i=a.STYLE_LINE_HEIGHT,n=e*i,r=parseInt(t/3),s=parseInt(t*this.SIZE_SCALE),o=Math.max(Math.ceil(s/i)*i,n);return{width:r,height:o,lineHeight:o,baseLine:parseInt((o-s)/2),fontHeight:s,descent:parseInt(t*this.BASELINE_SCALE)}}},{key:"checkboxButton",value:function(t,e){e=e||1;var i=a.STYLE_LINE_HEIGHT,n=e*i,r=parseInt(1.4*t),s=parseInt(t*this.SIZE_SCALE),o=Math.max(Math.ceil(s/i)*i,n);return{width:r,height:o,lineHeight:o,baseLine:parseInt((o-s)/2),fontHeight:s,descent:parseInt(t*this.BASELINE_SCALE)}}},{key:"radioboxButton",value:function(t,e){e=e||1;var i=a.STYLE_LINE_HEIGHT,n=e*i,r=parseInt(1.4*t),s=parseInt(t*this.SIZE_SCALE),o=Math.max(Math.ceil(s/i)*i,n);return{width:r,height:o,lineHeight:o,baseLine:parseInt((o-s)/2),fontHeight:s,descent:parseInt(t*this.BASELINE_SCALE)}}},{key:"expre",value:function(t,i,n){switch(t.type){case G.EXP_MH:return tl(this,e,il).call(this,t,i,n);case G.EXP_TM:return tl(this,e,nl).call(this,t,i,n);case G.EXP_FN:return tl(this,e,rl).call(this,t,i,n)}}}]),e}();function il(t,e,i){var n="".concat(t.field7,"11"),r="".concat(t.field3,"~").concat(t.field4),s="".concat(t.field5,"~").concat(t.field6),o="".concat(t.field8),l="".concat(t.field2,"11"),h=r.length>s.length?r:s,c="0"==t.field1?o:n;i=i||1;var u=a.STYLE_LINE_HEIGHT,f=i*u,d=parseInt(e*(l.length+h.length+c.length)/2),p=parseInt(e*this.SIZE_SCALE*2),g=Math.max(Math.ceil(p/u)*u,f);return{width:d,height:g,lineHeight:g,baseLine:parseInt((g-p)/2),fontHeight:p,descent:parseInt(e*this.BASELINE_SCALE)}}function nl(t,e,i){e=parseInt(e);var n=function(t){var i=0;return t.forEach((function(t){t.show&&("r"==t.numerary||"l"==t.numerary?i+=parseInt(3*e/2+e/3):i+=e/2,t.surface.length>0&&(i+=t.surface.join(",").length*e/3))})),i},r=n(t.top.left),s=n(t.top.right),o=n(t.bot.left),l=n(t.bot.right),h=Math.max(r+s,o+l)+e;i=i||1;var c=a.STYLE_LINE_HEIGHT,u=i*c,f=parseInt(h),d=parseInt(2.4*e),p=Math.max(Math.ceil(d/c)*c,u);return{width:f,height:p,lineHeight:p,baseLine:parseInt((p-d)/2),fontHeight:d,descent:parseInt(e*this.BASELINE_SCALE)}}function rl(t,e,i){i=i||1;var n=a.STYLE_LINE_HEIGHT,r=i*n,s=parseInt(2.6*e),o=parseInt(3*e),l=Math.max(Math.ceil(o/n)*n,r);return{width:s,height:l,lineHeight:l,baseLine:parseInt((l-o)/2),fontHeight:o,descent:parseInt(e*this.BASELINE_SCALE)}}r(el,"SIZE_SCALE",.9),r(el,"LINE_SCALE",1.3),r(el,"BASELINE_SCALE",.15);var al=n((function e(){t(this,e)}));function sl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=bt(t);if(e){var r=bt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return wt(this,i)}}function ol(t,e){hl(t,e),e.add(t)}function ll(t,e,i){hl(t,e),e.set(t,i)}function hl(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cl(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}r(al,"NOT_APPEAR_LINE_BEGIN",[65292,44,12290,46,12289,65307,59,65306,58,65311,63,65281,33,8221,8217,12318,41,12305,12299,65310,62,41,93,187,8250,12309,12297,125,65341,12301,65373,12311,12303,65374,126,173,183,65372,124,65295,47,65340,92]),r(al,"NOT_APPEAR_LINE_END",[8220,8216,12317,40,12304,12298,65308,65117,60,40,91,171,8249,12308,12296,123,65339,12300,65371,12310,12302,124,65372,65295,47,65340,92]);var ul=new WeakMap,fl=new WeakMap,dl=new WeakMap,pl=new WeakMap,gl=new WeakMap,vl=new WeakMap,_l=new WeakSet,yl=new WeakSet,El=new WeakSet,ml=new WeakSet,wl=new WeakSet,bl=function(){function e(){t(this,e),ol(this,wl),ol(this,ml),ol(this,El),ol(this,yl),ol(this,_l),ll(this,ul,{writable:!0,value:void 0}),ll(this,fl,{writable:!0,value:void 0}),ll(this,dl,{writable:!0,value:void 0}),ll(this,pl,{writable:!0,value:void 0}),ll(this,gl,{writable:!0,value:void 0}),ll(this,vl,{writable:!0,value:void 0}),kt(this,ul,new Ll)}return n(e,[{key:"getModelSize",value:function(){return Ct(this,gl)}},{key:"getPageSize",value:function(){return Ct(this,ul)}},{key:"getBodyModel",value:function(){return Ct(this,pl)}},{key:"getHeaderModel",value:function(){return Ct(this,fl)}},{key:"getFooterModel",value:function(){return Ct(this,dl)}},{key:"getPageInfo",value:function(){return Ct(this,vl)}},{key:"struct",value:function(t){Ct(this,ul).calc(t),cl(this,_l,Tl).call(this,t),cl(this,yl,Cl).call(this,t),cl(this,El,kl).call(this,t),cl(this,ml,Sl).call(this,t),cl(this,wl,Ol).call(this)}}]),e}();function Tl(t){kt(this,vl,{watermark:t.page.watermark,above:t.resources.objects.above,below:t.resources.objects.below})}function Cl(t){t.header.forEach((function(t,e){t._count=e})),kt(this,fl,new Ql(t.header)),Ct(this,fl).struct(1),Ct(this,fl).setLineSize(Ct(this,ul).pxWidth,Ct(this,ul).pxLeft,Ct(this,ul).pxRight),Ct(this,fl).setPadding(Ct(this,ul).pxHeaderTop,0,0,0),Ct(this,fl).setMargin(0,0,0,0),Ct(this,fl).typeset(),Ct(this,fl).locate(0,0),Ct(this,ul).calcHeaderSize(Ct(this,fl).getHeight())}function kl(t){t.footer.forEach((function(t,e){t._count=e})),kt(this,dl,new Ql(t.footer)),Ct(this,dl).struct(1),Ct(this,dl).setLineSize(Ct(this,ul).pxWidth,Ct(this,ul).pxLeft,Ct(this,ul).pxRight),Ct(this,dl).setPadding(0,0,0,0),Ct(this,dl).setMargin(0,0,0,0),Ct(this,dl).typeset(),Ct(this,dl).locate(0,Ct(this,ul).pxHeight-Ct(this,ul).pxFooterBottom-Ct(this,dl).getHeight()),Ct(this,ul).calcFooterSize(Ct(this,dl).getHeight())}function Sl(t){Ct(this,ul).calcBodySize(),t.body.forEach((function(t,e){t._count=e})),kt(this,pl,new Ql(t.body)),Ct(this,pl).struct(1),Ct(this,pl).setLineSize(Ct(this,ul).pxWidth,Ct(this,ul).pxLeft,Ct(this,ul).pxRight),Ct(this,pl).setPadding(0,0,0,0),Ct(this,pl).setMargin(0,0,0,0),Ct(this,pl).typeset(),Ct(this,pl).setSegment(Ct(this,ul).pxBodyHeight,Ct(this,ul).pxHeaderHeight,Ct(this,ul).pxFooterHeight,0),Ct(this,pl).paging(),Ct(this,pl).locate(0,Ct(this,ul).pxHeaderHeight)}function Ol(){var t=Ct(this,pl).getHeight(),e=parseInt(t/Ct(this,ul).pxHeight);t%Ct(this,ul).pxHeight>0&&(e+=1),kt(this,gl,{width:Ct(this,ul).pxWidth,height:Ct(this,ul).pxHeight*e,pageCount:e})}r(bl,"TYPE_MODEL_PARAG",1),r(bl,"TYPE_MODEL_TABLE",2);var Ll=function(){function e(){t(this,e),r(this,"actWidth",0),r(this,"actHeight",0),r(this,"actTop",0),r(this,"actBottom",0),r(this,"actLeft",0),r(this,"actRight",0),r(this,"actHeaderTop",0),r(this,"actFooterBottom",0),r(this,"pxWidth",0),r(this,"pxHeight",0),r(this,"pxTop",0),r(this,"pxBottom",0),r(this,"pxLeft",0),r(this,"pxRight",0),r(this,"pxHeaderTop",0),r(this,"pxFooterBottom",0),r(this,"pxBodyWidth",0),r(this,"pxBodyHeight",0),r(this,"pxHeaderHeight",0),r(this,"pxFooterHeight",0)}return n(e,[{key:"calc",value:function(t){var e=a.PaperTypes.find((function(e){return e.value==t.paper.type}));e?(this.actWidth=e.width,this.actHeight=e.height):(this.actWidth=t.paper.width,this.actHeight=t.paper.height),this.actTop=t.paper.top,this.actBottom=t.paper.bottom,this.actLeft=t.paper.left,this.actRight=t.paper.right,this.actHeaderTop=t.paper.headerTop,this.actFooterBottom=t.paper.footerBottom,t.paper.direction==a.PAPER_ROTATION_PORTRAIT?(this.pxWidth=g.mmConversionPx(this.actWidth),this.pxHeight=g.mmConversionPx(this.actHeight)):(this.pxWidth=g.mmConversionPx(this.actHeight),this.pxHeight=g.mmConversionPx(this.actWidth)),this.pxLeft=g.mmConversionPx(this.actLeft),this.pxRight=g.mmConversionPx(this.actRight),this.pxTop=g.mmConversionPx(this.actTop),this.pxBottom=g.mmConversionPx(this.actBottom),this.pxHeaderTop=g.mmConversionPx(this.actHeaderTop),this.pxFooterBottom=g.mmConversionPx(this.actFooterBottom),this.pxHeaderHeight=this.pxTop,this.pxFooterHeight=this.pxBottom,this.pxBodyWidth=this.pxWidth-this.pxLeft-this.pxRight}},{key:"calcHeaderSize",value:function(t){this.pxHeaderHeight=t}},{key:"calcFooterSize",value:function(t){this.pxFooterHeight+=Math.max(t-(this.pxBottom-this.pxFooterBottom),0)}},{key:"calcBodySize",value:function(){this.pxBodyHeight=this.pxHeight-this.pxHeaderHeight-this.pxFooterHeight}}]),e}(),Rl=new WeakMap,xl=new WeakMap,Il=new WeakMap,Pl=new WeakMap,Al=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,Nl=new WeakMap,Bl=new WeakMap,Wl=new WeakMap,Hl=new WeakMap,Fl=new WeakMap,Yl=new WeakMap,jl=new WeakMap,Xl=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Gl=new WeakMap,Vl=new WeakMap,Kl=function(){function e(i){t(this,e),ll(this,Rl,{writable:!0,value:void 0}),ll(this,xl,{writable:!0,value:void 0}),ll(this,Il,{writable:!0,value:void 0}),ll(this,Pl,{writable:!0,value:void 0}),ll(this,Al,{writable:!0,value:void 0}),ll(this,Ml,{writable:!0,value:void 0}),ll(this,Dl,{writable:!0,value:void 0}),ll(this,Nl,{writable:!0,value:void 0}),ll(this,Bl,{writable:!0,value:void 0}),ll(this,Wl,{writable:!0,value:void 0}),ll(this,Hl,{writable:!0,value:void 0}),ll(this,Fl,{writable:!0,value:void 0}),ll(this,Yl,{writable:!0,value:void 0}),ll(this,jl,{writable:!0,value:void 0}),ll(this,Xl,{writable:!0,value:void 0}),ll(this,zl,{writable:!0,value:void 0}),ll(this,Ul,{writable:!0,value:void 0}),ll(this,Gl,{writable:!0,value:void 0}),ll(this,Vl,{writable:!0,value:void 0}),kt(this,Rl,i)}return n(e,[{key:"getType",value:function(){return null}},{key:"setLineSize",value:function(t,e,i){kt(this,xl,t),kt(this,Il,e),kt(this,Pl,i)}},{key:"getLineSize",value:function(){return{lineWidth:Ct(this,xl),lineLeft:Ct(this,Il),lineRight:Ct(this,Pl)}}},{key:"setPadding",value:function(t,e,i,n){kt(this,Al,t),kt(this,Ml,e),kt(this,Dl,i),kt(this,Nl,n)}},{key:"getPadding",value:function(){return{paddingTop:Ct(this,Al),paddingRight:Ct(this,Ml),paddingBot:Ct(this,Dl),paddingLeft:Ct(this,Nl)}}},{key:"setMargin",value:function(t,e,i,n){kt(this,Bl,t),kt(this,Wl,i),kt(this,Fl,e),kt(this,Hl,n)}},{key:"getMargin",value:function(){return{marginTop:Ct(this,Bl),marginBot:Ct(this,Wl),marginRight:Ct(this,Fl),marginLeft:Ct(this,Hl)}}},{key:"setMarginTop",value:function(t){kt(this,Bl,t)}},{key:"setMarginBot",value:function(t){kt(this,Wl,t)}},{key:"setSegment",value:function(t,e,i,n){kt(this,Yl,t),kt(this,jl,e),kt(this,Xl,i),kt(this,zl,n)}},{key:"getSegment",value:function(){return{segHeight:Ct(this,Yl),segTop:Ct(this,jl),segBottom:Ct(this,Xl),segOffset:Ct(this,zl)}}},{key:"setSegOffset",value:function(t){kt(this,zl,t)}},{key:"getElements",value:function(){return Ct(this,Rl)}},{key:"setHeight",value:function(t){kt(this,Ul,t)}},{key:"getHeight",value:function(){return Ct(this,Ul)}},{key:"getOffset",value:function(){return{offsetX:Ct(this,Gl),offsetY:Ct(this,Vl)}}},{key:"setOffset",value:function(t,e){kt(this,Gl,t),kt(this,Vl,e)}},{key:"debug",value:function(){return Object.assign({},this.getLineSize(),this.getPadding(),this.getMargin(),this.getOffset())}},{key:"findIndex",value:function(t){return this.getElements().findIndex((function(e){return e===t}))}},{key:"findArrayIndex",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(i.length>1){var r=[];return i.forEach((function(e){r.push(t.findIndex((function(t){return t.findIndex(e)>=0})))})),r}return t.findIndex((function(t){return t.findIndex(i[0])>=0}))}},{key:"localeElement",value:function(t,e){}},{key:"localeUpElement",value:function(t,e,i){return!1}},{key:"localeDownElement",value:function(t,e,i){return!1}},{key:"localeLastLineElement",value:function(t,e){}},{key:"localeFristLineElement",value:function(t,e){}},{key:"findTableFieldInfo",value:function(t){}},{key:"selectElement",value:function(t,e){}},{key:"selectElement2",value:function(t,e,i){return!0}},{key:"selectStepElement",value:function(t,e,i,n){}},{key:"selectHalfElement",value:function(t,e){return[]}},{key:"selectFirstElement",value:function(t,e,i){return!0}},{key:"selectLastElement",value:function(t,e,i){return!0}},{key:"findTableMergeInfo",value:function(t){return{rect:!1,arow:!1,acol:!1,cell:!1,table:!1,fields:[],maxcol:void 0,maxrow:void 0,mincol:void 0,minrow:void 0,border:!0}}}]),e}(),Zl=new WeakMap,Jl=new WeakSet,ql=new WeakSet,$l=new WeakSet,Ql=function(e){mt(r,e);var i=sl(r);function r(e){var n;return t(this,r),ol(yt(n=i.call(this,e)),$l),ol(yt(n),ql),ol(yt(n),Jl),ll(yt(n),Zl,{writable:!0,value:void 0}),n}return n(r,[{key:"getType",value:function(){return null}},{key:"getChapters",value:function(){return Ct(this,Zl)}},{key:"getChapterSize",value:function(t){for(var e=0;e<Ct(this,Zl).length;e++){var i=Ct(this,Zl)[e];if(i.findIndex(t)>=0)return i.getChapterSize(t)}}},{key:"getLineHeight",value:function(){return Ct(this,Zl)[0].getLineHeight()}},{key:"struct",value:function(t){var e=this;kt(this,Zl,[]);for(var i=this.getElements(),n=[[]],r=0;r<i.length;r++){var a=i[r];n.at(-1).push(a),r<i.length-1&&a.dimension.depth==t&&a.property.type==G.TYPE_STRUCT&&n.push([])}var s=void 0;n.forEach((function(i){if(i.length>0)if(i.at(-1).dimension.depth==t&&i.at(-1).property.classify==G.CLS_CELL){var n=new mc(i);s||(s=new ec([]),Ct(e,Zl).push(s)),s.addField(n)}else{var r=new _h(i);Ct(e,Zl).push(r),s&&(s=void 0)}})),Ct(this,Zl).forEach((function(e){e.struct(t+1)}))}},{key:"typeset",value:function(){var t=this.getLineSize(),e=this.getPadding();Ct(this,Zl).forEach((function(i){if(i.getType()==bl.TYPE_MODEL_TABLE){var n=a.TABLE_FIELD_BORDER_SPAC;i.setLineSize(0,0,0),i.setPadding(n,n,n,n),i.setMargin(0,t.lineRight,0,t.lineLeft)}else i.getType()==bl.TYPE_MODEL_PARAG&&(i.setLineSize(t.lineWidth-e.paddingLeft-e.paddingRight,t.lineLeft,t.lineRight),i.setPadding(0,0,0,0),i.setMargin(0,0,0,0));i.typeset()})),this.resize()}},{key:"paging",value:function(){var t=this.getSegment();if(this.getHeight()>t.segHeight-t.segOffset)for(var e=0;e<Ct(this,Zl).length;e++){var i=Ct(this,Zl)[e];i.getHeight()<=t.segHeight-t.segOffset?t.segOffset+=i.getHeight():i.getLineHeight()>=t.segHeight-t.segOffset?(e>0&&Ct(this,Zl)[e-1].setMarginBot(t.segHeight-t.segOffset+t.segBottom),i.setMarginTop(t.segTop),t.segOffset=i.getHeight()):(i.setSegment(t.segHeight,t.segTop,t.segBottom,t.segOffset),i.paging(),t.segOffset=(i.getHeight()+t.segOffset)%(t.segHeight+t.segTop+t.segBottom))}Ct(this,Zl).forEach((function(t){t.resize()})),this.resize(),this.setSegOffset(t.segOffset)}},{key:"locate",value:function(t,e){this.setOffset(t,e);var i=this.getMargin(),n=this.getPadding();e+=i.marginTop,e+=n.paddingTop,t+=n.paddingLeft,Ct(this,Zl).forEach((function(n){n.locate(t,e),e+=n.getHeight(),e+=i.marginTop}))}},{key:"resize",value:function(){var t=this.getPadding(),e=this.getMargin(),i=t.paddingBot+t.paddingTop+e.marginBot+e.marginTop;Ct(this,Zl).forEach((function(t){i+=t.getHeight()})),this.setHeight(i)}},{key:"debug",value:function(){var t=Zn(bt(r.prototype),"debug",this).call(this);return t.children=[],Ct(this,Zl).forEach((function(e){return t.children.push(e.debug())})),t}},{key:"selectElement",value:function(t,e){var i=this.findArrayIndex(Ct(this,Zl),t,e),n=i[0],r=i[1];if(n==r)return Ct(this,Zl)[n].selectElement(t,e);for(var s=Ct(this,Zl)[n].selectHalfElement(t,a.SELECT_POINT_END),o=n+1;o<r;o++)s=[].concat(d(s),d(Ct(this,Zl)[o].getElements()));return[].concat(d(s),d(Ct(this,Zl)[r].selectHalfElement(e,a.SELECT_POINT_BEG)))}},{key:"selectElement2",value:function(t,e,i){var n=this.findArrayIndex(Ct(this,Zl),t.at(0),t.at(-1)),r=n[0],s=n[1];return r==s?!!Ct(this,Zl)[r].selectElement2(t,e,i)||cl(this,Jl,th).call(this,t,e,i,r):e==a.SELECT_POINT_END?cl(this,ql,eh).call(this,t,e,i,s):e==a.SELECT_POINT_BEG?cl(this,$l,ih).call(this,t,e,i,r):void 0}},{key:"localeElement",value:function(t,e){var i=this.getMargin(),n=this.getPadding();e-=i.marginTop,e-=n.paddingTop;for(var r=void 0,a=0;a<Ct(this,Zl).length;a++)if(r=Ct(this,Zl)[a],a<Ct(this,Zl).length-1){if(e<=r.getHeight())break;e-=r.getHeight()}return r.localeElement(t,e)}},{key:"positionElement",value:function(t,e){var i=this.getMargin(),n=this.getPadding();if(!(e<i.marginTop+n.paddingTop)){e-=i.marginTop+n.paddingTop;for(var r=0;r<Ct(this,Zl).length;r++){var a=Ct(this,Zl)[r];if(r<Ct(this,Zl).length){if(e<=a.getHeight())return a.positionElement(t,e);e-=a.getHeight()}}}}},{key:"localeUpElement",value:function(t,e,i){for(var n=0;n<Ct(this,Zl).length;n++){var r=Ct(this,Zl)[n];if(r.findIndex(t)>=0)return!!r.localeUpElement(t,e,i)||n>0&&(Ct(this,Zl)[n-1].localeLastLineElement(e,i),!0)}}},{key:"localeDownElement",value:function(t,e,i){for(var n=0;n<Ct(this,Zl).length;n++){var r=Ct(this,Zl)[n];if(r.findIndex(t)>=0)return!!r.localeDownElement(t,e,i)||n<Ct(this,Zl).length-1&&(Ct(this,Zl)[n+1].localeFristLineElement(e,i),!0)}}},{key:"localeLastLineElement",value:function(t,e){Ct(this,Zl).at(-1).localeLastLineElement(t,e)}},{key:"localeFristLineElement",value:function(t,e){Ct(this,Zl)[0].localeFristLineElement(t,e)}},{key:"findTableFieldInfo",value:function(t,e){if(0==e.length){var i=this.findArrayIndex(Ct(this,Zl),t);if(Ct(this,Zl)[i].getType()==bl.TYPE_MODEL_TABLE)return Ct(this,Zl)[i].findTableFieldInfo(t,e)}else{var n=this.findArrayIndex(Ct(this,Zl),e.at(0),e.at(-1));if(n[0]==n[1]&&Ct(this,Zl)[n[0]].getType()==bl.TYPE_MODEL_TABLE)return Ct(this,Zl)[n[0]].findTableFieldInfo(t,e)}}},{key:"findTableMergeInfo",value:function(t){if(0==t.length)return Zn(bt(r.prototype),"findTableMergeInfo",this).call(this);var e=this.findArrayIndex(Ct(this,Zl),t.at(0),t.at(-1));return e[0]!=e[1]||Ct(this,Zl)[e[0]].getType()!=bl.TYPE_MODEL_TABLE?Zn(bt(r.prototype),"findTableMergeInfo",this).call(this):Ct(this,Zl)[e[0]].findTableMergeInfo(t)}},{key:"isTableElement",value:function(t,e){if(0!=e.length){var i=this.findArrayIndex(Ct(this,Zl),e.at(0),e.at(-1));return i[0]==i[1]&&Ct(this,Zl)[i[0]].getType()==bl.TYPE_MODEL_TABLE}for(var n=0;n<Ct(this,Zl).length;n++){var r=Ct(this,Zl)[n];if(r.findIndex(t)>=0)return r.getType()==bl.TYPE_MODEL_TABLE}}}]),r}(Kl);function th(t,e,i,n){if(e==a.SELECT_POINT_END){if(n<Ct(this,Zl).length-1){var r=Ct(this,Zl)[n].selectHalfElement(t.at(0),a.SELECT_POINT_END);return E.splice(t,0,r),Ct(this,Zl)[n+1].selectFirstElement(t,e,i)}return!1}if(e==a.SELECT_POINT_BEG){if(n>0){var s=Ct(this,Zl)[n].selectHalfElement(t.at(-1),a.SELECT_POINT_BEG);return E.splice(t,0,s),Ct(this,Zl)[n-1].selectLastElement(t,e,i)}return!1}}function eh(t,e,i,n){return i!=a.SELECT_EXT_TYPE_R&&i!=a.SELECT_EXT_TYPE_D?Ct(this,Zl)[n].selectStepElement(t,t.at(-1),i,!1):Ct(this,Zl)[n].selectStepElement(t,t.at(-1),i,!0)?void 0:n<Ct(this,Zl).length-1&&Ct(this,Zl)[n+1].selectFirstElement(t,e,i)}function ih(t,e,i,n){return i!=a.SELECT_EXT_TYPE_L&&i!=a.SELECT_EXT_TYPE_U?Ct(this,Zl)[n].selectStepElement(t,t.at(0),i,!1):Ct(this,Zl)[n].selectStepElement(t,t.at(0),i,!0)?void 0:n>0&&Ct(this,Zl)[n-1].selectLastElement(t,e,i)}var nh=new WeakMap,rh=new WeakSet,ah=new WeakSet,sh=new WeakSet,oh=new WeakSet,lh=new WeakSet,hh=new WeakSet,ch=new WeakSet,uh=new WeakSet,fh=new WeakSet,dh=new WeakSet,ph=new WeakSet,gh=new WeakSet,vh=new WeakSet,_h=function(e){mt(r,e);var i=sl(r);function r(e){var n;return t(this,r),ol(yt(n=i.call(this,e)),vh),ol(yt(n),gh),ol(yt(n),ph),ol(yt(n),dh),ol(yt(n),fh),ol(yt(n),uh),ol(yt(n),ch),ol(yt(n),hh),ol(yt(n),lh),ol(yt(n),oh),ol(yt(n),sh),ol(yt(n),ah),ol(yt(n),rh),ll(yt(n),nh,{writable:!0,value:void 0}),n}return n(r,[{key:"getType",value:function(){return bl.TYPE_MODEL_PARAG}},{key:"getLines",value:function(){return Ct(this,nh)}},{key:"getLineHeight",value:function(){return Ct(this,nh)[0].height}},{key:"getChapterSize",value:function(){return this.getLineSize()}},{key:"struct",value:function(){}},{key:"typeset",value:function(){var t=this,e=this.getLineSize(),i=this.getPadding();kt(this,nh,[]),this.getElements().forEach((function(e){e.property.type==G.TYPE_STRUCT?e.property.classify==G.CLS_DIVDER?cl(t,ah,Eh).call(t,e):cl(t,rh,yh).call(t,e):e.property.classify==G.CLS_TEXT_CHAR?cl(t,sh,mh).call(t,e):e.property.classify==G.CLS_TEXT_TAB?cl(t,oh,wh).call(t,e):e.property.classify==G.CLS_EXPRE?cl(t,lh,bh).call(t,e):e.property.classify==G.CLS_TEXTBOX_BORDER?cl(t,ch,Ch).call(t,e):e.property.classify==G.CLS_CHECKBOX_BOTTON?cl(t,uh,kh).call(t,e):e.property.classify==G.CLS_RADIOBOX_BOTTON?cl(t,fh,Sh).call(t,e):G.isImageBlock(e)&&cl(t,hh,Th).call(t,e)}));var n=[];this.getElements().forEach((function(e){if(e.modular.type==G.MODULAR_TYPE_COMP){var i={type:G.MODULAR_TYPE_COMP,dataID:e.modular.dataID,elements:[e]};n.length>0&&n.at(-1).type==G.MODULAR_TYPE_COMP&&n.at(-1).dataID==e.modular.dataID&&([G.COMP_CLASS_DATEPICKER,G.COMP_CLASS_CHECKBOX,G.COMP_CLASS_RADIOGROUP].includes(e.modular.dataClass)||cl(t,dh,Oh).call(t,e,n.at(-1).elements.at(-1)))?n.at(-1).elements.push(e):n.push(i)}else{var r={type:G.MODULAR_TYPE_NORM,elements:[e]};n.length>0&&n.at(-1).type==G.MODULAR_TYPE_NORM&&cl(t,dh,Oh).call(t,e,n.at(-1).elements.at(-1))?n.at(-1).elements.push(e):n.push(r)}}));var r=this.getElements().at(-1).paragStyle,s=a.getDefaultFontSize(),o=parseInt(r.indentLeft*s.value),l=parseInt(r.indentRight*s.value),h=parseInt(r.segmentSpacPre*a.STYLE_LINE_HEIGHT),c=parseInt(r.segmentSpacAft*a.STYLE_LINE_HEIGHT);this.setPadding(h,i.paddingRight,c,i.paddingLeft),n.forEach((function(n){var h=0;if(n.elements.forEach((function(t){h+=t._size.width})),0==Ct(t,nh).length||Ct(t,nh).at(-1).surplus<h){var c=0;(r.indentSpecialType==a.INDENT_TYPE_TEXT&&0==Ct(t,nh).length||r.indentSpecialType==a.INDENT_TYPE_HANG&&Ct(t,nh).length>0)&&(c=parseInt(r.indentSpecialvalue*s.value)),Ct(t,nh).push(gt.createParagLine(e.lineWidth,e.lineLeft+i.paddingLeft,e.lineRight+i.paddingRight,o,l,c))}n.elements.forEach((function(n){var h=n._size,c=Ct(t,nh).at(-1);if(c.elements.length>0&&c.surplus<n._size.width){var u=0;(r.indentSpecialType==a.INDENT_TYPE_TEXT&&0==Ct(t,nh).length||r.indentSpecialType==a.INDENT_TYPE_HANG&&Ct(t,nh).length>0)&&(u=parseInt(r.indentSpecialvalue*s.value)),Ct(t,nh).push(gt.createParagLine(e.lineWidth,e.lineLeft+i.paddingLeft,e.lineRight+i.paddingRight,o,l,u)),c=Ct(t,nh).at(-1)}c.elements.push(n),c.surplus=c.surplus-h.width,c.height=Math.max(h.lineHeight,c.height),h.baseLine&&(c.baseLine=Math.max(h.baseLine,c.baseLine)),h.descent&&(c.descent=Math.max(h.descent,c.descent))}))}));var u=i.paddingTop+i.paddingBot;Ct(this,nh).forEach((function(t){u+=t.height})),this.setHeight(u)}},{key:"paging",value:function(){var t=this.getSegment();if(this.getHeight()>t.segHeight-t.segOffset){for(var e=0;e<Ct(this,nh).length;e++){var i=Ct(this,nh)[e];i.height<=t.segHeight-t.segOffset?t.segOffset+=i.height:(Ct(this,nh)[e-1].marginBot=t.segHeight-t.segOffset+t.segBottom,i.marginTop=t.segTop,t.segOffset=i.height)}this.resize(),this.setSegOffset(t.segOffset)}}},{key:"locate",value:function(t,e){var i=this;this.setOffset(t,e);var n=this.getMargin(),r=this.getPadding();e+=n.marginTop,e+=r.paddingTop,t+=r.paddingLeft,Ct(this,nh).forEach((function(n){e+=n.marginTop,cl(i,ph,Lh).call(i,n,t,e),e+=n.height+n.marginBot}))}},{key:"localeElement",value:function(t,e){var i=this.getMargin(),n=this.getPadding();e-=i.marginTop,e-=n.paddingTop;for(var r=void 0,a=0;a<Ct(this,nh).length;a++){var s=(r=Ct(this,nh)[a]).height+r.marginBot+r.marginTop;if(e<=s)break;e-=s}return cl(this,gh,Rh).call(this,r,t)}},{key:"positionElement",value:function(t,e){var i=this.getMargin(),n=this.getPadding();if(!(e<i.marginTop+n.paddingTop)){e-=i.marginTop+n.paddingTop;for(var r=0;r<Ct(this,nh).length;r++){var a=Ct(this,nh)[r],s=a.height+a.marginBot+a.marginTop;if(e<=s)return cl(this,vh,xh).call(this,a,t);e-=s}}}},{key:"localeUpElement",value:function(t,e,i){for(var n=0;n<Ct(this,nh).length;n++)if(Ct(this,nh)[n].elements.findIndex((function(e){return e===t}))>=0)return n>0&&(Object.assign(i,cl(this,gh,Rh).call(this,Ct(this,nh)[n-1],e,!0)),!0)}},{key:"localeDownElement",value:function(t,e,i){for(var n=0;n<Ct(this,nh).length;n++)if(Ct(this,nh)[n].elements.findIndex((function(e){return e===t}))>=0)return n<Ct(this,nh).length-1&&(Object.assign(i,cl(this,gh,Rh).call(this,Ct(this,nh)[n+1],e,!0)),!0)}},{key:"localeLastLineElement",value:function(t,e){Object.assign(e,cl(this,gh,Rh).call(this,Ct(this,nh).at(-1),t))}},{key:"localeFristLineElement",value:function(t,e){Object.assign(e,cl(this,gh,Rh).call(this,Ct(this,nh)[0],t))}},{key:"selectElement",value:function(t,e){return E.capture(this.getElements(),t,e,!1)}},{key:"selectElement2",value:function(t,e,i){for(var n=this.getElements(),r=void 0,s=void 0,o=Ct(this,nh).findIndex((function(e){return e.elements.indexOf(t.at(0))>=0})),l=Ct(this,nh).findIndex((function(e){return e.elements.indexOf(t.at(-1))>=0})),h=0;h<n.length;h++){var c=n[h];if(c===t.at(0)&&(r=h),c===t.at(-1)){s=h;break}}if(e==a.SELECT_POINT_BEG){if(i==a.SELECT_EXT_TYPE_L)return r>0&&(t.push(n.at(r-1)),!0);if(i==a.SELECT_EXT_TYPE_R)return t.splice(0,1),!0;if(i==a.SELECT_EXT_TYPE_U){if(o>0){var u=cl(this,gh,Rh).call(this,Ct(this,nh)[o-1],t.at(0)._offset.offsetX,!0),f=E.capture(this.getElements(),u.element,t.at(0),!0);return E.splice(t,0,f),!0}return!1}if(i==a.SELECT_EXT_TYPE_D){if(o<Ct(this,nh).length-1){var d=cl(this,gh,Rh).call(this,Ct(this,nh)[o+1],t.at(0)._offset.offsetX,!0),p=E.capture(t.at(0),d);return E.remove(t,p),!0}return t.splice(0,t.length),!0}}else if(e==a.SELECT_POINT_END){if(i==a.SELECT_EXT_TYPE_R)return s<n.length-1&&(t.push(n.at(s+1)),!0);if(i==a.SELECT_EXT_TYPE_L)return t.splice(t.length-1,1),!0;if(i==a.SELECT_EXT_TYPE_D){if(l<Ct(this,nh).length-1){var g=cl(this,gh,Rh).call(this,Ct(this,nh)[l+1],t.at(-1)._offset.offsetX,!0),v=E.capture(this.getElements(),g.element,t.at(-1),!1);return E.splice(t,0,v),!0}return!1}if(i==a.SELECT_EXT_TYPE_U){if(l>0){var _=cl(this,gh,Rh).call(this,Ct(this,nh)[l-1],t.at(-1)._offset.offsetX,!0),y=E.capture(_,t.at(-1));return E.remove(t,y),!0}return t.splice(0,t.length),!0}}return!0}},{key:"selectStepElement",value:function(t,e,i,n){var r=this.findIndex(e),s=Ct(this,nh).findIndex((function(t){return t.elements.indexOf(e)>=0}));if(n){if(i==a.SELECT_EXT_TYPE_L){if(!(r>0))return!1;t.push(this.getElements().at(r-1))}else if(i==a.SELECT_EXT_TYPE_U){if(!(r>0))return!1;if(s>0){var o=cl(this,gh,Rh).call(this,Ct(this,nh)[s-1],e._offset.offsetX,!0),l=E.capture(this.getElements(),o.element,e,!0);E.splice(t,0,l)}else{var h=E.capture(this.getElements(),this.getElements().at(0),e,!1);E.splice(t,0,h)}}else if(i==a.SELECT_EXT_TYPE_R){if(!(r<this.getElements().length-1))return!1;t.push(this.getElements().at(r+1))}else if(i==a.SELECT_EXT_TYPE_D){if(!(r<this.getElements().length-1))return!1;if(s<Ct(this,nh).length-1){var c=cl(this,gh,Rh).call(this,Ct(this,nh)[s+1],e._offset.offsetX,!0),u=E.capture(this.getElements(),c.element,e,!1);E.splice(t,0,u)}else{var f=E.capture(this.getElements(),e,this.getElements().at(-1),!0);E.splice(t,0,f)}}}else if(i==a.SELECT_EXT_TYPE_L||i==a.SELECT_EXT_TYPE_R)E.remove(t,[e]);else if(i==a.SELECT_EXT_TYPE_U)if(s>0){var d=cl(this,gh,Rh).call(this,Ct(this,nh)[s-1],e._offset.offsetX,!0),p=E.capture(this.getElements(),d,e,!0);E.remove(t,p)}else E.remove(t,Ct(this,nh)[s].elements);else if(i==a.SELECT_EXT_TYPE_D)if(s<Ct(this,nh).length-1){var g=cl(this,gh,Rh).call(this,Ct(this,nh)[s+1],e._offset.offsetX,!0),v=E.capture(this.getElements(),e,g,!0);E.remove(t,v)}else E.capture(this.getElements(),e,this.getElements().at(-1),!0),E.remove(t,Ct(this,nh)[s].elements);return!0}},{key:"selectHalfElement",value:function(t,e){var i=this.getElements(),n=[];if(e==a.SELECT_POINT_BEG)for(var r=0;r<i.length&&i[r]!==t;r++)n.push(i[r]);else for(var s=i.length-1;s>=0&&(n.push(i[s]),i[s]!==t);s--);return n}},{key:"selectFirstElement",value:function(t,e,i){if(i==a.SELECT_EXT_TYPE_R)return t.push(this.getElements().at(0)),!0;var n=Ct(this,nh).at(0).elements,r=cl(this,gh,Rh).call(this,Ct(this,nh).at(0),t.at(0)._offset.offsetX,!0),s=E.capture(n,n.at(0),r.element,!1);return E.splice(t,0,s),!0}},{key:"selectLastElement",value:function(t,e,i){if(i==a.SELECT_EXT_TYPE_L)return t.push(this.getElements().at(-1)),!0;var n=Ct(this,nh).at(-1).elements,r=cl(this,gh,Rh).call(this,Ct(this,nh).at(-1),t.at(-1)._offset.offsetX,!0),s=E.capture(n,r.element,n.at(-1),!0);return E.splice(t,0,s),!0}},{key:"resize",value:function(){var t=this.getMargin(),e=this.getPadding(),i=t.marginBot+t.marginTop+e.paddingBot+e.paddingTop;Ct(this,nh).forEach((function(t){i+=t.height+t.marginBot+t.marginTop})),this.setHeight(i)}},{key:"debug",value:function(){var t=Zn(bt(r.prototype),"debug",this).call(this);return t.children=[],Ct(this,nh).forEach((function(e){return t.children.push({lineWidth:e.width,lineSurplus:e.surplus,lineLeft:e.left,lineRight:e.right})})),t}}]),r}(Kl);function yh(t){var e=this.getElements();t._size=el.lineFeel(t.textStyle.size,e.at(-1).paragStyle.rowspac)}function Eh(t){var e=this.getLineSize(),i=this.getPadding(),n=this.getElements(),r=e.lineWidth-(e.lineLeft+i.paddingLeft)-(e.lineRight+i.paddingRight);t._size=el.divder(t.textStyle.size,n.at(-1).paragStyle.rowspac,r)}function mh(t){var e=this.getElements();t._size=el.character(t.property.code,t.textStyle.script,t.textStyle.size,e.at(-1).paragStyle.rowspac)}function wh(t){var e=this.getElements();t._size=el.tab(t.textStyle.size,e.at(-1).paragStyle.rowspac)}function bh(t){var e=this.getElements();t._size=el.expre(t.extend,t.textStyle.size,e.at(-1).paragStyle.rowspac)}function Th(t){var e=this.getElements();t._size=el.block(t.extend.width,t.extend.height,e.at(-1).paragStyle.rowspac),t._drag_size=Object.assign({},t._size)}function Ch(t){var e=this.getElements();t._size=el.textboxBorder(t.textStyle.size,e.at(-1).paragStyle.rowspac)}function kh(t){var e=this.getElements();t._size=el.checkboxButton(t.textStyle.size,e.at(-1).paragStyle.rowspac)}function Sh(t){var e=this.getElements();t._size=el.radioboxButton(t.textStyle.size,e.at(-1).paragStyle.rowspac)}function Oh(t,e){var i=t.property,n=e.property;return!!(al.NOT_APPEAR_LINE_END.includes(n.code.charCodeAt(0))||al.NOT_APPEAR_LINE_BEGIN.includes(i.code.charCodeAt(0))||_.isNumberString(n.code)&&_.isNumberString(i.code)||_.isEnglish(n.code)&&_.isEnglish(i.code))}function Lh(t,e,i){e+=t.left,e+=t.indentLeft,e+=t.indentSpecia;var n=this.getElements().at(-1).paragStyle.align,r=t.elements[t.elements.length-1],s=0,o=0,l=0;n==a.ALIGN_RIGHT?(e+=Math.max(t.surplus,0),t.alignLeft=Math.max(t.surplus,0)):n==a.ALIGN_CENTER?(e+=Math.max(t.surplus/2,0),t.alignLeft=Math.max(t.surplus/2,0),l=Math.max(t.surplus/2,0)):n==a.ALIGN_BOTH||n==a.ALIGN_DISPERSED?r.property.type==G.TYPE_STRUCT?n==a.ALIGN_DISPERSED?t.elements.length>2?o=t.surplus/(t.elements.length-2):(e+=Math.max(t.surplus/2,0),t.alignLeft=Math.max(t.surplus/2,0),l=Math.max(t.surplus/2,0)):l=t.surplus:t.elements.length>1?s=t.surplus/(t.elements.length-1):(e+=Math.max(t.surplus/2,0),t.alignLeft=Math.max(t.surplus/2,0)):l=t.surplus,t.elements.forEach((function(e,i){var n=e._size;i<t.elements.length-1?n.justifyspac=s:n.justifyspac=0,i<t.elements.length-2?n.dispersedspac=o:n.dispersedspac=0,e.property.classify==G.CLS_CELL?n.surplus=l:n.surplus=0})),t.elements.forEach((function(n){var r=n._size;n._offset={offsetX:e,offsetY:i,height:t.height,baseLine:t.baseLine,descent:t.descent},n._drag_offset=Object.assign({},n._offset),e+=r.width+r.dispersedspac+r.justifyspac}))}function Rh(t,e){var i={element:void 0,next:!0};e-=t.alignLeft,e-=this.getLineSize().lineLeft;for(var n=0;n<t.elements.length;n++){i.element=t.elements[n];var r=i.element._size,s=r.width/2;if(i.type=a.CLICK_TYPE_ELEMENT,e<=s||i.element.property.type==G.TYPE_STRUCT){i.next=!1;break}e-=r.width+r.dispersedspac+r.justifyspac}return i}function xh(t,e){e-=t.alignLeft,e-=this.getLineSize().lineLeft;for(var i=0;i<t.elements.length;i++){var n=t.elements[i],r=n._size;if(e<=n._size.width){var s=[G.CLS_CHECKBOX_BOTTON,G.CLS_RADIOBOX_BOTTON],o=[G.COMP_CLASS_DATEPICKER,G.COMP_CLASS_TEXTFIELD,G.COMP_CLASS_SINGLEFIELD,G.COMP_CLASS_MULTIPLEFIELD];if(G.isImageBlock(n))return{type:a.CLICK_TYPE_IMAGE_BLOCK,element:n};if(n.property.classify==G.CLS_EXPRE)return{type:a.CLICK_TYPE_EXPRE,element:n};if(s.includes(n.property.classify))return{type:a.CLICK_TYPE_COMP_BUTTON,element:n};if(o.includes(n.modular.dataClass))return{type:a.CLICK_TYPE_COMP_POP,element:n};break}e-=r.width+r.dispersedspac+r.justifyspac}}var Ih=new WeakMap,Ph=new WeakMap,Ah=new WeakMap,Mh=new WeakMap,Dh=new WeakMap,Nh=new WeakSet,Bh=new WeakSet,Wh=new WeakSet,Hh=new WeakSet,Fh=new WeakSet,Yh=new WeakSet,jh=new WeakSet,Xh=new WeakSet,zh=new WeakSet,Uh=new WeakSet,Gh=new WeakSet,Vh=new WeakSet,Kh=new WeakSet,Zh=new WeakSet,Jh=new WeakSet,qh=new WeakSet,$h=new WeakSet,Qh=new WeakSet,tc=new WeakSet,ec=function(e){mt(r,e);var i=sl(r);function r(e){var n;return t(this,r),ol(yt(n=i.call(this,e)),tc),ol(yt(n),Qh),ol(yt(n),$h),ol(yt(n),qh),ol(yt(n),Jh),ol(yt(n),Zh),ol(yt(n),Kh),ol(yt(n),Vh),ol(yt(n),Gh),ol(yt(n),Uh),ol(yt(n),zh),ol(yt(n),Xh),ol(yt(n),jh),ol(yt(n),Yh),ol(yt(n),Fh),ol(yt(n),Hh),ol(yt(n),Wh),ol(yt(n),Bh),ol(yt(n),Nh),ll(yt(n),Ih,{writable:!0,value:void 0}),ll(yt(n),Ph,{writable:!0,value:void 0}),ll(yt(n),Ah,{writable:!0,value:void 0}),ll(yt(n),Mh,{writable:!0,value:void 0}),ll(yt(n),Dh,{writable:!0,value:void 0}),kt(yt(n),Ih,[]),n}return n(r,[{key:"getType",value:function(){return bl.TYPE_MODEL_TABLE}},{key:"getElements",value:function(){for(var t=[],e=this.getVisibleField(),i=0;i<e.length;i++){var n=e[i];t=[].concat(d(t),d(n.getElements()))}return t}},{key:"getLineHeight",value:function(){return cl(this,Gh,uc).call(this,0)}},{key:"getChapterSize",value:function(t){for(var e=this.getVisibleField(),i=0;i<e.length;i++){var n=e[i];if(n.findIndex(t)>=0)return n.getChapterSize(t)}}},{key:"getTableSize",value:function(){return{colWidths:Ct(this,Ph),rowHeights:Ct(this,Ah),rowPagings:Ct(this,Mh)}}},{key:"getVisibleField",value:function(){return Ct(this,Ih).filter((function(t){return t.getFieldIndex().visible}))}},{key:"getMaxColIndex",value:function(){return Ct(this,Ph).length-1}},{key:"getMaxRowIndex",value:function(){return Ct(this,Ah).length-1}},{key:"addField",value:function(t){Ct(this,Ih).push(t)}},{key:"struct",value:function(t){cl(this,Nh,ic).call(this),cl(this,Bh,nc).call(this,t)}},{key:"typeset",value:function(){cl(this,Wh,rc).call(this),cl(this,Hh,ac).call(this),this.resize()}},{key:"paging",value:function(){var t=this.getSegment();kt(this,Mh,[]),kt(this,Dh,[]);for(var e=0;e<Ct(this,Ah).length;e++){Ct(this,Dh).push(t.segOffset),cl(this,Gh,uc).call(this,e)>t.segHeight-t.segOffset?(Ct(this,Mh).push(t.segHeight-t.segOffset+t.segBottom+t.segTop),t.segOffset=0):Ct(this,Mh).push(0);var i=cl(this,jh,oc).call(this,e);i<t.segHeight-t.segOffset?t.segOffset+=i:t.segOffset=cl(this,Yh,sc).call(this,e,t.segOffset)}this.resize(),this.setSegOffset(t.segOffset)}},{key:"locate",value:function(t,e){var i=this;this.setOffset(t,e);var n=cl(this,Vh,fc).call(this),r=this.getMargin(),a=this.getPadding();e+=r.marginTop,e+=a.paddingTop,t+=a.paddingLeft,t+=r.marginLeft,t+=n,this.getVisibleField().forEach((function(n){var r=n.getFieldIndex();if(r.visible){for(var a=0,s=0,o=0;o<r.row-r.rowspan+1;o++)a+=Ct(i,Ah)[o],a+=Ct(i,Mh)[o+1];for(var l=0;l<r.col-r.colspan+1;l++)s+=Ct(i,Ph)[l];n.locate(t+s,e+a)}}))}},{key:"resize",value:function(){var t=this.getMargin(),e=this.getPadding(),i=t.marginBot+t.marginTop+e.paddingBot+e.paddingTop;Ct(this,Ah).forEach((function(t){i+=t})),Ct(this,Mh).forEach((function(t){i+=t})),this.setHeight(i)}},{key:"debug",value:function(){var t=Zn(bt(r.prototype),"debug",this).call(this);return t.children=[],Ct(this,Ih).forEach((function(e){return t.children.push(e.debug())})),t}},{key:"localeElement",value:function(t,e){var i=this.getMargin(),n=this.getPadding(),r=this.getSegment(),a=cl(this,Vh,fc).call(this);e-=i.marginTop,e-=n.paddingTop,t-=n.paddingLeft,t-=i.marginLeft,t-=a;for(var s=0,o=0;s<Ct(this,Ah).length;s++){var l=Ct(this,Ah)[s],h=Ct(this,Mh)[s];if(s>0&&(e-=Ct(this,Mh)[s-1]),e<h){e<h-r.segTop&&(s-=1);break}if(s>0&&(e-=Ct(this,Ah)[s-1]),e<l)break}for(s=Math.min(s,this.getMaxRowIndex());o<Ct(this,Ph).length;o++){var c=Ct(this,Ph)[o];if(o>0&&(t-=Ct(this,Ph)[o-1]),t<c)break}o=Math.min(o,this.getMaxColIndex());for(var u=this.getVisibleField(),f=0;f<u.length;f++){var d=u[f],p=d.getFieldIndex();if(y.isFieldIndex(p,s,o)){var g=t+y.getListLenValue(Ct(this,Ph),p.col-p.colspan+1,o-1),v=e+y.getListLenValue(Ct(this,Ah),p.row-p.rowspan+1,s-1)+y.getListLenValue(Ct(this,Mh),p.row-p.rowspan+2,s);return d.localeElement(g,v)}}}},{key:"positionElement",value:function(t,e){var i=this,n=this.getMargin(),r=this.getPadding(),s=this.getSegment(),o=cl(this,Vh,fc).call(this);e-=n.marginTop,e-=r.paddingTop,t-=r.paddingLeft,t-=n.marginLeft,t-=o;for(var l=0,h=0;l<Ct(this,Ah).length;l++){var u=Ct(this,Ah)[l],f=Ct(this,Mh)[l];if(l>0&&(e-=Ct(this,Mh)[l-1]),e<f){e<f-s.segTop&&(l-=1);break}if(l>0&&(e-=Ct(this,Ah)[l-1]),e<u)break}for(l=Math.min(l,this.getMaxRowIndex());h<Ct(this,Ph).length;h++){var d=Ct(this,Ph)[h];if(h>0&&(t-=Ct(this,Ph)[h-1]),t<d)break}h=Math.min(h,this.getMaxColIndex());for(var p=this.getVisibleField(),g=0;g<p.length;g++){var v=p[g],_=v.getFieldIndex();if(y.isFieldIndex(_,l,h)){var E=cl(this,Xh,lc).call(this,v),m=cl(this,zh,hc).call(this,v),w=t+y.getListLenValue(Ct(this,Ph),_.col-_.colspan+1,h-1),b=e+y.getListLenValue(Ct(this,Ah),_.row-_.rowspan+1,l-1)+y.getListLenValue(Ct(this,Mh),_.row-_.rowspan+2,l),T=y.isFieldInside(w,b,E,m);if(T==a.TABLE_BORDER_INSIDE)return v.positionElement(w,b);var C=function(){var t=[];return Ct(i,Ih).forEach((function(e){t.push(e.getElements().at(-1))})),{v:{type:a.CLICK_TYPE_TABLE_BORDER,border:T,cell:v.getElements().at(-1),all:t}}}();if("object"===c(C))return C.v}}}},{key:"localeUpElement",value:function(t,e,i){for(var n=this.getVisibleField(),r=0;r<n.length;r++){var a=n[r];if(a.findIndex(t)>=0){var s=cl(this,Uh,cc).call(this,a);if(a.localeUpElement(t,e-s,i))return!0;var o=a.getFieldIndex();return o.row-o.rowspan+1>0&&(cl(this,Zh,pc).call(this,o.row-o.rowspan,e,i),!0)}}}},{key:"localeDownElement",value:function(t,e,i){for(var n=this.getVisibleField(),r=0;r<n.length;r++){var a=n[r];if(a.findIndex(t)>=0){var s=cl(this,Uh,cc).call(this,a);if(a.localeDownElement(t,e-s,i))return!0;var o=a.getFieldIndex();return o.row<this.getMaxRowIndex()&&(cl(this,Zh,pc).call(this,o.row+1,e,i),!0)}}}},{key:"localeLastLineElement",value:function(t,e){cl(this,Zh,pc).call(this,this.getMaxRowIndex(),t,e)}},{key:"localeFristLineElement",value:function(t,e){cl(this,Zh,pc).call(this,0,t,e)}},{key:"selectElement",value:function(t,e){var i=this.getVisibleField(),n=this.findArrayIndex(i,t,e),r=n[0],a=n[1];if(r==a)return i[r].selectElement(t,e);var s=cl(this,Kh,dc).call(this,[i[r],i[a]]);return cl(this,$h,_c).call(this,s.minrow,s.mincol,s.maxrow,s.maxcol)}},{key:"selectElement2",value:function(t,e,i){var n=this.getVisibleField(),r=this.findArrayIndex(n,t.at(0),t.at(-1)),s=r[0];if(s!=r[1]){var o=0,l=0,h=999999,c=999999;n.forEach((function(e){if(t.indexOf(e.getElements().at(-1))>=0){var i=e.getFieldIndex();o=Math.max(i.row,o),l=Math.max(i.col,l),h=Math.min(i.row,h),c=Math.min(i.col,c)}}));var u=void 0;if(e==a.SELECT_POINT_END)if(i==a.SELECT_EXT_TYPE_R){if(l<this.getMaxColIndex())u=cl(this,$h,_c).call(this,h,l+1,o,l+1);else{if(!(o<this.getMaxRowIndex()))return!1;u=cl(this,$h,_c).call(this,o+1,c,o+1,l)}E.splice(t,0,u)}else if(i==a.SELECT_EXT_TYPE_D){if(!(o<this.getMaxRowIndex()))return!1;u=cl(this,$h,_c).call(this,o+1,c,o+1,l),E.splice(t,0,u)}else i==a.SELECT_EXT_TYPE_L?(u=cl(this,$h,_c).call(this,h,l,o,l),E.remove(t,u)):i==a.SELECT_EXT_TYPE_U&&(u=cl(this,$h,_c).call(this,o,c,o,l),E.remove(t,u));else if(e==a.SELECT_POINT_BEG)if(i==a.SELECT_EXT_TYPE_L){if(c>0)u=cl(this,$h,_c).call(this,h,c-1,o,c-1);else{if(!(h>0))return!1;u=cl(this,$h,_c).call(this,h-1,c,h-1,l)}E.splice(t,0,u)}else if(i==a.SELECT_EXT_TYPE_U){if(!(h>0))return!1;u=cl(this,$h,_c).call(this,h-1,c,h-1,l),E.splice(t,0,u)}else i==a.SELECT_EXT_TYPE_R?(u=cl(this,$h,_c).call(this,h,c,o,c),E.remove(t,u)):i==a.SELECT_EXT_TYPE_D&&(u=cl(this,$h,_c).call(this,h,c,h,l),E.remove(t,u));return!0}return!!n[s].selectElement2(t,e,i)||(e==a.SELECT_POINT_END?cl(this,qh,vc).call(this,t,e,i,s):e==a.SELECT_POINT_BEG?cl(this,Jh,gc).call(this,t,e,i,s):void 0)}},{key:"selectStepElement",value:function(t,e,i,n){var r=this.getVisibleField().find((function(t){return t.findIndex(e)>=0})).getFieldIndex();if(n){if(i==a.SELECT_EXT_TYPE_L||i==a.SELECT_EXT_TYPE_U){if(!(r.row>0))return!1;var s=cl(this,$h,_c).call(this,r.row-1,0,r.row-1,this.getMaxColIndex());E.splice(t,0,s)}else if(i==a.SELECT_EXT_TYPE_R||i==a.SELECT_EXT_TYPE_D){if(!(r.row<this.getMaxRowIndex()))return!1;var o=cl(this,$h,_c).call(this,r.row+1,0,r.row+1,this.getMaxColIndex());E.splice(t,0,o)}}else{var l=cl(this,$h,_c).call(this,r.row,0,r.row,this.getMaxColIndex());E.remove(t,l)}return!0}},{key:"selectHalfElement",value:function(t,e){for(var i=0,n=this.getVisibleField();i<n.length&&!(n[i].findIndex(t)>=0);i++);var r=n[i].getFieldIndex();return e==a.SELECT_POINT_END?cl(this,$h,_c).call(this,r.row-r.rowspan+1,0,this.getMaxRowIndex(),this.getMaxColIndex()):cl(this,$h,_c).call(this,0,0,r.row,this.getMaxColIndex())}},{key:"selectLastElement",value:function(t,e,i){for(var n=[],r=this.getVisibleField(),a=0;a<r.length;a++){var s=r[a];s.getFieldIndex().row==this.getMaxRowIndex()&&(n=[].concat(d(n),d(s.getElements())))}return E.splice(t,0,n),!0}},{key:"selectFirstElement",value:function(t,e,i){for(var n=[],r=this.getVisibleField(),a=0;a<r.length;a++){var s=r[a];0==s.getFieldIndex().row&&(n=[].concat(d(n),d(s.getElements())))}return E.splice(t,0,n),!0}},{key:"findTableFieldInfo",value:function(t,e){console.info("11111111111111111111111111");var i=this.getVisibleField();if(0==e.length){var n=i.findIndex((function(e){return e.findIndex(t)>=0})),r=i[n].findTableFieldInfo(t,e);if(r)return r;var a=cl(this,Kh,dc).call(this,[i[n]]);return Object.assign({field:i[n].getElements(),fields:Ct(this,Ih).map((function(t){return t.getElements()}))},a)}var s=this.findArrayIndex(i,e.at(0),e.at(-1)),o=s[0];if(o==s[1]){var l=i[o].findTableFieldInfo(t,e);if(l)return l}var h=[];i.forEach((function(t){e.findIndex((function(e){return e===t.getElements().at(-1)}))>=0&&h.push(t)}));var c=cl(this,Kh,dc).call(this,h);return Object.assign({fields:Ct(this,Ih).map((function(t){return t.getElements()}))},c)}},{key:"findTableMergeInfo",value:function(t){var e=this.getVisibleField(),i=this.findArrayIndex(e,t.at(0),t.at(-1)),n=i[0];if(n==i[1])return e[n].findTableMergeInfo(t);var r=[];return e.forEach((function(e){t.findIndex((function(t){return t===e.getElements().at(-1)}))>=0&&r.push(e)})),cl(this,tc,Ec).call(this,r)}}]),r}(Kl);function ic(){var t=this,e=0,i=0,n=this.getVisibleField();n.forEach((function(t){var n=t.getFieldIndex();e=Math.max(n.row,e),i=Math.max(n.col,i)})),kt(this,Ph,[]),kt(this,Ah,[]),kt(this,Mh,[]);for(var r=0;r<=i;r++)Ct(this,Ph).push(0);for(var a=0;a<=e;a++)Ct(this,Ah).push(0),Ct(this,Mh).push(0);n.forEach((function(e){var i=e.getFieldSize(),n=e.getFieldIndex();Ct(t,Ah)[n.row]=i.preHeight,Ct(t,Ph)[n.col]=i.preWidth}))}function nc(t){this.getVisibleField().forEach((function(e){e.struct(t)}))}function rc(){var t=this;this.getVisibleField().forEach((function(e){var i=e.getFieldPadding(),n=cl(t,Xh,lc).call(t,e),r=a.TABLE_FIELD_BORDER_SPAC;e.setLineSize(n,0,0),e.setPadding(i[0]+r,i[1]+r,i[2]+r,i[3]+r),e.setMargin(0,0,0,0),e.typeset()}))}function ac(){var t=this;this.getVisibleField().forEach((function(e){var i=e.getFieldIndex(),n=0;i.rowspan>1&&Ct(t,Ah).forEach((function(t,e){e>i.row-i.rowspan&&e<i.row&&(n+=t)})),Ct(t,Ah)[i.row]=Math.max(Ct(t,Ah)[i.row],e.getHeight()-n)}))}function sc(t,e){var i=this.getSegment(),n=this.getVisibleField(),r=0;return n.forEach((function(n){var a=n.getFieldIndex();if(a.row==t&&1==a.rowspan){var s=n.getMargin(),o=n.getPadding(),l=s.marginBot+s.marginTop+o.paddingBot+o.paddingTop+e;n.setSegment(i.segHeight,i.segTop,i.segBottom,l),n.paging(),r=Math.max(n.getHeight(),r)}})),Ct(this,Ah)[t]=Math.max(r,Ct(this,Ah)[t]),(Ct(this,Ah)[t]+e)%(i.segHeight+i.segTop+i.segBottom)}function oc(t){var e=this,i=this.getSegment(),n=this.getVisibleField(),r=0;return n.forEach((function(n){var a=n.getFieldIndex();if(a.row==t&&a.rowspan>1){var s=Ct(e,Dh)[a.row-a.rowspan+1];n.setSegment(i.segHeight,i.segTop,i.segBottom,s),n.paging();for(var o=n.getHeight(),l=a.row-a.rowspan+1;l<a.row;l++)Ct(e,Ah)[l],Ct(e,Mh)[l],Qo("temp");r=Math.max(r,o)}})),Ct(this,Ah)[t]=Math.max(r,Ct(this,Ah)[t]),Ct(this,Ah)[t]}function lc(t){var e=t.getFieldIndex();return y.getListLenValue(Ct(this,Ph),e.col-e.colspan+1,e.col)}function hc(t){var e=t.getFieldIndex();return y.getListLenValue(Ct(this,Ah),e.row-e.rowspan+1,e.row)+y.getListLenValue(Ct(this,Mh),e.row-e.rowspan+2,e.row)}function cc(t){for(var e=this.getMargin(),i=this.getPadding(),n=cl(this,Vh,fc).call(this),r=t.getFieldIndex(),a=e.marginLeft+i.paddingLeft+n,s=0;s<r.col-r.colspan+1;s++)a+=Ct(this,Ph)[s];return a}function uc(t){var e=0;return this.getVisibleField().forEach((function(i){i.getFieldIndex().row==t&&(e=Math.max(i.getLineHeight(),e))})),e}function fc(){return Ct(this,Ih).at(-1).getFieldIndex().indentLeft}function dc(t){var e={};return t.forEach((function(t){var i=t.getFieldIndex();m.isNotUndefined(e.minrow)?e.minrow=Math.min(e.minrow,i.row-i.rowspan+1):e.minrow=i.row-i.rowspan+1,m.isNotUndefined(e.mincol)?e.mincol=Math.min(e.mincol,i.col-i.colspan+1):e.mincol=i.col-i.colspan+1,m.isNotUndefined(e.maxrow)?e.maxrow=Math.max(e.maxrow,i.row):e.maxrow=i.row,m.isNotUndefined(e.maxcol)?e.maxcol=Math.max(e.maxcol,i.col):e.maxcol=i.col})),e}function pc(t,e,i){for(var n=void 0,r=this.getVisibleField(),a=0;a<r.length&&!(r[a].getFieldIndex().row==t&&(n=r[a]).getOffset().offsetX+cl(this,Xh,lc).call(this,n)>e);a++);var s=cl(this,Uh,cc).call(this,n);n.localeLastLineElement(e-s,i)}function gc(t,e,i,n){var r=this.getVisibleField();if(i==a.SELECT_EXT_TYPE_L){if(n>0){var s=cl(this,Qh,yc).call(this,r[n-1].getFieldIndex(),r[n].getFieldIndex());return E.splice(t,0,s),!0}return!1}if(i==a.SELECT_EXT_TYPE_U){var o=r[n].getFieldIndex();if(o.row>0){var l=cl(this,$h,_c).call(this,o.row-1,o.col-o.colspan+1,o.row-1,o.col);return E.splice(t,0,l),!0}return!1}}function vc(t,e,i,n){var r=this.getVisibleField();if(i==a.SELECT_EXT_TYPE_R){if(n<r.length-1){var s=cl(this,Qh,yc).call(this,r[n+1].getFieldIndex(),r[n].getFieldIndex());return E.splice(t,0,s),!0}return!1}if(i==a.SELECT_EXT_TYPE_D){var o=r[n].getFieldIndex();if(o.row<this.getMaxRowIndex()){var l=cl(this,$h,_c).call(this,o.row+1,o.col-o.colspan+1,o.row+1,o.col);return E.splice(t,0,l),!0}return!1}}function _c(t,e,i,n){for(var r=[],a=this.getVisibleField(),s=0;s<a.length;s++){var o=a[s];y.isFieldInsideIndex(o.getFieldIndex(),t,e,i,n)&&r.push(o)}var l=[];return r.forEach((function(t){l=[].concat(d(l),d(t.getElements()))})),l}function yc(t,e){var i=Math.min(t.row,e.row),n=Math.max(t.row,e.row),r=Math.min(t.col,e.col),a=Math.max(t.col,e.col);return cl(this,$h,_c).call(this,i,r,n,a)}function Ec(t){for(var e=this,i=Zn(bt(ec.prototype),"findTableMergeInfo",this).call(this),n=cl(this,Kh,dc).call(this,t),r=function(n){for(var r=function(i){if(t.findIndex((function(t){return y.isFieldIndex(t.getFieldIndex(),n,i)}))<0)return{v:{v:Zn(bt(ec.prototype),"findTableMergeInfo",e).call(e)}}},a=i.mincol;a<=i.maxcol;a++){var s=r(a);if("object"===c(s))return s.v}},a=(i=Object.assign(i,n)).minrow;a<=i.maxrow;a++){var s=r(a);if("object"===c(s))return s.v}var o=0==i.mincol&&i.maxcol==this.getMaxColIndex(),l=0==i.minrow&&i.maxrow==this.getMaxRowIndex();return Ct(this,Ih).forEach((function(t){i.fields.push(t.getElements())})),i.rect=!0,i.arow=o&&!l,i.acol=!o&&l,i.cell=o||l,i.table=o&&l,i}var mc=function(e){mt(r,e);var i=sl(r);function r(e){return t(this,r),i.call(this,e)}return n(r,[{key:"getFieldIndex",value:function(){var t=this.getElements().at(-1);return{row:t.property.row,col:t.property.col,rowspan:t.property.rowspan,colspan:t.property.colspan,indentLeft:t.property.indentLeft,indentRight:t.property.indentRight,visible:t.property.visible,borderHide:t.property.borderHide}}},{key:"getHeight",value:function(){return Zn(bt(r.prototype),"getHeight",this).call(this)}},{key:"getFieldSize",value:function(){var t=this.getElements().at(-1);return{preWidth:t.property.preWidth,preHeight:t.property.preHeight}}},{key:"getFieldPadding",value:function(){return this.getElements().at(-1).property.padding}},{key:"getFieldBorder",value:function(){return this.getElements().at(-1).property.border}},{key:"getLineHeight",value:function(){var t=this.getElements().at(-1),e=a.TABLE_FIELD_PADDING_V+a.TABLE_FIELD_BORDER_SPAC;return Math.max(t.property.preHeight,Zn(bt(r.prototype),"getLineHeight",this).call(this)+e)}}]),r}(Ql);function wc(t,e,i){return function(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}(t,e),function(t,e){if(void 0===t)throw new TypeError("attempted to get private static field before its declaration")}(i),function(t,e){return e.get?e.get.call(t):e.value}(t,i)}var bc=function(){function e(){t(this,e)}return n(e,null,[{key:"draw",value:function(t,i){var n=Object.assign({text:"",style:"0",transparency:30,fontfamily:"",fontsize:3e4},i),r=g.mmConversionPx(wc(this,e,Tc)),a=g.mmConversionPx(wc(this,e,Cc)),s=(wc(this,e,kc)/r).toFixed(10);t.width=wc(this,e,kc),t.height=wc(this,e,Sc),t.getContext("2d").scale(s,s),this.drawCanvas(t,n,r/2,a/2)}},{key:"drawCanvas",value:function(t,e,i,n){var r=t.getContext("2d");r.save(),r.fillStyle="rgba(0,0,0,".concat(e.transparency/100,")"),r.font="".concat(e.fontsize,"px ").concat(e.fontfamily),r.textAlign="center",r.textBaseline="middle","1"==e.style&&(r.translate(i,n),r.rotate(-45*Math.PI/180),r.translate(-i,-n)),r.fillText(e.text,i,n),r.restore()}}]),e}(),Tc={writable:!0,value:2100},Cc={writable:!0,value:2970},kc={writable:!0,value:140},Sc={writable:!0,value:210};function Oc(t,e){Rc(t,e),e.add(t)}function Lc(t,e,i){Rc(t,e),e.set(t,i)}function Rc(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xc(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var Ic=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){return t(this,s),a.apply(this,arguments)}return n(s,[{key:"resetCanvas",value:function(t){if(t){t.height=t.height,t.width=t.width;var e=t.getContext("2d"),i=this.getCurrentRatio();e.scale(i,i),e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high"}}}]),s}(Rt),Pc=new WeakMap,Ac=new WeakMap,Mc=new WeakMap,Dc=new WeakMap,Nc=new WeakMap,Bc=new WeakMap,Wc=new WeakMap,Hc=new WeakMap,Fc=new WeakMap,Yc=new WeakMap,jc=new WeakSet,Xc=new WeakSet,zc=new WeakSet,Uc=new WeakSet,Gc=new WeakSet,Vc=new WeakSet,Kc=new WeakSet,Zc=new WeakSet,Jc=new WeakSet,qc=new WeakSet,$c=new WeakSet,Qc=new WeakSet,tu=new WeakSet,eu=new WeakSet,iu=new WeakSet,nu=new WeakSet,ru=function(){function e(){t(this,e),Oc(this,nu),Oc(this,iu),Oc(this,eu),Oc(this,tu),Oc(this,Qc),Oc(this,$c),Oc(this,qc),Oc(this,Jc),Oc(this,Zc),Oc(this,Kc),Oc(this,Vc),Oc(this,Gc),Oc(this,Uc),Oc(this,zc),Oc(this,Xc),Oc(this,jc),Lc(this,Pc,{writable:!0,value:void 0}),Lc(this,Ac,{writable:!0,value:void 0}),Lc(this,Mc,{writable:!0,value:void 0}),Lc(this,Dc,{writable:!0,value:void 0}),Lc(this,Nc,{writable:!0,value:void 0}),Lc(this,Bc,{writable:!0,value:void 0}),Lc(this,Wc,{writable:!0,value:void 0}),Lc(this,Hc,{writable:!0,value:void 0}),Lc(this,Fc,{writable:!0,value:void 0}),Lc(this,Yc,{writable:!0,value:void 0})}return n(e,[{key:"init",value:function(t,e,i){kt(this,Wc,[]),kt(this,Nc,t),kt(this,Bc,e),kt(this,Fc,0),kt(this,Yc,0),xc(this,jc,au).call(this,i)}},{key:"setPart",value:function(t){kt(this,Hc,t)}},{key:"getExprees",value:function(){return Ct(this,Wc)}},{key:"getData",value:function(){return Ct(this,Bc)}},{key:"translate",value:function(t,e){kt(this,Fc,t),kt(this,Yc,e)}},{key:"addLine",value:function(t,e,i,n,r,s){t+=Ct(this,Fc),i+=Ct(this,Fc);var o=t,l=e+=Ct(this,Yc),h=i,c=n+=Ct(this,Yc);n<e&&(o=i,l=n,h=t,c=e);var u=parseInt(l/Ct(this,Pc)),f=l%Ct(this,Pc),d=o,p=c-l+f,g=h-o+o;if(Ct(this,Hc)==a.CONTENT_PART_BODY)for(var v=Ct(this,Pc)-Ct(this,Dc),_=Ct(this,Mc);p>0;){var y=Ct(this,Pc)*u;xc(this,Xc,su).call(this,d,y+Math.max(_,f),g,y+Math.min(v,p),r,s),xc(this,Jc,du).call(this,u,d,Math.max(_,f),g,Math.min(v,p),r,s),p-=Ct(this,Pc),f=0,u++}else(Ct(this,Hc)==a.CONTENT_PART_HEADER||Ct(this,Hc)==a.CONTENT_PART_FOOTER)&&(xc(this,Xc,su).call(this,o,l,h,c,r,s),xc(this,Jc,du).call(this,u,d,f,g,p,r,s))}},{key:"addLine2",value:function(t,e,i,n,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];t+=Ct(this,Fc),i+=Ct(this,Fc);var o=t,l=e+=Ct(this,Yc),h=i,c=n+=Ct(this,Yc);n<e&&(o=i,l=n,h=t,c=e);var u=parseInt(l/Ct(this,Pc)),f=l%Ct(this,Pc),d=o,p=c-l+f,g=h-o+o;xc(this,Xc,su).call(this,o,l,h,c,r,a,s),xc(this,Jc,du).call(this,u,d,f,g,p,r,a,s)}},{key:"addText",value:function(t,e,i,n,r,a,s,o,l){e+=Ct(this,Fc),i+=Ct(this,Yc);var h=parseInt(i/Ct(this,Pc)),c=i%Ct(this,Pc),u=e;xc(this,zc,ou).call(this,e,i,t,a,n,r,s,o,l),xc(this,qc,pu).call(this,h,u,c,t,a,n,r,s,o,l)}},{key:"addText2",value:function(t,e,i,n,r,a){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0;e+=Ct(this,Fc),i+=Ct(this,Yc),xc(this,zc,ou).call(this,e,i,t,a,n,r,s,o,"",l,h)}},{key:"addImage",value:function(t,e,i,n,r){e+=Ct(this,Fc),i+=Ct(this,Yc);var a=parseInt(i/Ct(this,Pc)),s=i%Ct(this,Pc),o=e;xc(this,Uc,lu).call(this,t,e,i,n,r),xc(this,$c,gu).call(this,a,o,s,t,n,r)}},{key:"addFullRect",value:function(t,e,i,n,r){var a=Ct(this,Fc),s=Ct(this,Yc),o=Ct(this,Nc).getContext("2d");o.save(),o.fillStyle=t,o.fillRect(e+a,i+s,n,r),o.restore()}},{key:"addStrokeRect",value:function(t,e,i,n,r,a){t+=Ct(this,Fc),e+=Ct(this,Yc);var s=parseInt(e/Ct(this,Pc)),o=e%Ct(this,Pc),l=t;xc(this,Gc,hu).call(this,t,e,i,n,r,a),xc(this,Qc,vu).call(this,s,l,o,i,n,r,a)}},{key:"addStrokeEllipse",value:function(t,e,i,n,r,a){t+=Ct(this,Fc),e+=Ct(this,Yc);var s=parseInt(e/Ct(this,Pc)),o=e%Ct(this,Pc),l=t;xc(this,Vc,cu).call(this,t,e,i,n,r,a),xc(this,tu,_u).call(this,s,l,o,i,n,r,a)}},{key:"addStrokeTriangle",value:function(t,e,i,n,r,a,s,o){t+=Ct(this,Fc),e+=Ct(this,Yc),i+=Ct(this,Fc),n+=Ct(this,Yc),r+=Ct(this,Fc),a+=Ct(this,Yc);var l=parseInt(Math.min(e,n,a)/Ct(this,Pc)),h=e%Ct(this,Pc),c=t,u=n%Ct(this,Pc),f=i,d=a%Ct(this,Pc),p=r;xc(this,Zc,fu).call(this,t,e,i,n,r,a,s,o),xc(this,iu,Eu).call(this,l,c,h,f,u,p,d,s,o)}},{key:"addFillEllipse",value:function(t,e,i,n,r,a){t+=Ct(this,Fc),e+=Ct(this,Yc);var s=parseInt(e/Ct(this,Pc)),o=e%Ct(this,Pc),l=t;xc(this,Kc,uu).call(this,t,e,i,n,r,a),xc(this,eu,yu).call(this,s,l,o,i,n,r,a)}},{key:"addWaterMark",value:function(t,e,i){var n=Ct(this,Fc),r=Ct(this,Yc);bc.drawCanvas(Ct(this,Nc),t,e+n,i+r)}},{key:"clearRect",value:function(t,e,i,n){var r=Ct(this,Fc),a=Ct(this,Yc),s=Ct(this,Nc).getContext("2d");s.save(),s.clearRect(t+r,e+a,i,n),s.restore()}},{key:"drawAnchor",value:function(t,e,i,n,r){var a=Ct(this,Fc),s=Ct(this,Yc),o=Ct(this,Nc).getContext("2d");o.save(),o.strokeStyle=t,o.fillStyle=t,o.lineWidth=e,o.beginPath(),o.moveTo(i+a,n+s),o.lineTo(i+a+r,n+s),o.lineTo(i+a+r,n+s-r),o.stroke(),o.beginPath(),o.moveTo(i+a,n),o.lineTo(i+a+r/3,n+s+r/3),o.lineTo(i+a+r/3,n+s-r/3),o.fill(),o.restore()}}]),e}();function au(t){var e=t.getPageSize();kt(this,Pc,e.pxHeight),kt(this,Ac,e.pxWidth),kt(this,Mc,e.pxHeaderHeight),kt(this,Dc,e.pxFooterHeight)}function su(t,e,i,n,r,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],o=Ct(this,Nc).getContext("2d");o.save(),o.strokeStyle=r,o.lineWidth=a,o.setLineDash(s),o.beginPath(),o.moveTo(t,e),o.lineTo(i,n),o.stroke(),o.restore()}function ou(t,e,i,n,r,a,s,o,l){var h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"left",c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"alphabetic",u=Ct(this,Nc).getContext("2d");u.save(),u.imageSmoothingEnabled=!1,u.fillStyle=n,u.textAlign=h,u.textBaseline=c,u.font=xc(this,nu,mu).call(this,i,r,a,s,o,l),u.fillText(i,t,e),u.restore()}function lu(t,e,i,n,r){var a=Ct(this,Nc).getContext("2d");a.save(),a.drawImage(t.view,e,i,n,r),a.restore()}function hu(t,e,i,n,r,a){Ct(this,Fc),Ct(this,Yc);var s=Ct(this,Nc).getContext("2d");s.save(),s.lineWidth=a,s.strokeStyle=r,s.lineCap="round",s.lineJoin="round",s.rect(t,e,i,n),s.stroke(),s.restore()}function cu(t,e,i,n,r,a){var s=Ct(this,Nc).getContext("2d");s.save(),s.lineWidth=a,s.strokeStyle=r,s.beginPath(),s.ellipse(t,e,i,n,0,0,2*Math.PI),s.stroke(),s.restore()}function uu(t,e,i,n,r,a){var s=Ct(this,Nc).getContext("2d");s.save(),s.lineWidth=a,s.fillStyle=r,s.beginPath(),s.ellipse(t,e,i,n,0,0,2*Math.PI),s.fill(),s.restore()}function fu(t,e,i,n,r,a,s,o){var l=Ct(this,Nc).getContext("2d");l.save(),l.lineWidth=o,l.strokeStyle=s,l.beginPath(),l.moveTo(t,e),l.lineTo(i,n),l.lineTo(r,a),l.closePath(),l.stroke(),l.restore()}function du(t,e,i,n,r,a,s,o){Ct(this,Wc).push({cls:"line",pageNum:t,pageX1:e,pageY1:i,pageX2:n,pageY2:r,color:a,weight:s,dash:o})}function pu(t,e,i,n,r,a,s,o,l,h){Ct(this,Wc).push({cls:"text",pageNum:t,pageX:e,pageY:i,code:n,color:r,font:a,size:s,bold:o,italic:l,script:h})}function gu(t,e,i,n,r,a){Ct(this,Wc).push({cls:"image",pageNum:t,pageX:e,pageY:i,code:n.base64,width:r,height:a})}function vu(t,e,i,n,r,a,s){Ct(this,Wc).push({cls:"strokerect",pageNum:t,pageX:e,pageY:i,width:n,height:r,style:a,linewidth:s})}function _u(t,e,i,n,r,a,s){Ct(this,Wc).push({cls:"strokeellipse",pageNum:t,pageX:e,pageY:i,width:n,height:r,style:a,linewidth:s})}function yu(t,e,i,n,r,a,s){Ct(this,Wc).push({cls:"fillellipse",pageNum:t,pageX:e,pageY:i,width:n,height:r,style:a,linewidth:s})}function Eu(t,e,i,n,r,a,s,o,l){Ct(this,Wc).push({cls:"stroketriangle",pageNum:t,pageX1:e,pageY1:i,pageX2:n,pageY2:r,pageX3:a,pageY3:s,style:o,linewidth:l})}function mu(t,e,i,n,r,s){var o=[];return n&&o.push("bold"),r&&o.push("italic"),s==a.SCRIPT_SUB||s==a.SCRIPT_SUP?_.isChineseWord(t)||_.isChineseSymbol(t)?o.push("".concat(i/2,"px")):o.push("".concat(2*i/3,"px")):o.push("".concat(i,"px")),o.push("".concat(e)),o.join(" ")}function wu(t,e){bu(t,e),e.add(t)}function bu(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tu(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}r(ru,"FILTER_FILL_STYLE","rgba(255, 255, 255, 0.59)");var Cu=new WeakMap,ku=new WeakSet,Su=new WeakSet,Ou=new WeakSet,Lu=new WeakSet,Ru=new WeakSet,xu=new WeakSet,Iu=new WeakSet,Pu=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e,i,n,r;t(this,s);for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return wu(yt(e=a.call.apply(a,[this].concat(l))),Iu),wu(yt(e),xu),wu(yt(e),Ru),wu(yt(e),Lu),wu(yt(e),Ou),wu(yt(e),Su),wu(yt(e),ku),r={writable:!0,value:void 0},bu(i=yt(e),n=Cu),n.set(i,r),e}return n(s,[{key:"draw",value:function(t,e,i,n,r){this.resetCanvas(t),kt(this,Cu,[]),Tu(this,ku,Au).call(this,t,n,i,r),Tu(this,Ou,Du).call(this,t,i),Tu(this,Ru,Bu).call(this,t,n)}}]),s}(Ic);function Au(t,e,i,n){var r=this;0==i.length&&G.isRevision(n)&&G.revisionLocation(e,n).forEach((function(e){var i=e._size,n=e._offset,a=n.offsetX,s=n.offsetY+n.height-n.baseLine/2-(i.fontHeight+n.baseLine/2+n.descent),o=n.offsetX+i.width+i.dispersedspac+i.justifyspac,l=n.offsetY+n.height-n.baseLine/2;Tu(r,Su,Mu).call(r,t,a,s,o-a,l-s)}))}function Mu(t,e,i,n,r){var s=t.getContext("2d");s.save(),s.fillStyle=a.COLOR_REVISION_BG,s.fillRect(e,i,n,r),s.restore()}function Du(t,e){var i=this;e.forEach((function(e){var n=e._offset,r=e._size;if(e.property.type==G.TYPE_STRUCT)if(G.isHideCell(e));else{var s=a.STYLE_ANCHOR_WIDTH;Tu(i,Lu,Nu).call(i,t,n.offsetX,n.offsetY,s+r.surplus,n.height)}else e.property.type==G.TYPE_TEXT&&Tu(i,Lu,Nu).call(i,t,n.offsetX,n.offsetY,r.width+r.dispersedspac+r.justifyspac,n.height)}))}function Nu(t,e,i,n,r){var s=t.getContext("2d");s.save(),s.fillStyle=a.COLOR_SELECT_BG,s.fillRect(e,i,n,r),s.restore(),Ct(this,Cu).push({x:e,y:i,w:n,h:r})}function Bu(t,e){var i=this;A.isFocussable()&&(e.header.forEach((function(e){e.modular.type==G.MODULAR_TYPE_COMP&&Tu(i,xu,Wu).call(i,t,e)})),e.footer.forEach((function(e){e.modular.type==G.MODULAR_TYPE_COMP&&Tu(i,xu,Wu).call(i,t,e)})),e.body.forEach((function(e){e.modular.type==G.MODULAR_TYPE_COMP&&Tu(i,xu,Wu).call(i,t,e)})))}function Wu(t,e){var i=e._offset,n=e._size;if([G.COMP_CLASS_TEXTBOX].includes(e.modular.dataClass));else{var r=n.fontHeight+n.descent;Tu(this,Iu,Hu).call(this,t,i.offsetX,i.offsetY+i.height-i.baseLine-r,n.width+n.dispersedspac+n.justifyspac,r)}}function Hu(t,e,i,n,r){var s=t.getContext("2d");s.save(),s.fillStyle=a.COLOR_COMP_BG,s.fillRect(e,i,n,r),s.restore()}function Fu(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Yu(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var ju=new WeakSet,Xu=new WeakSet,zu=new WeakSet,Uu=new WeakSet,Gu=new WeakSet,Vu=new WeakSet,Ku=new WeakSet,Zu=new WeakSet,Ju=new WeakSet,qu=new WeakSet,$u=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e;t(this,s);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return Fu(yt(e=a.call.apply(a,[this].concat(n))),qu),Fu(yt(e),Ju),Fu(yt(e),Zu),Fu(yt(e),Ku),Fu(yt(e),Vu),Fu(yt(e),Gu),Fu(yt(e),Uu),Fu(yt(e),zu),Fu(yt(e),Xu),Fu(yt(e),ju),e}return n(s,[{key:"draw",value:function(t,e,i,n,r,a,s,o,l,h){this.resetCanvas(t),Yu(this,ju,Qu).call(this,t,n,r,i,o,h),Yu(this,Xu,tf).call(this,t,l),Yu(this,zu,ef).call(this,t,a),Yu(this,Uu,nf).call(this,t,s)}}]),s}(Ic);function Qu(t,e,i,n,r,s){if(0==n.length&&s){var o=t.getContext("2d"),l=e._offset,h=e._size,c=1.2*r.size;e===i?(o.beginPath(),o.moveTo(l.offsetX,l.offsetY+l.height-l.baseLine),o.lineTo(l.offsetX,l.offsetY+l.height-l.baseLine-c),o.strokeStyle=a.COLOR_CURSOR,o.lineWidth=a.WIDTH_CURSOR,o.setLineDash(a.LINE_SOLID),o.stroke()):(o.beginPath(),o.moveTo(l.offsetX+h.width,l.offsetY+l.height-l.baseLine),o.lineTo(l.offsetX+h.width,l.offsetY+l.height-l.baseLine-c),o.strokeStyle=a.COLOR_CURSOR,o.lineWidth=a.WIDTH_CURSOR,o.setLineDash(a.LINE_SOLID),o.stroke())}}function tf(t,e){var i=t.getContext("2d"),n=e.getObject();if(e.getType()==a.DRAG_VIEW_LINE_H)e.isActive()&&(i.beginPath(),i.moveTo($u.LINE_MIN_LEN,n.offsetY),i.lineTo($u.LINE_MAX_LEN,n.offsetY),i.strokeStyle=a.COLOR_CURSOR,i.lineWidth=a.WIDTH_CURSOR,i.setLineDash(a.LINE_DASHED_1),i.stroke());else if(e.getType()==a.DRAG_VIEW_LINE_V)e.isActive()&&(i.beginPath(),i.moveTo(n.offsetX,$u.LINE_MIN_LEN),i.lineTo(n.offsetX,$u.LINE_MAX_LEN),i.strokeStyle=a.COLOR_CURSOR,i.lineWidth=a.WIDTH_CURSOR,i.setLineDash(a.LINE_DASHED_1),i.stroke());else if(e.getType()==a.DRAG_VIEW_IMAGE&&e.isActive()){var r=n._drag_size,s=n._drag_offset;i.save(),i.globalAlpha=.5,i.drawImage(n.extend.view,s.offsetX,s.offsetY,r.width,r.height),i.restore()}}function ef(t,e){if(G.isImageBlock(e))Yu(this,Gu,rf).call(this,t,e);else if(G.isLineObject(e)){var i=e.property,n=e._drag_offset;Yu(this,Vu,af).call(this,t,n.x1,n.y1,n.x2,n.y2,i.lineWidth,i.lineColor)}else if(G.isRectObject(e)){var r=e.property,a=e._drag_offset;Yu(this,Ku,sf).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor),r.classify==G.OBJECT_SHAPE_RECT?Yu(this,Zu,of).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor):r.classify==G.OBJECT_SHAPE_ELLIPSE?Yu(this,Ju,lf).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor):r.classify==G.OBJECT_SHAPE_TRIANGLE&&Yu(this,qu,hf).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor)}}function nf(t,e){if(G.isLineObject(e)){var i=e.property,n=e._drag_offset;Yu(this,Vu,af).call(this,t,n.x1,n.y1,n.x2,n.y2,i.lineWidth,i.lineColor)}else if(G.isRectObject(e)){var r=e.property,a=e._drag_offset;Yu(this,Ku,sf).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor),r.classify==G.OBJECT_SHAPE_RECT?Yu(this,Zu,of).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor):r.classify==G.OBJECT_SHAPE_ELLIPSE?Yu(this,Ju,lf).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor):r.classify==G.OBJECT_SHAPE_TRIANGLE&&Yu(this,qu,hf).call(this,t,a.x1,a.y1,a.x2,a.y2,r.lineWidth,r.lineColor)}}function rf(t,e){var i=e._drag_size,n=e._drag_offset,r=t.getContext("2d");r.save(),r.fillStyle=a.COLOR_BLOCK_DRAG,v.getBlockDragRect(n,i,a.LEN_BLOCK_DRAG).forEach((function(t){r.fillRect(t.x,t.y,t.w,t.h)})),r.setLineDash(a.LINE_DASHED_1),r.strokeStyle=a.COLOR_BLOCK_BORDER,r.rect(n.offsetX,n.offsetY,i.width,i.height),r.stroke(),r.restore()}function af(t,e,i,n,r,s,o){var l=t.getContext("2d");l.save();var h=v.getLineObjectDrag(e,i,n,r,a.LEN_BLOCK_DRAG);l.fillStyle=a.COLOR_BLOCK_DRAG,h.forEach((function(t){l.fillRect(t.x,t.y,t.w,t.h)})),l.globalAlpha=.5,l.moveTo(e,i),l.lineTo(n,r),l.lineWidth=s,l.strokeStyle=o,l.lineJoin="round",l.lineCap="round",l.stroke(),l.restore()}function sf(t,e,i,n,r,s,o){var l=t.getContext("2d");l.save(),l.globalAlpha=.5,v.getRectObjectDrag(e,i,n,r,a.LEN_BLOCK_DRAG).forEach((function(t){l.fillRect(t.x,t.y,t.w,t.h)})),l.lineWidth=s,l.strokeStyle=o,l.stroke(),l.restore()}function of(t,e,i,n,r,a,s){var o=t.getContext("2d");o.save(),o.globalAlpha=.5,o.lineWidth=a,o.strokeStyle=s,o.rect(e,i,n-e,r-i),o.stroke(),o.restore()}function lf(t,e,i,n,r,a,s){var o=t.getContext("2d"),l=(n-e)/2,h=(r-i)/2;o.save(),o.globalAlpha=.5,o.lineWidth=a,o.strokeStyle=s,o.beginPath(),o.ellipse(e+l,i+h,Math.abs(l),Math.abs(h),0,0,2*Math.PI),o.stroke(),o.restore()}function hf(t,e,i,n,r,a,s){var o=t.getContext("2d"),l=(n-e)/2;o.save(),o.globalAlpha=.5,o.lineWidth=a,o.strokeStyle=s,o.beginPath(),o.moveTo(e+l,i),o.lineTo(n,r),o.lineTo(e,r),o.closePath(),o.stroke(),o.restore()}function cf(t,e,i){return ff(t,e),i}function uf(t,e,i){return ff(t,e),function(t,e){if(void 0===t)throw new TypeError("attempted to get private static field before its declaration")}(i),function(t,e){return e.get?e.get.call(t):e.value}(t,i)}function ff(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}r($u,"LINE_MIN_LEN",0),r($u,"LINE_MAX_LEN",9999999999);var df=function(){function e(){t(this,e)}return n(e,null,[{key:"getStr",value:function(){var t=this,i=[uf(this,e,gf),uf(this,e,vf),uf(this,e,_f),uf(this,e,yf),uf(this,e,Ef),uf(this,e,mf),uf(this,e,wf),uf(this,e,bf),uf(this,e,Tf),uf(this,e,Cf),uf(this,e,kf),uf(this,e,Sf),uf(this,e,Of),uf(this,e,Lf),uf(this,e,Rf)].map((function(i){return cf(t,e,pf).call(t,i+uf(t,e,xf))})).join(""),n=[uf(this,e,If),uf(this,e,Pf),uf(this,e,Af),uf(this,e,Mf),uf(this,e,Df),uf(this,e,Nf),uf(this,e,Bf),uf(this,e,Wf),uf(this,e,Hf),uf(this,e,Ff),uf(this,e,Yf),uf(this,e,jf),uf(this,e,Xf),uf(this,e,zf)],r=[uf(this,e,Uf),uf(this,e,Gf),uf(this,e,Vf),uf(this,e,Kf),uf(this,e,Zf),uf(this,e,Jf),uf(this,e,qf),uf(this,e,$f),uf(this,e,Qf),uf(this,e,td),uf(this,e,ed),uf(this,e,id),uf(this,e,nd),uf(this,e,rd),uf(this,e,ad),uf(this,e,sd),uf(this,e,od),uf(this,e,ld),uf(this,e,hd),uf(this,e,cd),uf(this,e,ud),uf(this,e,fd)];return[i,n.map((function(i){return cf(t,e,pf).call(t,i+uf(t,e,dd))})).join("")+r.map((function(i){return cf(t,e,pf).call(t,i+uf(t,e,dd))})).join("")]}}]),e}();function pf(t){return String.fromCharCode(t)}var gf={writable:!0,value:30},vf={writable:!0,value:51},_f={writable:!0,value:47},yf={writable:!0,value:49},Ef={writable:!0,value:54},mf={writable:!0,value:19},wf={writable:!0,value:50},bf={writable:!0,value:55},Tf={writable:!0,value:66},Cf={writable:!0,value:61},kf={writable:!0,value:64},Sf={writable:!0,value:25166},Of={writable:!0,value:26365},Lf={writable:!0,value:25853},Rf={writable:!0,value:25295},xf={writable:!0,value:50},If={writable:!0,value:28},Pf={writable:!0,value:29},Af={writable:!0,value:51},Mf={writable:!0,value:52},Df={writable:!0,value:53},Nf={writable:!0,value:54},Bf={writable:!0,value:55},Wf={writable:!0,value:56},Hf={writable:!0,value:57},Ff={writable:!0,value:58},Yf={writable:!0,value:31},jf={writable:!0,value:32},Xf={writable:!0,value:33},zf={writable:!0,value:34},Uf={writable:!0,value:35},Gf={writable:!0,value:62},Vf={writable:!0,value:63},Kf={writable:!0,value:64},Zf={writable:!0,value:65},Jf={writable:!0,value:66},qf={writable:!0,value:67},$f={writable:!0,value:68},Qf={writable:!0,value:69},td={writable:!0,value:70},ed={writable:!0,value:59},id={writable:!0,value:60},nd={writable:!0,value:30},rd={writable:!0,value:36},ad={writable:!0,value:37},sd={writable:!0,value:45},od={writable:!0,value:46},ld={writable:!0,value:47},hd={writable:!0,value:48},cd={writable:!0,value:49},ud={writable:!0,value:50},fd={writable:!0,value:61},dd={writable:!0,value:20};function pd(t,e){_d(t,e),e.add(t)}function gd(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function vd(t,e,i){_d(t,e),e.set(t,i)}function _d(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}var yd=new WeakMap,Ed=new WeakMap,md=new WeakMap,wd=new WeakMap,bd=new WeakMap,Td=new WeakMap,Cd=new WeakMap,kd=function(e){mt(s,e);var i,r,a=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function s(){var e;return t(this,s),vd(yt(e=a.call(this)),yd,{writable:!0,value:void 0}),vd(yt(e),Ed,{writable:!0,value:void 0}),vd(yt(e),md,{writable:!0,value:void 0}),vd(yt(e),wd,{writable:!0,value:void 0}),vd(yt(e),bd,{writable:!0,value:void 0}),vd(yt(e),Td,{writable:!0,value:void 0}),vd(yt(e),Cd,{writable:!0,value:void 0}),kt(yt(e),yd,new Rp),kt(yt(e),md,new Fp),kt(yt(e),wd,new Vd),kt(yt(e),Ed,new vp),kt(yt(e),Cd,new Xp),kt(yt(e),bd,new ru),kt(yt(e),Td,new ru),e}return n(s,[{key:"draw",value:function(t,e,i,n,r,a){this.resetCanvas(t),this.resetCanvas(e),this.drawCanvas(t,e,i,n,r,a)}},{key:"drawCanvas",value:function(t,e,i,n,r,a){var s=A.getConfig().license,o=A.getConfig().licensee;Ct(this,bd).init(t,i,n),Ct(this,Td).init(e,i,n),Ct(this,yd).init(Ct(this,bd),Ct(this,Td),s,o),Ct(this,md).init(Ct(this,bd),Ct(this,Td),s,o),Ct(this,wd).init(Ct(this,bd),Ct(this,Td),s,o),Ct(this,Ed).init(Ct(this,bd),Ct(this,Td),s,o),Ct(this,Cd).init(Ct(this,bd),Ct(this,Td),s,o),Ct(this,md).drawBelow(n),Ct(this,wd).drawBody(n),Ct(this,md).drawAbove(n),Ct(this,wd).clearContent(n),Ct(this,wd).drawNumber(n,i.page),Ct(this,wd).drawHeaderFooter(n),Ct(this,Ed).drawFilter(n,r),Ct(this,yd).draw(n),Ct(this,Cd).draw(i,n,a),i.info.canvasdpi=g.getHtmlDpi()[0],i.info.pagecount=n.getModelSize().pageCount,i.view=Ct(this,bd).getExprees()}}]),s}(Ic),Sd=new WeakMap,Od=new WeakMap,Ld=new WeakMap,Rd=new WeakMap,xd=new WeakSet,Id=new WeakSet,Pd=new WeakSet,Ad=new WeakSet,Md=new WeakSet,Dd=new WeakSet,Nd=new WeakSet,Bd=new WeakSet,Wd=new WeakSet,Hd=new WeakSet,Fd=new WeakSet,Yd=new WeakSet,jd=new WeakSet,Xd=new WeakSet,zd=new WeakSet,Ud=new WeakSet,Gd=new WeakSet,Vd=function(){function e(){t(this,e),pd(this,Gd),pd(this,Ud),pd(this,zd),pd(this,Xd),pd(this,jd),pd(this,Yd),pd(this,Fd),pd(this,Hd),pd(this,Wd),pd(this,Bd),pd(this,Nd),pd(this,Dd),pd(this,Md),pd(this,Ad),pd(this,Pd),pd(this,Id),pd(this,xd),vd(this,Sd,{writable:!0,value:void 0}),vd(this,Od,{writable:!0,value:void 0}),vd(this,Ld,{writable:!0,value:void 0}),vd(this,Rd,{writable:!0,value:void 0})}return n(e,[{key:"init",value:function(t,e,i,n){kt(this,Sd,t),kt(this,Od,e),kt(this,Ld,i),kt(this,Rd,n)}},{key:"drawBody",value:function(t){Ct(this,Sd).setPart(a.CONTENT_PART_BODY),Ct(this,Od).setPart(a.CONTENT_PART_BODY),gd(this,xd,Kd).call(this,t.getBodyModel())}},{key:"drawHeaderFooter",value:function(t){for(var e=t.getModelSize(),i=t.getPageSize(),n=0;n<e.pageCount;n++){var r=n*i.pxHeight;Ct(this,Sd).translate(0,r),Ct(this,Sd).setPart(a.CONTENT_PART_HEADER),Ct(this,Od).setPart(a.CONTENT_PART_HEADER),gd(this,xd,Kd).call(this,t.getHeaderModel()),Ct(this,Sd).setPart(a.CONTENT_PART_FOOTER),Ct(this,Od).setPart(a.CONTENT_PART_FOOTER),gd(this,xd,Kd).call(this,t.getFooterModel()),gd(this,Xd,op).call(this,t,n),Ct(this,Sd).translate(0,0)}}},{key:"drawNumber",value:function(t,e){if("0"!=e.number)for(var i=t.getModelSize(),n=t.getPageSize(),r=0;r<i.pageCount;r++){var s={c:i.pageCount,n:r+1},o=r*n.pxHeight+n.pxHeight-n.pxFooterBottom,l=b.replaceVariables(e.format,s),h=l.length*e.size,c=parseInt(e.size),u=n.pxLeft;e.align==a.ALIGN_CENTER?u=(n.pxWidth-h)/2:e.align==a.ALIGN_RIGHT&&(u=n.pxWidth-n.pxRight-h),Ct(this,Sd).addText(l,u,o+c,e.family,e.size,"#000000",!1,!1,a.SCRIPT_NOR)}}},{key:"clearContent",value:function(t){for(var e=t.getModelSize(),i=t.getPageSize(),n=0;n<e.pageCount;n++){var r=n*i.pxHeight;Ct(this,Sd).clearRect(0,r,i.pxWidth,i.pxHeaderHeight),Ct(this,Sd).clearRect(0,r+i.pxHeight-i.pxFooterHeight,i.pxWidth,i.pxFooterHeight)}}}]),e}();function Kd(t){var e=this;t.getChapters().forEach((function(t){t.getType()==bl.TYPE_MODEL_PARAG?gd(e,Id,Zd).call(e,t):t.getType()==bl.TYPE_MODEL_TABLE&&gd(e,Pd,Jd).call(e,t)}))}function Zd(t){var e=this;t.getLines().forEach((function(t){gd(e,Ad,qd).call(e,t)}))}function Jd(t){var e=this,i=t.getVisibleField(),n=t.getTableSize();i.forEach((function(t){gd(e,Md,$d).call(e,t,n,i),gd(e,xd,Kd).call(e,t)}))}function qd(t){var e=this;t.elements.forEach((function(t,i){t.property.type==G.TYPE_STRUCT?t.property.classify==G.CLS_DIVDER?gd(e,Nd,tp).call(e,t):gd(e,Dd,Qd).call(e,t):t.property.classify==G.CLS_TEXT_CHAR?gd(e,Bd,ep).call(e,t):t.property.classify==G.CLS_TEXTBOX_BORDER?gd(e,Hd,np).call(e,t):t.property.classify==G.CLS_EXPRE?gd(e,jd,sp).call(e,t):t.property.classify==G.CLS_CHECKBOX_BOTTON?gd(e,Fd,rp).call(e,t):t.property.classify==G.CLS_RADIOBOX_BOTTON?gd(e,Yd,ap).call(e,t):G.isImageBlock(t)&&gd(e,Wd,ip).call(e,t)}))}function $d(t,e,i){var n=t.getFieldIndex();if(n.visible){var r=t.getOffset(),a=t.getFieldBorder(),s=y.getListLenValue(e.colWidths,n.col-n.colspan+1,n.col),o=y.getListLenValue(e.rowHeights,n.row-n.rowspan+1,n.row)+y.getListLenValue(e.rowPagings,n.row-n.rowspan+2,n.row);if(a[0].visible)for(var l=r.offsetX,h=r.offsetY-a[0].width/2,c=r.offsetY-a[0].width/2,u=0;u<n.colspan;u++){var f=e.colWidths[n.col-n.colspan+1+u],d=y.getAdjoinCellBorder(i,n.row-n.rowspan,n.col-n.colspan+1+u);if(d){var p=d.getFieldBorder();(!p[2].visible||p[2].width<a[0].width)&&Ct(this,Sd).addLine(l,h,l+f,c,a[0].color,a[0].width)}else Ct(this,Sd).addLine(l,h,l+f,c,a[0].color,a[0].width);l+=f}if(a[1].visible)for(var g=r.offsetY,v=r.offsetX+s-a[1].width/2,_=r.offsetX+s-a[1].width/2,E=0;E<n.rowspan;E++){var m=e.rowHeights[n.row-n.rowspan+1+E],w=isNaN(e.rowPagings[n.row-n.rowspan+2+E])?0:e.rowPagings[n.row-n.rowspan+2+E],b=y.getAdjoinCellBorder(i,n.row-n.rowspan+1+E,n.col+1);if(b){var T=b.getFieldBorder();(!T[3].visible||T[3].width<=a[1].width)&&Ct(this,Sd).addLine(v,g,_,g+m+w,a[1].color,a[1].width)}else Ct(this,Sd).addLine(v,g,_,g+m+w,a[1].color,a[1].width);g+=m+w}if(a[2].visible)for(var C=r.offsetX,k=r.offsetY-a[2].width/2+o,S=r.offsetY-a[2].width/2+o,O=0;O<n.colspan;O++){var L=e.colWidths[n.col-n.colspan+1+O],R=y.getAdjoinCellBorder(i,n.row+1,n.col-n.colspan+1+O);if(R){var x=R.getFieldBorder();(!x[0].visible||x[0].width<=a[2].width)&&Ct(this,Sd).addLine(C,k,C+L,S,a[2].color,a[2].width)}else Ct(this,Sd).addLine(C,k,C+L,S,a[2].color,a[2].width);C+=L}if(a[3].visible)for(var I=r.offsetY,P=r.offsetX-a[3].width/2,A=r.offsetX-a[3].width/2,M=0;M<n.rowspan;M++){var D=e.rowHeights[n.row-n.rowspan+1+M],N=isNaN(e.rowPagings[n.row-n.rowspan+2+M])?0:e.rowPagings[n.row-n.rowspan+2+M],B=y.getAdjoinCellBorder(i,n.row-n.rowspan+1+M,n.col-n.colspan);if(B){var W=B.getFieldBorder();(!W[1].visible||W[1].width<a[3].width)&&Ct(this,Sd).addLine(P,I,A,I+D+N,a[3].color,a[3].width)}else Ct(this,Sd).addLine(P,I,A,I+D+N,a[3].color,a[3].width);I+=D+N}}}function Qd(t){}function tp(t){var e=t._offset,i=t._size,n=a.COLOR_DIVDER,r=a.WIDTH_DIVDER_1;if(t.property.divderType.toString().startsWith("1")){var s=[];"11"==t.property.divderType||("12"==t.property.divderType?s=a.LINE_DASHED_1:"13"==t.property.divderType?s=a.LINE_DASHED_2:"14"==t.property.divderType&&(s=a.LINE_DASHED_3));var o=e.offsetX,l=e.offsetY+e.height/2,h=e.offsetX+i.width,c=e.offsetY+e.height/2;Ct(this,Sd).addLine2(o,l,h,c,n,r,s)}else if(t.property.divderType.toString().startsWith("2")){var u=[];"21"==t.property.divderType||"22"==t.property.divderType&&(u=[20,20]);var f=e.offsetY+(e.height-3*a.WIDTH_DIVDER_1)/2,d=f+2*a.WIDTH_DIVDER_1,p=e.offsetX,g=f,v=e.offsetX+i.width,_=f;Ct(this,Sd).addLine2(p,g,v,_,n,r,u),p=e.offsetX,g=d,v=e.offsetX+i.width,_=d,Ct(this,Sd).addLine2(p,g,v,_,n,r,u)}}function ep(t){var e=t._size,i=t._offset,n=t.property.code,r=t.textStyle.color,s=t.textStyle.font,o=t.textStyle.size,l=t.textStyle.bold,h=t.textStyle.italic,c=t.textStyle.script;if(("1"==t.modular.revision||"2"==t.modular.revision)&&(r=a.COLOR_REVISION_WORD),t.textStyle.script==a.SCRIPT_SUP){var u=i.offsetX,f=i.offsetY+i.height-i.baseLine-i.descent-e.fontHeight/2;t.property.placeholder?Ct(this,Od).addText(n,u,f,s,o,a.COLOR_TEXTBOX_PHR,l,h,c):Ct(this,Sd).addText(n,u,f,s,o,r,l,h,c)}else{var d=i.offsetX,p=i.offsetY+i.height-i.baseLine-i.descent;t.property.placeholder?Ct(this,Od).addText(n,d,p,s,o,a.COLOR_TEXTBOX_PHR,l,h,c):Ct(this,Sd).addText(n,d,p,s,o,r,l,h,c)}if(t.textStyle.underline){var g=a.WIDTH_UNDERLINE,v=t.textStyle.color,_=i.offsetX,y=i.offsetY+i.height-i.baseLine,E=i.offsetX+e.width+e.dispersedspac+e.justifyspac,m=i.offsetY+i.height-i.baseLine;Ct(this,Sd).addLine2(_,y,E,m,v,g)}if("2"==t.modular.revision){var w=a.WIDTH_STRIKETHROUGH,b=i.offsetX,T=i.offsetY+i.height-i.baseLine-i.descent-e.fontHeight/3,C=i.offsetX+e.width+e.dispersedspac+e.justifyspac,k=i.offsetY+i.height-i.baseLine-i.descent-e.fontHeight/3;Ct(this,Sd).addLine2(b,T,C,k,r,w)}else if(t.textStyle.strikethrough){var S=a.WIDTH_STRIKETHROUGH,O=i.offsetX,L=i.offsetY+i.height-i.baseLine-i.descent-e.fontHeight/3,R=i.offsetX+e.width+e.dispersedspac+e.justifyspac,x=i.offsetY+i.height-i.baseLine-i.descent-e.fontHeight/3;Ct(this,Sd).addLine2(O,L,R,x,r,S)}if(t.modular.type==G.MODULAR_TYPE_COMP){var I=G.getResourceCompInfo(Ct(this,Sd).getData(),t.modular.dataID);if(t.modular.dataClass==G.COMP_CLASS_TEXTBOX&&I.property.border){var P=a.WIDTH_COMP_BORDER,A=a.COLOR_COMP_BR,M=i.offsetX,D=i.offsetY+30,N=i.offsetX+e.width+e.dispersedspac+e.justifyspac,B=i.offsetY+i.height-30;Ct(this,Sd).addLine2(M,D,N,D,A,P),Ct(this,Sd).addLine2(M,B,N,B,A,P)}}}function ip(t){var e=t._size,i=t._offset;Ct(this,Sd).addImage(t.extend,i.offsetX,i.offsetY,e.width,e.height)}function np(t){var e=a.WIDTH_COMP_BORDER,i=a.COLOR_COMP_BR,n=t._size,r=t._offset,s=r.offsetY+30,o=r.offsetY+r.height-30,l=G.getResourceCompInfo(Ct(this,Sd).getData(),t.modular.dataID),h=A.getConfig().textBorderColor;if("0"==t.property.code){var c=r.offsetX+n.width/2,u=r.offsetX+n.width;l.property.border?(Ct(this,Sd).addLine2(c,s,c,o,i,e),Ct(this,Sd).addLine2(c,s,u,s,i,e),Ct(this,Sd).addLine2(c,o,u,o,i,e)):(Ct(this,Od).addLine2(c,s,c,o,h,e),Ct(this,Od).addLine2(c,s,u,s,h,e),Ct(this,Od).addLine2(c,o,u,o,h,e))}else if("1"==t.property.code){var f=r.offsetX,d=r.offsetX+n.width/2;l.property.border?(Ct(this,Sd).addLine2(d,s,d,o,i,e),Ct(this,Sd).addLine2(f,s,d,s,i,e),Ct(this,Sd).addLine2(f,o,d,o,i,e)):(Ct(this,Od).addLine2(d,s,d,o,h,e),Ct(this,Od).addLine2(f,s,d,s,h,e),Ct(this,Od).addLine2(f,o,d,o,h,e))}}function rp(t){var e=a.WIDTH_COMP_BORDER,i=a.COLOR_COMP_BR,n=t.textStyle.size,r=t._size,s=t._offset,o=s.offsetY+s.height-s.baseLine,l=o-n,h=s.offsetX+parseInt(.2*n),c=s.offsetX+r.width-parseInt(.2*n),u=c-h,f=o-l;Ct(this,Sd).addStrokeRect(h,l,u,f,i,e),t.property.code==a.VALUE_BOOL_TRUE&&(Ct(this,Sd).addLine2(h,o-f/2,h+u/3,o,i,e),Ct(this,Sd).addLine2(h+u/3,o,c,l,i,e))}function ap(t){var e=a.WIDTH_COMP_BORDER,i=a.COLOR_COMP_BR,n=t.textStyle.size,r=t._size,s=t._offset,o=s.offsetY+s.height-s.baseLine,l=o-n,h=s.offsetX+parseInt(.2*n),c=(s.offsetX+r.width-parseInt(.2*n)-h)/2,u=(o-l)/2;Ct(this,Sd).addStrokeEllipse(h+c,l+u,c,u,i,e),G.getResourceCompInfo(Ct(this,Sd).getData(),t.modular.dataID).property.value==t.property.code&&Ct(this,Sd).addFillEllipse(h+c,l+u,c/2,u/2,i,e)}function sp(t){switch(t.extend.type){case G.EXP_MH:gd(this,zd,lp).call(this,t);break;case G.EXP_TM:gd(this,Ud,hp).call(this,t);break;case G.EXP_FN:gd(this,Gd,cp).call(this,t)}}function op(t,e){var i=t.getHeaderModel(),n=t.getPageSize();if(A.getConfig().headerDivider&&i.getElements().length>1){var r=i.getHeight();Ct(this,Sd).addLine2(n.pxLeft,r,n.pxWidth-n.pxRight,r,a.COLOR_HEADER_LINE,a.WIDTH_HEADER_LINE)}}function lp(t){var e=t.extend,i=t._size,n=t._offset,r=t.textStyle.color,s=t.textStyle.font,o=parseInt(t.textStyle.size),l=n.offsetX,h=n.offsetY+n.height-n.baseLine,c=h-i.fontHeight/2+o/2,u=h-i.fontHeight/2,f=h-i.fontHeight/2+o,d="".concat(e.field7,"岁"),p="".concat(e.field3,"-").concat(e.field4),g="".concat(e.field5,"-").concat(e.field6),v="".concat(e.field8),_="".concat(e.field2),y=p.length>g.length?p:g,E="0"==e.field1?v:d;Ct(this,Sd).addText("".concat(e.field2,"岁"),l,c,s,o,r,!1,!1,a.SCRIPT_NOR);var m=l+parseInt(o*(_.length+2)/2),w=m+parseInt(o*y.length/2);Ct(this,Sd).addText(p,m,u,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText(g,m,f,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addLine2(m,u,w,u,r,a.WIDTH_EXP_LINE),Ct(this,Sd).addText(E,w,c,s,o,r,!1,!1,a.SCRIPT_NOR)}function hp(t){var e=this,i=t.extend,n=t._size,r=t._offset,s=t.textStyle.color,o=t.textStyle.font,l=parseInt(t.textStyle.size),h=r.offsetX,c=r.offsetX+n.width,u=r.offsetY+r.height-n.baseLine,f=u-n.fontHeight,d=function(t){var e=0;return t.forEach((function(t){t.show&&("r"==t.numerary||"l"==t.numerary?e+=parseInt(3*l/2+1*l/3):e+=l/2,t.surface.length>0&&(e+=t.surface.join(",").length*l*1/3))})),e},p=function(t,i,n){var r=0;t.forEach((function(t){t.show&&("r"==t.numerary?(Ct(e,Sd).addText("(".concat(t.name),i+r,n,o,l,s,!1,!1,a.SCRIPT_NOR),r+=parseInt(l),Ct(e,Sd).addText("S",i+r,n-l/2,o,l,s,!1,!1,a.SCRIPT_SUP),r+=parseInt(1*l/3),Ct(e,Sd).addText(")",i+r,n,o,l,s,!1,!1,a.SCRIPT_NOR),r+=parseInt(l/2)):"l"==t.numerary?(Ct(e,Sd).addText("(",i+r,n,o,l,s,!1,!1,a.SCRIPT_NOR),r+=parseInt(l/2),Ct(e,Sd).addText("S",i+r,n-l/2,o,l,s,!1,!1,a.SCRIPT_SUP),r+=parseInt(1*l/3),Ct(e,Sd).addText("".concat(t.name,")"),i+r,n,o,l,s,!1,!1,a.SCRIPT_NOR),r+=parseInt(l)):(Ct(e,Sd).addText("".concat(t.name),i+r,n,o,l,s,!1,!1,a.SCRIPT_NOR),r+=l/2),t.surface.length>0&&(Ct(e,Sd).addText("".concat(t.surface.join(",")),i+r,n-l/2,o,l,s,!1,!1,a.SCRIPT_SUP),r+=t.surface.join(",").length*l/3))}))},g=d(i.top.left),v=d(i.bot.left),_=h+l/4,y=_+Math.max(g,v)+l/4,E=y+l/4,m=u-n.fontHeight/2,w=m-.3*l,b=u-.1*l;p(i.top.left,_,w),p(i.top.right,E,w),p(i.bot.left,_,b),p(i.bot.right,E,b),Ct(this,Sd).addLine2(h,m,c,m,s,a.WIDTH_EXP_LINE),Ct(this,Sd).addLine2(y,f,y,u,s,a.WIDTH_EXP_LINE)}function cp(t){var e=t.extend,i=t._size,n=t._offset,r=t.textStyle.color,s=t.textStyle.font,o=parseInt(t.textStyle.size),l=n.offsetX,h=(n.offsetX,i.width,n.offsetY+n.height-i.baseLine),c=h-i.fontHeight,u=l+.1*o,f=u+o/2+.1*o,d=f+o/2+.1*o,p=d+.1*o,g=p+o/2+.1*o,v=h-o,_=v-o,y=function(t){return t?"+":"-"};Ct(this,Sd).addText(y(e.field1),f,_,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText(y(e.field2),p,_,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText(y(e.field3),f,v,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText(y(e.field4),p,v,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText(y(e.field5),f,h,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText(y(e.field6),p,h,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText("-",u,v,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addText("-",g,v,s,o,r,!1,!1,a.SCRIPT_NOR),Ct(this,Sd).addLine2(d,h,d,c,r,a.WIDTH_EXP_LINE)}var up=new WeakMap,fp=new WeakMap,dp=new WeakSet,pp=new WeakSet,gp=new WeakSet,vp=function(){function e(){t(this,e),pd(this,gp),pd(this,pp),pd(this,dp),vd(this,up,{writable:!0,value:void 0}),vd(this,fp,{writable:!0,value:void 0})}return n(e,[{key:"init",value:function(t,e){kt(this,up,t),kt(this,fp,e)}},{key:"drawFilter",value:function(t,e){if(A.isFocussable())for(var i=t.getModelSize(),n=t.getPageSize(),r=0;r<i.pageCount;r++){var s=r*n.pxHeight;e==a.CONTENT_PART_HEADER?gd(this,dp,_p).call(this,s,n):e==a.CONTENT_PART_FOOTER?gd(this,pp,yp).call(this,s,n):gd(this,gp,Ep).call(this,s,n)}}}]),e}();function _p(t,e){var i=t+e.pxHeaderHeight;Ct(this,fp).addFullRect(ru.FILTER_FILL_STYLE,0,i,e.pxWidth,e.pxHeight-e.pxHeaderHeight),Ct(this,fp).addLine2(0,i,e.pxWidth,i,a.COLOR_PAGE_SEG,a.WIDTH_PAGE_SEG,[4,4,4,4]),Ct(this,fp).addText2("页眉",30,i+a.STYLE_LINE_HEIGHT,"SimSun",180,"#363636")}function yp(t,e){var i=t+e.pxHeight-e.pxFooterHeight;Ct(this,fp).addFullRect(ru.FILTER_FILL_STYLE,0,t,e.pxWidth,e.pxHeight-e.pxFooterHeight),Ct(this,fp).addLine2(0,i,e.pxWidth,i,a.COLOR_PAGE_SEG,a.WIDTH_PAGE_SEG,[4,4,4,4]),Ct(this,fp).addText2("页脚",30,i-30,"SimSun",180,"#363636")}function Ep(t,e){Ct(this,fp).addFullRect(ru.FILTER_FILL_STYLE,0,t,e.pxWidth,e.pxHeaderHeight),Ct(this,fp).addFullRect(ru.FILTER_FILL_STYLE,0,t+e.pxHeight-e.pxFooterHeight,e.pxWidth,e.pxFooterHeight)}var mp=new WeakMap,wp=new WeakMap,bp=new WeakMap,Tp=new WeakMap,Cp=new WeakSet,kp=new WeakSet,Sp=new WeakSet,Op=new WeakSet,Lp=new WeakSet,Rp=function(){function e(){t(this,e),pd(this,Lp),pd(this,Op),pd(this,Sp),pd(this,kp),pd(this,Cp),vd(this,mp,{writable:!0,value:void 0}),vd(this,wp,{writable:!0,value:void 0}),vd(this,bp,{writable:!0,value:void 0}),vd(this,Tp,{writable:!0,value:void 0})}return n(e,[{key:"init",value:function(t,e,i,n){kt(this,mp,t),kt(this,wp,e),kt(this,bp,i),kt(this,Tp,n)}},{key:"draw",value:function(t){gd(this,Cp,xp).call(this,t)}}]),e}();function xp(t){for(var e=t.getModelSize(),i=0;i<e.pageCount;i++)gd(this,kp,Ip).call(this,t,i),gd(this,Sp,Pp).call(this,t.getPageInfo(),t.getPageSize(),i),gd(this,Op,Ap).call(this,t.getPageInfo(),t.getPageSize(),i)}function Ip(t,e){if(A.isCopy()){var i=t.getHeaderModel(),n=t.getFooterModel(),r=t.getPageSize(),s=a.STYLE_LINE_HEIGHT,o=r.pxHeight*(e+1),l=r.pxHeight*e,h=r.pxWidth,c=r.pxLeft,u=r.pxRight,f=r.pxHeaderHeight,d=r.pxFooterHeight;Ct(this,wp).addLine2(0,o,h,o,a.COLOR_PAGEBORDER,a.WIDTH_PAGEBORDER);var p=A.getConfig().headerDivider,g=A.getConfig().footerDivider;p&&1!=i.getElements().length||(Ct(this,wp).addLine2(c,l+f,c-s,l+f,a.COLOR_BINDLINE,a.WIDTH_BINDLINE),Ct(this,wp).addLine2(c,l+f,c,l+f-s,a.COLOR_BINDLINE,a.WIDTH_BINDLINE),Ct(this,wp).addLine2(h-u+s,l+f,h-u,l+f,a.COLOR_BINDLINE,a.WIDTH_BINDLINE),Ct(this,wp).addLine2(h-u,l+f,h-u,l+f-s,a.COLOR_BINDLINE,a.WIDTH_BINDLINE)),g&&1!=n.getElements().length||(Ct(this,wp).addLine2(c-s,o-d,c,o-d,a.COLOR_BINDLINE,a.WIDTH_BINDLINE),Ct(this,wp).addLine2(c,o-d,c,o-d+s,a.COLOR_BINDLINE,a.WIDTH_BINDLINE),Ct(this,wp).addLine2(h-u+s,o-d,h-u,o-d,a.COLOR_BINDLINE,a.WIDTH_BINDLINE),Ct(this,wp).addLine2(h-u,o-d,h-u,o-d+s,a.COLOR_BINDLINE,a.WIDTH_BINDLINE))}}function Pp(t,e,i){var n=t.watermark;if(n){var r=e.pxHeight*(i+.5),a=e.pxWidth/2;Ct(this,mp).addWaterMark(n,a,r)}}function Ap(t,e,i){var n=e.pxHeight*(i+1)-100,r=a.FontFamilys[0].value,s=a.FontSizes[9].value,o=df.getStr();Ct(this,Tp).length>0&&gd(this,Lp,Mp).call(this,o[1])==Ct(this,bp)?z.info("licensee:"+Ct(this,Tp)):Ct(this,mp).addText(o[0],200,n,r,s,a.TABLE_FIELD_BORDER_COLOR)}function Mp(t){for(var e,i,n,r=t.length,a=t.split(""),s="",o=0;o<Ct(this,Tp).length;o++)s+=a[(e=((e=((e=Ct(this,Tp).charCodeAt(o))-(i=e%r))/r)-(n=e%r))/r)%r]+a[n]+a[i];return s}var Dp=new WeakMap,Np=new WeakMap,Bp=new WeakMap,Wp=new WeakMap,Hp=new WeakSet,Fp=function(){function e(){t(this,e),pd(this,Hp),vd(this,Dp,{writable:!0,value:void 0}),vd(this,Np,{writable:!0,value:void 0}),vd(this,Bp,{writable:!0,value:void 0}),vd(this,Wp,{writable:!0,value:void 0})}return n(e,[{key:"init",value:function(t,e,i,n){kt(this,Dp,t),kt(this,Np,e),kt(this,Bp,i),kt(this,Wp,n)}},{key:"drawBelow",value:function(t){gd(this,Hp,Yp).call(this,t.getPageInfo().below)}},{key:"drawAbove",value:function(t){gd(this,Hp,Yp).call(this,t.getPageInfo().above)}}]),e}();function Yp(t){var e=this;t.forEach((function(t){var i=t.property,n=t.offset;if(G.isLineObject(t))Ct(e,Dp).addLine2(n.x1,n.y1,n.x2,n.y2,i.lineColor,i.lineWidth);else if(G.isRectObject(t))if(i.classify==G.OBJECT_SHAPE_RECT)Ct(e,Dp).addStrokeRect(n.x1,n.y1,n.x2-n.x1,n.y2-n.y1,i.lineColor,i.lineWidth);else if(i.classify==G.OBJECT_SHAPE_ELLIPSE){var r=(n.x2-n.x1)/2,a=(n.y2-n.y1)/2;Ct(e,Dp).addStrokeEllipse(n.x1+r,n.y1+a,Math.abs(r),Math.abs(a),i.lineColor,i.lineWidth)}else if(i.classify==G.OBJECT_SHAPE_TRIANGLE){var s=(n.x2-n.x1)/2;Ct(e,Dp).addStrokeTriangle(n.x1+s,n.y1,n.x2,n.y2,n.x1,n.y2,i.lineColor,i.lineWidth)}}))}var jp=new WeakMap,Xp=function(){function e(){t(this,e),vd(this,jp,{writable:!0,value:void 0})}return n(e,[{key:"init",value:function(t,e){kt(this,jp,e)}},{key:"draw",value:function(t,e,i){var n=this;if(0!=i.getList().length){t.body.forEach((function(t){if(t.modular.comments.length>0){var e=t._size,i=t._offset,r=a.WIDTH_UNDERLINE,s=a.COLOR_COMMENTS_LINE,o=i.offsetX,l=i.offsetY+i.height-i.baseLine/2,h=i.offsetX+e.width+e.dispersedspac+e.justifyspac,c=i.offsetY+i.height-i.baseLine/2;Ct(n,jp).addLine2(o,l,h,c,s,r)}}));var r=e.getPageSize(),s=r.pxWidth-r.pxRight,o=r.pxWidth;i.getList().forEach((function(e){e.getId();var i=t.body.findLast((function(t){if(t.modular.comments.length>0&&t.modular.comments.includes(e.getId()))return!0}));if(i){var r=i._size,l=i._offset,h=a.WIDTH_UNDERLINE,c=a.COLOR_COMMENTS_LINE,u=l.offsetX+r.width+r.dispersedspac+r.justifyspac,f=l.offsetY+l.height-l.baseLine/2,d=l.offsetY+l.height-l.baseLine/2,p=e.getTop();Ct(n,jp).addLine2(u,f,s,d,c,h,[20,20]),Ct(n,jp).addLine2(s,f,o,p,c,h,[20,20])}}))}}}]),e}();function zp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=bt(t);if(e){var r=bt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return wt(this,i)}}function Up(t,e,i){Gp(t,e),e.set(t,i)}function Gp(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}var Vp=new WeakMap,Kp=new WeakMap,Zp=new WeakMap,Jp=new WeakSet,qp=function(e){mt(r,e);var i=zp(r);function r(){var e,n,a;t(this,r);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return Gp(n=yt(e=i.call.apply(i,[this].concat(o))),a=Jp),a.add(n),Up(yt(e),Vp,{writable:!0,value:[]}),Up(yt(e),Kp,{writable:!0,value:[]}),Up(yt(e),Zp,{writable:!0,value:void 0}),e}return n(r,[{key:"hasComments",value:function(t){var e=this;kt(this,Kp,[]);var i=A.getCommentsModel();return t.resources.comments.forEach((function(n){if(i==a.COMMENTS_SHOW_UN){if(n.state==a.COMMENTS_STATE_DE||n.state==a.COMMENTS_STATE_DO)return}else{if(i!=a.COMMENTS_SHOW_DO)return;if(n.state==a.COMMENTS_STATE_DE||n.state==a.COMMENTS_STATE_UN)return}var r=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}(e,Jp,$p).call(e,t.body,n.id);r.find&&(n.offset=r.offset,Ct(e,Kp).push(n))})),Ct(this,Kp).length>0}},{key:"render",value:function(t){var e=this;t.innerHTML="",kt(this,Vp,[]),Ct(this,Kp).forEach((function(t){var i=new hg(t);i.setChangeState(Ct(e,Zp)),i.setOffset(t.offset),Ct(e,Vp).push(i)})),Ct(this,Vp).sort((function(t,e){return t.getOffset()-e.getOffset()})),Ct(this,Vp).forEach((function(e){t.appendChild(e.getDom())}));var i=0;Ct(this,Vp).forEach((function(t){var e=t.getOffset();t.refreshLocat(Math.max(e,i)),i=Math.max(i+t.getClientHeight()+3,t.getOffset()+t.getClientHeight()+3)}))}},{key:"setChangeCommentsState",value:function(t){kt(this,Zp,t)}},{key:"getList",value:function(){return Ct(this,Vp)}}]),r}(Rt);function $p(t,e){var i=0,n=!1,r=this.getCurrentRatio();return t.forEach((function(t){var a=t.modular.comments;a.length>0&&a.includes(e)&&t._offset&&(i=Math.max(t._offset.offsetY*r,i),n=!0)})),{find:n,offset:i}}var Qp=new WeakMap,tg=new WeakMap,eg=new WeakMap,ig=new WeakMap,ng=new WeakMap,rg=new WeakMap,ag=new WeakMap,sg=new WeakMap,og=new WeakMap,lg=new WeakMap,hg=function(e){mt(r,e);var i=zp(r);function r(e){var n;return t(this,r),Up(yt(n=i.call(this)),Qp,{writable:!0,value:void 0}),Up(yt(n),tg,{writable:!0,value:void 0}),Up(yt(n),eg,{writable:!0,value:void 0}),Up(yt(n),ig,{writable:!0,value:void 0}),Up(yt(n),ng,{writable:!0,value:void 0}),Up(yt(n),rg,{writable:!0,value:void 0}),Up(yt(n),ag,{writable:!0,value:void 0}),Up(yt(n),sg,{writable:!0,value:void 0}),Up(yt(n),og,{writable:!0,value:void 0}),Up(yt(n),lg,{writable:!0,value:void 0}),kt(yt(n),Qp,e.id),kt(yt(n),tg,document.createElement("div")),kt(yt(n),eg,document.createElement("div")),kt(yt(n),ig,document.createElement("div")),kt(yt(n),ng,document.createElement("div")),kt(yt(n),rg,document.createElement("div")),kt(yt(n),ag,document.createElement("div")),Ct(yt(n),tg).append(Ct(yt(n),eg)),Ct(yt(n),eg).append(Ct(yt(n),ig)),Ct(yt(n),eg).append(Ct(yt(n),rg)),Ct(yt(n),eg).append(Ct(yt(n),ng)),Ct(yt(n),tg).append(Ct(yt(n),ag)),Ct(yt(n),tg).classList.add("comments-panel"),Ct(yt(n),eg).classList.add("comments-title"),Ct(yt(n),ig).classList.add("comments-title-lab"),Ct(yt(n),ng).classList.add("comments-title-btn"),Ct(yt(n),rg).classList.add("comments-title-btn"),Ct(yt(n),ag).classList.add("comments-content"),Ct(yt(n),tg).id=e.id,Ct(yt(n),ig).innerHTML=e.username,e.state==a.COMMENTS_STATE_UN?(Ct(yt(n),rg).innerHTML='<i class="layui-icon layui-icon-pass"></i>',Ct(yt(n),rg).title="处理".concat(e.username,"批注"),Ct(yt(n),rg).addEventListener("click",(function(){Ct(yt(n),lg).call(yt(n),e.id,a.COMMENTS_STATE_DO,e.useraccount)}))):(Ct(yt(n),rg).innerHTML='<i class="layui-icon layui-icon-cancel"></i>',Ct(yt(n),rg).title="取消处理".concat(e.username,"批注"),Ct(yt(n),rg).addEventListener("click",(function(){Ct(yt(n),lg).call(yt(n),e.id,a.COMMENTS_STATE_UN,e.useraccount)}))),Ct(yt(n),ng).innerHTML='<i class="layui-icon layui-icon-delete"></i>',Ct(yt(n),ng).title="删除".concat(e.username,"批注"),Ct(yt(n),ng).addEventListener("click",(function(){Ct(yt(n),lg).call(yt(n),e.id,a.COMMENTS_STATE_DE,e.useraccount)})),Ct(yt(n),ag).innerHTML=e.text,n}return n(r,[{key:"setChangeState",value:function(t){kt(this,lg,t)}},{key:"setOffset",value:function(t){kt(this,sg,t)}},{key:"getOffset",value:function(){return Ct(this,sg)}},{key:"getId",value:function(){return Ct(this,Qp)}},{key:"getDom",value:function(){return Ct(this,tg)}},{key:"getClientHeight",value:function(){return Ct(this,tg).clientHeight}},{key:"getTop",value:function(){var t=this.getCurrentRatio();return Ct(this,og)/t}},{key:"refreshLocat",value:function(t){kt(this,og,t),Ct(this,tg).style.top="".concat(t,"px")}}]),r}(Rt);function cg(t,e){fg(t,e),e.add(t)}function ug(t,e,i){fg(t,e),e.set(t,i)}function fg(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dg(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var pg=new WeakMap,gg=new WeakMap,vg=new WeakMap,_g=new WeakMap,yg=new WeakMap,Eg=new WeakMap,mg=new WeakMap,wg=new WeakMap,bg=new WeakMap,Tg=new WeakMap,Cg=new WeakMap,kg=new WeakMap,Sg=new WeakMap,Og=new WeakMap,Lg=new WeakMap,Rg=new WeakMap,xg=new WeakMap,Ig=new WeakMap,Pg=new WeakMap,Ag=new WeakMap,Mg=new WeakMap,Dg=new WeakMap,Ng=new WeakMap,Bg=new WeakMap,Wg=new WeakMap,Hg=new WeakMap,Fg=new WeakMap,Yg=new WeakMap,jg=new WeakMap,Xg=new WeakMap,zg=new WeakMap,Ug=new WeakSet,Gg=new WeakSet,Vg=new WeakSet,Kg=new WeakSet,Zg=new WeakSet,Jg=new WeakSet,qg=new WeakSet,$g=new WeakSet,Qg=new WeakSet,tv=new WeakSet,ev=new WeakSet,iv=new WeakSet,nv=new WeakSet,rv=new WeakSet,av=new WeakSet,sv=new WeakSet,ov=new WeakSet,lv=new WeakSet,hv=new WeakSet,cv=new WeakSet,uv=new WeakSet,fv=new WeakSet,dv=new WeakSet,pv=new WeakSet,gv=new WeakSet,vv=new WeakSet,_v=new WeakSet,yv=new WeakSet,Ev=new WeakSet,mv=new WeakSet,wv=new WeakSet,bv=function(e){mt(o,e);var i,r,s=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function o(){var e;return t(this,o),cg(yt(e=s.call(this)),wv),cg(yt(e),mv),cg(yt(e),Ev),cg(yt(e),yv),cg(yt(e),_v),cg(yt(e),vv),cg(yt(e),gv),cg(yt(e),pv),cg(yt(e),dv),cg(yt(e),fv),cg(yt(e),uv),cg(yt(e),cv),cg(yt(e),hv),cg(yt(e),lv),cg(yt(e),ov),cg(yt(e),sv),cg(yt(e),av),cg(yt(e),rv),cg(yt(e),nv),cg(yt(e),iv),cg(yt(e),ev),cg(yt(e),tv),cg(yt(e),Qg),cg(yt(e),$g),cg(yt(e),qg),cg(yt(e),Jg),cg(yt(e),Zg),cg(yt(e),Kg),cg(yt(e),Vg),cg(yt(e),Gg),cg(yt(e),Ug),ug(yt(e),pg,{writable:!0,value:void 0}),ug(yt(e),gg,{writable:!0,value:void 0}),ug(yt(e),vg,{writable:!0,value:void 0}),ug(yt(e),_g,{writable:!0,value:void 0}),ug(yt(e),yg,{writable:!0,value:void 0}),ug(yt(e),Eg,{writable:!0,value:void 0}),ug(yt(e),mg,{writable:!0,value:void 0}),ug(yt(e),wg,{writable:!0,value:void 0}),ug(yt(e),bg,{writable:!0,value:void 0}),ug(yt(e),Tg,{writable:!0,value:void 0}),ug(yt(e),Cg,{writable:!0,value:void 0}),ug(yt(e),kg,{writable:!0,value:void 0}),ug(yt(e),Sg,{writable:!0,value:void 0}),ug(yt(e),Og,{writable:!0,value:void 0}),ug(yt(e),Lg,{writable:!0,value:void 0}),ug(yt(e),Rg,{writable:!0,value:void 0}),ug(yt(e),xg,{writable:!0,value:void 0}),ug(yt(e),Ig,{writable:!0,value:void 0}),ug(yt(e),Pg,{writable:!0,value:void 0}),ug(yt(e),Ag,{writable:!0,value:void 0}),ug(yt(e),Mg,{writable:!0,value:void 0}),ug(yt(e),Dg,{writable:!0,value:void 0}),ug(yt(e),Ng,{writable:!0,value:void 0}),ug(yt(e),Bg,{writable:!0,value:void 0}),ug(yt(e),Wg,{writable:!0,value:void 0}),ug(yt(e),Hg,{writable:!0,value:void 0}),ug(yt(e),Fg,{writable:!0,value:void 0}),ug(yt(e),Yg,{writable:!0,value:void 0}),ug(yt(e),jg,{writable:!0,value:void 0}),ug(yt(e),Xg,{writable:!0,value:void 0}),ug(yt(e),zg,{writable:!0,value:void 0}),kt(yt(e),Wg,new Array),kt(yt(e),xg,new bl),kt(yt(e),Tg,new Hi),kt(yt(e),Cg,new Ne),kt(yt(e),kg,new se),kt(yt(e),Og,new Pn),kt(yt(e),Sg,new Xn),kt(yt(e),Lg,new mn),kt(yt(e),mg,new kd),kt(yt(e),bg,new $u),kt(yt(e),wg,new Pu),kt(yt(e),jg,new or),kt(yt(e),Xg,new Kn),kt(yt(e),zg,new qp),kt(yt(e),Ig,new Jo),e}return n(o,[{key:"load",value:function(t){var e=this,i=A.showMask(!0);Do.loadData(t,(function(t){A.showMask(!0,t)}),(function(t){e.compatibility(t),kt(e,Fg,a.CONTENT_PART_BODY),dg(e,Vg,kv).call(e,Ct(e,Rg).body[0],Ct(e,Rg).body[0]),dg(e,Qg,Iv).call(e),dg(e,Kg,Sv).call(e),dg(e,$g,xv).call(e,A.isFocussable()),A.synchroData(),A.showMask(!1,i)}))}},{key:"create",value:function(){dg(this,Ug,Tv).call(this),dg(this,Gg,Cv).call(this)}},{key:"refresh",value:function(){dg(this,$g,xv).call(this,A.isFocussable())}},{key:"compatibility",value:function(t){kt(this,Rg,t),Ct(this,Rg).resources=Object.assign(gt.getDefalueResources(),Ct(this,Rg).resources),G.compatibility(Ct(this,Rg).body),G.compatibility(Ct(this,Rg).header),G.compatibility(Ct(this,Rg).footer)}},{key:"getTextStyle",value:function(){return z.debug("getTextStyle"),Object.assign({},Ct(this,Pg))}},{key:"getParagStyle",value:function(){return z.debug("getParagStyle"),dg(this,mv,qv).call(this),Object.assign({},Ct(this,Og).getParagStyle())}},{key:"getPaperInfo",value:function(){return Object.assign({},Ct(this,Rg).paper)}},{key:"getUsedColors",value:function(){return Ct(this,Og).getUsedColors()}},{key:"getViewSize",value:function(){var t=Ct(this,xg).getModelSize();return{width:t.width*a.SYS_STANDARD_RATIO,height:t.height*a.SYS_STANDARD_RATIO}}},{key:"getPageNumInfo",value:function(){return{number:Ct(this,Rg).page.number,format:Ct(this,Rg).page.format,align:Ct(this,Rg).page.align,size:Ct(this,Rg).page.size,family:Ct(this,Rg).page.family}}},{key:"getCompInfo",value:function(t){return G.getResourceCompInfo(Ct(this,Rg),t)}},{key:"getCompValues",value:function(){return G.getResourceCompValues(Ct(this,Rg))}},{key:"getStructure",value:function(){return G.getDocumentStructure(Ct(this,Rg))}},{key:"fileDownload",value:function(){var t="".concat(Ct(this,Rg).info.name,"-").concat(Date.now(),".pxd");Do.fileDownload(Ct(this,Rg),t,!0)}},{key:"fileImport",value:function(t){z.debug("load"),z.debug("字节大小：".concat(t.length)),this.load(Do.importData(t))}},{key:"fileExport",value:function(){return Do.compressData(Ct(this,Rg))}},{key:"filePreview",value:function(){Do.filePreview(Ct(this,Rg),(function(){}),(function(){}))}},{key:"fileSave",value:function(){A.saveAction(this.fileExport())}},{key:"filePrint",value:function(){Do.filePrint(Ct(this,Rg),(function(){}),(function(){}))}},{key:"fileExpImage",value:function(){Do.fileExpImage(Ct(this,pg),Ct(this,Rg))}},{key:"fileOutlineDownload",value:function(){var t=G.getResourceCompValues(Ct(this,Rg)),e="".concat(Ct(this,Rg).info.name,"-文档数据-").concat(Date.now(),".json");Do.fileDownload(JSON.stringify(t),e,!1)}},{key:"prevStack",value:function(){dg(this,ev,Av).call(this,Ct(this,Ig).prev())}},{key:"nextStack",value:function(){dg(this,ev,Av).call(this,Ct(this,Ig).next())}},{key:"changeTextStyle",value:function(t){z.debug("changeTextStyle"),dg(this,mv,qv).call(this),Ct(this,Og).changeTextStyle(t),Object.assign(Ct(this,Pg),t)}},{key:"changeParagStyle",value:function(t){z.debug("changeParagStyle"),dg(this,mv,qv).call(this),Ct(this,Og).changeParagStyle(t),Object.assign(Ct(this,Ag),t)}},{key:"changeFontColor",value:function(t){z.debug("setTextStyle"),dg(this,mv,qv).call(this),Ct(this,Og).changeFontColor(t),Object.assign(Ct(this,Pg),{color:t})}},{key:"changePageNum",value:function(t){z.debug("changePageNum"),dg(this,wv,$v).call(this),Ct(this,Lg).changePageNum(t)}},{key:"changePaperInfo",value:function(t){dg(this,wv,$v).call(this),Ct(this,Lg).changePaperInfo(t)}},{key:"changeEditPart",value:function(t){dg(this,wv,$v).call(this),Ct(this,Lg).changeEditPart(t)}},{key:"changeCompInfo",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).changeCompInfo(t)}},{key:"changeCompValue",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).changeCompValue(t)}},{key:"changeDatePickerValue",value:function(t,e){dg(this,_v,Kv).call(this),Ct(this,Cg).changeDatePickerValue(t,e)}},{key:"changeTextFieldValue",value:function(t,e){dg(this,_v,Kv).call(this),Ct(this,Cg).changeTextFieldValue(t,e)}},{key:"changeSingleFieldValue",value:function(t,e){dg(this,_v,Kv).call(this),Ct(this,Cg).changeSingleFieldValue(t,e)}},{key:"changeMultipleFieldValue",value:function(t,e){dg(this,_v,Kv).call(this),Ct(this,Cg).changeMultipleFieldValue(t,e)}},{key:"changeExpressionValue",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).changeExpressionValue(t)}},{key:"changeCommentsView",value:function(t){dg(this,wv,$v).call(this),Ct(this,Lg).changeCommentsView(t)}},{key:"commitRevision",value:function(t){A.commitRevisionAction(this.fileExport(),t),dg(this,$g,xv).call(this,!0)}},{key:"commitVersion",value:function(t){this.verifiCommitVersion()&&(G.cleanComments(Ct(this,Rg)),A.commitVersionAction(this.fileExport(),t),dg(this,$g,xv).call(this,!0))}},{key:"verifiCommitVersion",value:function(){var t=this,e=G.revisionVerify(Ct(this,Rg));if(!(e>0)){var i=G.commentsVerify(Ct(this,Rg));if(i.length>0)return A.showMessage(1,"有".concat(i.length,"条批注未处理不能提交版本！"),(function(){dg(t,$g,xv).call(t,!0)})),!1;var n=G.compVerify(Ct(this,Rg));if(n.length>0){var r=n.map((function(t){return"[".concat(t.describe,"]")})).join(",");return A.showMessage(1,"有编码".concat(r,"未填写不能提交版本！"),(function(){dg(t,$g,xv).call(t,!0)})),!1}return!0}A.showMessage(1,"有".concat(e,"处修订未处理不能提交版本！"),(function(){dg(t,$g,xv).call(t,!0)}))}},{key:"acceptRevision",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).acceptRevision()}},{key:"refuseRevision",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).refuseRevision()}},{key:"previousRevision",value:function(){var t=this,e=this.getCurrentPartData(Ct(this,Rg),Ct(this,Fg)),i=G.prevRevision(e,Ct(this,Dg));i?(dg(this,Vg,kv).call(this,i,i),dg(this,$g,xv).call(this,!0)):A.showMessage(1,"已经到了文档开头！",(function(){dg(t,$g,xv).call(t,!0)}))}},{key:"nextRevision",value:function(){var t=this,e=this.getCurrentPartData(Ct(this,Rg),Ct(this,Fg)),i=G.nextRevision(e,Ct(this,Dg));i?(dg(this,Vg,kv).call(this,i,i),dg(this,$g,xv).call(this,!0)):A.showMessage(1,"已经到了文档尾部！",(function(){dg(t,$g,xv).call(t,!0)}))}},{key:"setZoom",value:function(t){a.SYS_ZOOM=t,dg(this,Kg,Sv).call(this),dg(this,$g,xv).call(this,A.isFocussable())}},{key:"insertWord",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertWord(t)}},{key:"insertLinefeel",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).insertLinefeel()}},{key:"inserTab",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).inserTab()}},{key:"insertTable",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertTable(t)}},{key:"insertImage",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertImage(t)}},{key:"insertDatePicker",value:function(t,e){dg(this,_v,Kv).call(this),Ct(this,Cg).insertDatePicker(t,e)}},{key:"insertSignature",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertSignature(t)}},{key:"insertDivder",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertDivder(t)}},{key:"insertGraphicCode",value:function(t,e){dg(this,_v,Kv).call(this),Ct(this,Cg).insertGraphicCode(t,e)}},{key:"insertWatermark",value:function(t,e){dg(this,_v,Kv).call(this),Ct(this,Cg).insertWatermark(t,e)}},{key:"insertPageNumber",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertPageNumber(t)}},{key:"insertShape",value:function(t){kt(this,Bg,G.createShape(t)),dg(this,$g,xv).call(this,!0)}},{key:"insertTextBox",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertTextBox(t)}},{key:"insertCheckbox",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertCheckbox(t)}},{key:"insertRadioGroup",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertRadioGroup(t)}},{key:"insertTextField",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertTextField(t)}},{key:"insertSingleField",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertSingleField(t)}},{key:"insertMultipleField",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertMultipleField(t)}},{key:"insertExpression",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertExpression(t)}},{key:"insertComments",value:function(t){dg(this,_v,Kv).call(this),Ct(this,Cg).insertComments(t)}},{key:"insertRevision",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).insertRevision()}},{key:"backspaceText",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).backspaceText()}},{key:"deleteText",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).deleteText()}},{key:"deleteWatermark",value:function(){dg(this,_v,Kv).call(this),Ct(this,Cg).deleteWatermark()}},{key:"copyText",value:function(t){if(Ct(this,Wg).length>0){var e=G.getElementChars(Ct(this,Rg),Ct(this,Wg)).join(""),i={component:Ct(this,Rg).resources.component,elements:Ct(this,Wg)};try{var n=t.clipboardData||window.clipboardData;n.setData("text/plain",e),n.setData("application/peach-copy-data",Do.compressJson(i)),z.info("剪贴板数据设置成功")}catch(t){z.error("剪贴板设置操作失败:",t),Ho.copy(e,i)}}}},{key:"pasteText",value:function(t){try{var e=t.clipboardData||window.clipboardData,i=e.getData("application/peach-copy-data");if(i){var n=Do.importData(i);dg(this,_v,Kv).call(this),Ct(this,Cg).pasteObj(n)}else{var r=e.getData("text/plain");this.insertWord(r)}z.info("剪贴板数据获取成功")}catch(t){z.error("剪贴板获取操作失败:",t)}}},{key:"cutText",value:function(t,e){if(Ct(this,Wg).length>0){z.debug("cutText"),dg(this,_v,Kv).call(this);var i=Ct(this,Wg).map((function(t){return t.property.code})).join("");Ct(this,Cg).cutText(),Ho.copy(i).then((function(){}))}}},{key:"arrow",value:function(t,e){z.debug("arrow:key=".concat(t,",shiftKey=").concat(e)),dg(this,yv,Zv).call(this),Ct(this,kg).action(t,e)}},{key:"tableMerge",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableMerge()}},{key:"tableDeleteRow",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableDeleteRow()}},{key:"tableDeleteCol",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableDeleteCol()}},{key:"tableDelete",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableDelete()}},{key:"tableInsertRowAbove",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableInsertCell(a.TABLE_INSERT_ABOVE)}},{key:"tableInsertRowBelow",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableInsertCell(a.TABLE_INSERT_BELOW)}},{key:"tableInsertColLeft",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableInsertCell(a.TABLE_INSERT_LEFT)}},{key:"tableInsertColRight",value:function(){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableInsertCell(a.TABLE_INSERT_RIGHT)}},{key:"tableSplit",value:function(t){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableSplit(t)}},{key:"tableDeleteCell",value:function(t){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableDeleteCell(t)}},{key:"tableBorderChange",value:function(t){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableBorderChange(t)}},{key:"tableBorderVisible",value:function(t){dg(this,Ev,Jv).call(this),Ct(this,Sg).tableBorderVisible(t)}},{key:"tableCellInfo",value:function(){return dg(this,Ev,Jv).call(this),Ct(this,Sg).tableCellInfo()}}]),o}(Rt);function Tv(){var t=A.getAppDom();t.innerHTML="",kt(this,yg,document.createElement("input")),Ct(this,yg).classList.add("editor-input"),kt(this,Eg,document.createElement("div")),Ct(this,Eg).classList.add("editor-popup"),kt(this,vg,document.createElement("canvas")),Ct(this,vg).classList.add("editor-background-canvas"),kt(this,pg,document.createElement("canvas")),Ct(this,pg).classList.add("editor-textground-canvas"),kt(this,gg,document.createElement("canvas")),Ct(this,gg).classList.add("editor-maskground-canvas"),kt(this,_g,document.createElement("canvas")),Ct(this,_g).classList.add("editor-foreground-canvas"),Ct(this,_g).id="editor-canvas",t.append(Ct(this,yg)),t.append(Ct(this,vg)),t.append(Ct(this,pg)),t.append(Ct(this,gg)),t.append(Ct(this,_g)),t.append(Ct(this,Eg))}function Cv(){var t=this;Ct(this,zg).setChangeCommentsState((function(e,i,n){var r=Ct(t,Rg).info.createuser;i==a.COMMENTS_STATE_DE?A.deleteCommentsAction(r,n)&&(dg(t,_v,Kv).call(t),Ct(t,Cg).changeCommentsState(e,i)):(dg(t,_v,Kv).call(t),Ct(t,Cg).changeCommentsState(e,i))})),Ct(this,jg).setRefresh((function(e){A.isFocussable()&&dg(t,ov,Wv).call(t,e)})),window.addEventListener("mouseup",(function(){A.isFocussable()&&Ct(t,Xg).isActive()&&dg(t,uv,jv).call(t)})),Ct(this,_g).addEventListener("dblclick",(function(e){A.isFocussable()&&dg(t,pv,Uv).call(t,e)})),Ct(this,_g).addEventListener("mousedown",(function(e){A.isFocussable()&&(0==e.button?(e.preventDefault(),dg(t,lv,Hv).call(t,e)):(e.preventDefault(),dg(t,hv,Fv).call(t,e)))})),Ct(this,_g).addEventListener("mousemove",(function(e){e.preventDefault(),A.isFocussable()&&(Ct(t,Xg).isActive()?dg(t,cv,Yv).call(t,e):dg(t,dv,zv).call(t,e))})),Ct(this,_g).addEventListener("mouseup",(function(e){A.isFocussable()&&dg(t,uv,jv).call(t,e)})),Ct(this,_g).addEventListener("contextmenu",(function(e){e.preventDefault(),A.isFocussable()&&dg(t,fv,Xv).call(t,e)})),Ct(this,_g).addEventListener("click",(function(t){t.preventDefault()})),document.addEventListener("paste",function(){var e=_t(Ot().mark((function e(i){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ct(t,Yg)&&A.isFocussable()&&(i.preventDefault(),t.pasteText(i));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.addEventListener("copy",function(){var e=_t(Ot().mark((function e(i){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ct(t,Yg)&&A.isFocussable()&&(i.preventDefault(),t.copyText(i));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.addEventListener("cut",function(){var e=_t(Ot().mark((function e(i){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ct(t,Yg)&&A.isFocussable()&&(i.preventDefault(),t.cutText());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ct(this,yg).addEventListener("blur",(function(){A.isFocussable()&&(Ct(t,jg).pause(),dg(t,$g,xv).call(t,!1))})),Ct(this,yg).addEventListener("input",(function(e){if(!e.isComposing&&A.isFocussable()){var i=e.data;e.target.value="",t.insertWord(i)}})),Ct(this,yg).addEventListener("compositionend",(function(e){if(A.isFocussable()){var i=e.data;e.target.value="",t.insertWord(i)}})),Ct(this,yg).addEventListener("keydown",(function(e){if(A.isFocussable()){var i=[a.KEY_ARROWDOWN,a.KEY_ARROWUP,a.KEY_ARROWLEFT,a.KEY_ARROWRIGHT];if(e.ctrlKey){var n=function(t){t.preventDefault()};e.key==a.KEY_Z?(n(e),dg(t,ev,Av).call(t,Ct(t,Ig).prev())):e.key==a.KEY_A?(n(e),dg(t,gv,Gv).call(t)):e.key==a.KEY_B?(n(e),t.changeTextStyle({bold:!0})):e.key==a.KEY_I?(n(e),t.changeTextStyle({italic:!0})):e.key==a.KEY_U?(n(e),t.changeTextStyle({underline:!0})):e.key==a.KEY_P?(n(e),t.filePreview()):e.key==a.KEY_S?(n(e),t.fileSave()):e.key==a.KEY_E?(n(e),t.changeParagStyle({align:a.ALIGN_CENTER})):e.key==a.KEY_J?(n(e),t.changeParagStyle({align:a.ALIGN_BOTH})):e.key==a.KEY_L?(n(e),t.changeParagStyle({align:a.ALIGN_LEFT})):e.key==a.KEY_R&&(n(e),t.changeParagStyle({align:a.ALIGN_RIGHT}))}else e.shiftKey?i.includes(e.key)&&(e.preventDefault(),t.arrow(e.key,e.shiftKey)):e.key==a.KEY_ENTER?t.insertLinefeel():e.key==a.KEY_TAB?(e.preventDefault(),t.inserTab()):e.key==a.KEY_BACKSPACE?t.backspaceText():e.key==a.KEY_DELETE?t.deleteText():e.key==a.KEY_ESC?t.changeEditPart(a.CONTENT_PART_BODY):i.includes(e.key)&&(e.preventDefault(),t.arrow(e.key,e.shiftKey))}}))}function kv(t,e,i,n){var r=this;kt(this,Mg,t),kt(this,Dg,e),kt(this,Ng,i),Ct(this,Mg)._cursor=n;var a=this.getCurrentPartData(Ct(this,Rg),Ct(this,Fg)),s=a.findIndex((function(t){return t===Ct(r,Dg)}));if(0==s||a[s-1].property.type==G.TYPE_STRUCT){var o=G.findElementStyle(a,Ct(this,Dg));kt(this,Pg,o.textStyle),kt(this,Ag,o.paragStyle)}else{var l=G.findElementStyle(a,a[s-1]);kt(this,Pg,l.textStyle),kt(this,Ag,l.paragStyle)}A.synchroStyle(Ct(this,Pg),Ct(this,Ag))}function Sv(){kt(this,Hg,!0)}function Ov(t){Ct(this,_g).style.cursor=t}function Lv(t){kt(this,Fg,t)}function Rv(){kt(this,Ng,Ct(this,Bg)),Ct(this,Rg).resources.objects.above.push(Ct(this,Bg)),Ct(this,Wg).splice(0,Ct(this,Wg).length),kt(this,Bg,void 0),dg(this,Kg,Sv).call(this),dg(this,$g,xv).call(this,!0)}function xv(t){dg(this,av,Nv).call(this),dg(this,nv,Dv).call(this,t),dg(this,sv,Bv).call(this)}function Iv(){Ct(this,Ig).reset(),dg(this,tv,Pv).call(this)}function Pv(t,e){Ct(this,Ig).save(t,e,Ct(this,Rg),Ct(this,Fg),Ct(this,Wg),Ct(this,Dg),Ct(this,Mg)),A.synchroStack(Ct(this,Ig).stackSize(),Ct(this,Ig).recycleSize())}function Av(t){A.synchroStack(Ct(this,Ig).stackSize(),Ct(this,Ig).recycleSize()),t&&(kt(this,Rg,t.data),kt(this,Wg,t.selects),dg(this,Vg,kv).call(this,t.cursor,t.insert),dg(this,Kg,Sv).call(this)),dg(this,$g,xv).call(this,!0)}function Mv(){var t=this.getCurrentPartData(Ct(this,Rg),a.CONTENT_PART_BODY),e=Ct(this,xg).getModelSize(),i=Ct(this,xg).getPageSize(),n=Math.ceil(Ct(this,Mg)._offset.offsetY/i.pxHeight),r=gt.getDocumentCharCount(t);A.synchroPageInfo(n,e.pageCount,r)}function Dv(t){if(kt(this,Yg,t),t&&0==Ct(this,Wg).length&&m.isUndefined(Ct(this,Ng))){var e=Ct(this,Mg)._offset,i=Ct(this,Mg)._size;Ct(this,yg).focus();var n=this.getCurrentRatio(),r=(e.offsetY+i.height)*n,s=e.offsetX*n;Ct(this,yg).style.top="".concat(Ct(this,pg).offsetTop+r,"px"),Ct(this,yg).style.left="".concat(Ct(this,pg).offsetLeft+s,"px");var o=A.getAppScroll();r>o.scrollTop+o.clientHeight-a.SYS_SCROLL_RED&&(o.scrollTop=r+a.SYS_SCROLL_RED-o.clientHeight),r<o.scrollTop&&(o.scrollTop=r-2*a.SYS_SCROLL_RED),s>o.scrollLeft+o.clientWidth-a.SYS_SCROLL_RED&&(o.scrollLeft=s+a.SYS_SCROLL_RED-o.clientWidth),s<o.scrollLeft&&(o.scrollLeft=s+2*a.SYS_SCROLL_RED),Ct(this,jg).switch(!0),Ct(this,jg).start(1e3),dg(this,ov,Wv).call(this,!0)}else Ct(this,jg).switch(!1),dg(this,ov,Wv).call(this,!1)}function Nv(){if(Ct(this,Hg)){kt(this,Hg,!1),Ct(this,xg).struct(Ct(this,Rg));var t=Ct(this,xg).getModelSize(),e=this.getCurrentRatio(),i=t.height*e,n=t.width*e;Ct(this,pg).height=i,Ct(this,pg).width=n,Ct(this,vg).height=i,Ct(this,vg).width=n,Ct(this,_g).height=i,Ct(this,_g).width=n,Ct(this,gg).height=i,Ct(this,gg).width=n,A.getAppScroll();var r=A.getAppDom(),s=A.getComments();r.style.width="".concat(n,"px"),r.style.height="".concat(i,"px");var o=A.getComments();A.getCommentsModel()!=a.COMMENTS_HIDE&&Ct(this,zg).hasComments(Ct(this,Rg))?(s.style.width="150px",s.style.height="".concat(i,"px")):(s.style.width="0px",s.style.height="".concat(i,"px")),Ct(this,zg).render(o),Ct(this,mg).draw(Ct(this,pg),Ct(this,gg),Ct(this,Rg),Ct(this,xg),Ct(this,Fg),Ct(this,zg))}}function Bv(){Ct(this,wg).draw(Ct(this,vg),Ct(this,xg),Ct(this,Wg),Ct(this,Rg),Ct(this,Dg))}function Wv(t){Ct(this,bg).draw(Ct(this,_g),Ct(this,xg),Ct(this,Wg),Ct(this,Mg),Ct(this,Dg),Ct(this,Ng),Ct(this,Bg),Ct(this,Pg),Ct(this,Xg),t),dg(this,iv,Mv).call(this)}function Hv(t){Ct(this,Xg).setState(!0),dg(this,vv,Vv).call(this),Ct(this,Tg).mousedown(t,!0)}function Fv(t){}function Yv(t){dg(this,vv,Vv).call(this),Ct(this,Tg).mousemove(t)}function jv(t){dg(this,vv,Vv).call(this),Ct(this,Tg).mouseup(t),Ct(this,Xg).setState(!1)}function Xv(t){dg(this,vv,Vv).call(this),Ct(this,Tg).mousemenu(t)}function zv(t){dg(this,vv,Vv).call(this),Ct(this,Tg).mousecursor(t)}function Uv(t){dg(this,vv,Vv).call(this),Ct(this,Tg).mousedblclick(t)}function Gv(){dg(this,vv,Vv).call(this),Ct(this,Tg).selectall()}function Vv(){var t=this;Ct(this,Tg).init(Ct(this,Rg),Ct(this,xg),Ct(this,Wg),Ct(this,Mg),Ct(this,Dg),Ct(this,Ng),Ct(this,Bg),Ct(this,Xg),Ct(this,Fg)),Ct(this,Tg).setCursorCallBack((function(e,i,n,r){dg(t,Vg,kv).call(t,e,i,n,r)})),Ct(this,Tg).setChangeCallBack((function(){dg(t,Kg,Sv).call(t)})),Ct(this,Tg).setRefreshCallBack((function(e){dg(t,$g,xv).call(t,e)})),Ct(this,Tg).setContextMenuCallBack((function(t){A.showContextMenu(t)})),Ct(this,Tg).setSaveMirrorCallBack((function(e,i){dg(t,tv,Pv).call(t,e,i)})),Ct(this,Tg).setCursorStyleCallBack((function(e){dg(t,Zg,Ov).call(t,e)})),Ct(this,Tg).setPendingCallBack((function(){dg(t,qg,Rv).call(t)})),Ct(this,Tg).setChangePartCallBack((function(e){dg(t,Jg,Lv).call(t,e)})),Ct(this,Tg).setLocateInputCallBack((function(){dg(t,nv,Dv).call(t,!0)})),Ct(this,Tg).setPopMenuCallBack((function(t){A.showPopMenu(t)}))}function Kv(){var t=this;Ct(this,jg).pause(),Ct(this,Cg).init(Ct(this,Rg),Ct(this,xg),Ct(this,Wg),Ct(this,Dg),Ct(this,Ng),Ct(this,Pg),Ct(this,Ag),Ct(this,Fg)),Ct(this,Cg).setCursorCallBack((function(e,i,n,r){dg(t,Vg,kv).call(t,e,i,n,r)})),Ct(this,Cg).setChangeCallBack((function(){dg(t,Kg,Sv).call(t)})),Ct(this,Cg).setRefreshCallBack((function(){dg(t,$g,xv).call(t,!0)})),Ct(this,Cg).setSaveMirrorCallBack((function(e,i){dg(t,tv,Pv).call(t,e,i)}))}function Zv(){var t=this;Ct(this,jg).pause(),Ct(this,kg).init(Ct(this,Rg),Ct(this,xg),Ct(this,Wg),Ct(this,Mg),Ct(this,Dg),Ct(this,Fg)),Ct(this,kg).setCursorCallBack((function(e,i,n,r){dg(t,Vg,kv).call(t,e,i,n,r)})),Ct(this,kg).setChangeCallBack((function(){dg(t,Kg,Sv).call(t)})),Ct(this,kg).setRefreshCallBack((function(){dg(t,$g,xv).call(t,!0)})),Ct(this,kg).setSaveMirrorCallBack((function(e,i){dg(t,tv,Pv).call(t,e,i)}))}function Jv(){var t=this;Ct(this,jg).pause(),Ct(this,Sg).init(Ct(this,Rg),Ct(this,xg),Ct(this,Wg),Ct(this,Mg),Ct(this,Dg),Ct(this,Fg)),Ct(this,Sg).setCursorCallBack((function(e,i,n,r){dg(t,Vg,kv).call(t,e,i,n,r)})),Ct(this,Sg).setChangeCallBack((function(){dg(t,Kg,Sv).call(t)})),Ct(this,Sg).setRefreshCallBack((function(){dg(t,$g,xv).call(t,!0)})),Ct(this,Sg).setSaveMirrorCallBack((function(e,i){dg(t,tv,Pv).call(t,e,i)}))}function qv(){var t=this;Ct(this,Og).init(Ct(this,Rg),Ct(this,Wg),Ct(this,Dg),Ct(this,Fg)),Ct(this,Og).setCursorCallBack((function(e,i,n,r){dg(t,Vg,kv).call(t,e,i,n,r)})),Ct(this,Og).setChangeCallBack((function(){dg(t,Kg,Sv).call(t)})),Ct(this,Og).setRefreshCallBack((function(){dg(t,$g,xv).call(t,!0)})),Ct(this,Og).setSaveMirrorCallBack((function(e,i){dg(t,tv,Pv).call(t,e,i)}))}function $v(){var t=this;Ct(this,Lg).init(Ct(this,Rg),Ct(this,Wg),Ct(this,Fg)),Ct(this,Lg).setCursorCallBack((function(e,i,n,r){dg(t,Vg,kv).call(t,e,i,n,r)})),Ct(this,Lg).setChangeCallBack((function(){dg(t,Kg,Sv).call(t)})),Ct(this,Lg).setRefreshCallBack((function(){dg(t,$g,xv).call(t,!0)})),Ct(this,Lg).setChangePartCallBack((function(e){dg(t,Jg,Lv).call(t,e)}))}function Qv(t,e){e_(t,e),e.add(t)}function t_(t,e,i){e_(t,e),e.set(t,i)}function e_(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i_(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var n_=new WeakMap,r_=new WeakMap,a_=new WeakMap,s_=new WeakMap,o_=new WeakMap,l_=new WeakMap,h_=new WeakMap,c_=new WeakMap,u_=new WeakMap,f_=new WeakMap,d_=new WeakMap,p_=new WeakMap,g_=new WeakSet,v_=new WeakSet,__=new WeakSet,y_=new WeakSet,E_=new WeakSet,m_=new WeakSet,w_=new WeakSet,b_=new WeakSet,T_=new WeakSet,C_=new WeakSet,k_=new WeakSet,S_=new WeakSet,O_=function(){function e(){var i=this;t(this,e),Qv(this,S_),Qv(this,k_),Qv(this,C_),Qv(this,T_),Qv(this,b_),Qv(this,w_),Qv(this,m_),Qv(this,E_),Qv(this,y_),Qv(this,__),Qv(this,v_),Qv(this,g_),t_(this,n_,{writable:!0,value:void 0}),t_(this,r_,{writable:!0,value:void 0}),t_(this,a_,{writable:!0,value:void 0}),t_(this,s_,{writable:!0,value:void 0}),t_(this,o_,{writable:!0,value:void 0}),t_(this,l_,{writable:!0,value:void 0}),t_(this,h_,{writable:!0,value:void 0}),t_(this,c_,{writable:!0,value:void 0}),t_(this,u_,{writable:!0,value:!1}),t_(this,f_,{writable:!0,value:function(t){i_(i,__,x_).call(i,t)}}),t_(this,d_,{writable:!0,value:function(t){i_(i,y_,I_).call(i,t)}}),t_(this,p_,{writable:!0,value:function(){i_(i,E_,P_).call(i)}}),kt(this,a_,window.devicePixelRatio||1),kt(this,r_,"black"),kt(this,u_,!1),kt(this,s_,2),kt(this,o_,6),kt(this,l_,1.5),kt(this,h_,20),kt(this,c_,[])}return n(e,[{key:"create",value:function(t){kt(this,n_,document.getElementById(t.signatureid)),Ct(this,n_).width=400,Ct(this,n_).height=200,i_(this,g_,L_).call(this)}},{key:"destroy",value:function(){/Android|iPhone|iPad|Mobile/i.test(navigator.userAgent)&&("ontouchstart"in window||navigator.maxTouchPoints)?(window.removeEventListener("touchcancel",Ct(this,p_)),window.removeEventListener("touchend",Ct(this,p_))):window.removeEventListener("mouseup",Ct(this,p_))}},{key:"getBase64",value:function(){return Ct(this,n_).toDataURL("image/png",1)}}]),e}();function L_(){Ct(this,n_).style.touchAction="none",/Android|iPhone|iPad|Mobile/i.test(navigator.userAgent)&&("ontouchstart"in window||navigator.maxTouchPoints)?(Ct(this,n_).addEventListener("touchstart",Ct(this,f_)),Ct(this,n_).addEventListener("touchmove",Ct(this,d_)),window.addEventListener("touchcancel",Ct(this,p_)),window.addEventListener("touchend",Ct(this,p_))):(Ct(this,n_).addEventListener("mousedown",Ct(this,f_)),Ct(this,n_).addEventListener("mousemove",Ct(this,d_)),window.addEventListener("mouseup",Ct(this,p_)))}function R_(t){var e=Date.now(),i=Ct(this,c_).slice(-1)[0];if(!i||i.t!==e){var n=Ct(this,n_).getBoundingClientRect(),r=t.touches&&t.touches[0]||t,a=r.clientX-n.left,s=r.clientY-n.top;if(!i||i.x!==a||i.y!==s){var o={x:a,y:s,t:e};if(i){var l=Ct(this,c_).slice(-2,-1)[0];if(o.distance=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),o.speed=o.distance/(o.t-i.t||.1),o.lineWidth=i_(this,w_,M_).call(this,o.speed),l&&l.lineWidth&&i.lineWidth){var h=(o.lineWidth-i.lineWidth)/i.lineWidth,c=Ct(this,h_)/100;if(c=c>1?1:c<.01?.01:c,Math.abs(h)>c){var u=h>0?c:-c;o.lineWidth=i.lineWidth*(1+u)}}}Ct(this,c_).push(o),kt(this,c_,Ct(this,c_).slice(-3))}}}function x_(t){t.preventDefault(),kt(this,u_,!0),Ct(this,n_).getContext("2d").strokeStyle=Ct(this,r_),i_(this,v_,R_).call(this,t)}function I_(t){var e=this;if(t.preventDefault(),Ct(this,u_)&&(i_(this,v_,R_).call(this,t),!(Ct(this,c_).length<2))){var i=Ct(this,c_).slice(-1)[0],n=Ct(this,c_).slice(-2,-1)[0];window.requestAnimationFrame?window.requestAnimationFrame((function(){return i_(e,m_,A_).call(e,n,i)})):i_(this,m_,A_).call(this,n,i)}}function P_(){Ct(this,u_)&&(kt(this,u_,!1),kt(this,c_,[]))}function A_(t,e){i_(this,C_,B_).call(this,t,e)}function M_(t){var e=Ct(this,l_)>10?10:Ct(this,l_)<1?1:Ct(this,l_),i=(Ct(this,o_)-Ct(this,s_))*t/e,n=Math.max(Ct(this,o_)-i,Ct(this,s_));return Math.min(n,Ct(this,o_))}function D_(t,e,i,n){var r=i-t,a=n-e;if(0===r)return{val:0,pos:-1};if(0===a)return{val:0,pos:1};var s=Math.abs(Math.atan(a/r));return i>t&&n<e||i<t&&n>e?{val:s,pos:1}:{val:s,pos:-1}}function N_(t,e,i,n){if(0===t.val)return 1===t.pos?[{x:e,y:i+n},{x:e,y:i-n}]:[{y:i,x:e+n},{y:i,x:e-n}];var r=Math.sin(t.val)*n,a=Math.cos(t.val)*n;return 1===t.pos?[{x:e+r,y:i+a},{x:e-r,y:i-a}]:[{x:e+r,y:i-a},{x:e-r,y:i+a}]}function B_(t,e){var i=e.x-t.x,n=e.y-t.y;if(Math.abs(i)+Math.abs(n)<=Ct(this,a_)?(e.lastX1=e.lastX2=t.x+.5*i,e.lastY1=e.lastY2=t.y+.5*n):(e.lastX1=t.x+.3*i,e.lastY1=t.y+.3*n,e.lastX2=t.x+.7*i,e.lastY2=t.y+.7*n),e.perLineWidth=(t.lineWidth+e.lineWidth)/2,"number"==typeof t.lastX1){if(i_(this,k_,W_).call(this,t.lastX2,t.lastY2,t.x,t.y,e.lastX1,e.lastY1,e.perLineWidth),t.isFirstPoint)return;if(t.lastX1===t.lastX2&&t.lastY1===t.lastY2)return;var r=i_(this,b_,D_).call(this,t.lastX1,t.lastY1,t.lastX2,t.lastY2),a=i_(this,T_,N_).call(this,r,t.lastX1,t.lastY1,t.perLineWidth/2),s=i_(this,T_,N_).call(this,r,t.lastX2,t.lastY2,e.perLineWidth/2);i_(this,S_,H_).call(this,a[0],s[0],s[1],a[1])}else e.isFirstPoint=!0}function W_(t,e,i,n,r,a,s){var o=Ct(this,n_).getContext("2d");o.lineWidth=Number(s.toFixed(1)),o.beginPath(),o.moveTo(Number(t.toFixed(1)),Number(e.toFixed(1))),o.quadraticCurveTo(Number(i.toFixed(1)),Number(n.toFixed(1)),Number(r.toFixed(1)),Number(a.toFixed(1))),o.stroke()}function H_(t,e,i,n){var r=Ct(this,n_).getContext("2d");r.beginPath(),r.moveTo(Number(t.x.toFixed(1)),Number(t.y.toFixed(1))),r.lineTo(Number(e.x.toFixed(1)),Number(e.y.toFixed(1))),r.lineTo(Number(i.x.toFixed(1)),Number(i.y.toFixed(1))),r.lineTo(Number(n.x.toFixed(1)),Number(n.y.toFixed(1))),r.fillStyle=Ct(this,r_),r.fill()}function F_(t,e){j_(t,e),e.add(t)}function Y_(t,e,i){j_(t,e),e.set(t,i)}function j_(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function X_(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var z_=function(){function e(){t(this,e)}return n(e,null,[{key:"drawMSh",value:function(t,e,i,n){var r=new iy;r.parse(e,i),r.paint(t,n)}}]),e}(),U_=function(){function e(){t(this,e)}return n(e,[{key:"parse",value:function(t,e){}},{key:"paint",value:function(t,e){}}]),e}(),G_=new WeakMap,V_=new WeakMap,K_=new WeakMap,Z_=new WeakMap,J_=new WeakMap,q_=new WeakMap,$_=new WeakMap,Q_=new WeakMap,ty=new WeakSet,ey=new WeakSet,iy=function(e){mt(o,e);var i,r,s=(i=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(i);if(r){var n=bt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wt(this,t)});function o(){var e;t(this,o);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return F_(yt(e=s.call.apply(s,[this].concat(n))),ey),F_(yt(e),ty),Y_(yt(e),G_,{writable:!0,value:void 0}),Y_(yt(e),V_,{writable:!0,value:void 0}),Y_(yt(e),K_,{writable:!0,value:void 0}),Y_(yt(e),Z_,{writable:!0,value:void 0}),Y_(yt(e),J_,{writable:!0,value:void 0}),Y_(yt(e),q_,{writable:!0,value:void 0}),Y_(yt(e),$_,{writable:!0,value:void 0}),Y_(yt(e),Q_,{writable:!0,value:void 0}),e}return n(o,[{key:"parse",value:function(t,e){kt(this,G_,t),kt(this,V_,e.ba),kt(this,K_,e.st1),kt(this,Z_,e.st2),kt(this,J_,e.ce1),kt(this,q_,e.ce2),kt(this,$_,e.am),kt(this,Q_,e.la)}},{key:"paint",value:function(t){var e=t.getContext("2d"),i=X_(this,ty,ny).call(this,"".concat(Ct(this,V_),"岁")),n=X_(this,ty,ny).call(this,"".concat(Ct(this,K_),"~").concat(Ct(this,Z_))),r=X_(this,ty,ny).call(this,"".concat(Ct(this,J_),"~").concat(Ct(this,q_))),s=X_(this,ty,ny).call(this,"".concat(Ct(this,$_)?Ct(this,Q_)+"岁":Ct(this,Q_))),o=(n.height+r.height)/2;e.save(),e.strokeStyle=Ct(this,G_).color,e.lineWidth=a.WIDTH_UNDERLINE,e.font=X_(this,ey,ry).call(this),e.fillText(i.str,0,o+i.height/2),e.fillText(n.str,i.width,o),e.fillText(r.str,i.width,o+r.height),e.fillText(s.str,i.width+Math.max(n.width,r.width),o+s.height/4),e.moveTo(i.width,o),e.lineTo(i.width+Math.max(n.width,r.width),o),e.stroke(),e.restore()}}]),o}(U_);function ny(t){var e=this,i={width:0,height:0,str:t};return t.forEach((function(t){var n=el.character(t,a.SCRIPT_NOR,Ct(e,G_).size,Ct(e,G_).rowspac);i.width+=n.width,i.height+=n.height})),i}function ry(){var t=[];return Ct(this,G_).bold&&t.push("bold"),Ct(this,G_).italic&&t.push("italic"),t.push("".concat(Ct(this,G_).size,"px")),t.push("".concat(Ct(this,G_).font)),t.join(" ")}var ay=new WeakMap,sy=function(){function e(){var i,n,r;t(this,e),r={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=ay),n.set(i,r)}return n(e,[{key:"create",value:function(t){var e=this,i=new oy(t.platter);i.draw(),i.triggerclick((function(i){kt(e,ay,"#".concat(i.r.toString(16)).concat(i.g.toString(16)).concat(i.b.toString(16))),t.show.style.backgroundColor=Ct(e,ay)}));var n=new ly(t.barhelper);n.draw(),n.triggerclick((function(n){i.update(n);var r=i.getPickColor();kt(e,ay,"#".concat(r.r.toString(16)).concat(r.g.toString(16)).concat(r.b.toString(16))),t.show.style.backgroundColor=Ct(e,ay)}))}},{key:"getColor",value:function(){return Ct(this,ay)}}]),e}(),oy=function(){function e(i){var n=this;t(this,e),r(this,"canvas",void 0),r(this,"ctx",void 0),r(this,"sR",void 0),r(this,"sG",void 0),r(this,"sB",void 0),r(this,"xScale",void 0),r(this,"yScale",void 0),r(this,"scaleWidth",void 0),r(this,"scaleHeight",void 0),r(this,"pickPoint",void 0),r(this,"callback",void 0),this.sR=0,this.sG=255,this.sB=255,this.canvas=i,this.ctx=this.canvas.getContext("2d"),this.xScale=Math.ceil(this.canvas.width/128),this.yScale=Math.ceil(this.canvas.height/128),this.scaleWidth=this.canvas.width/this.xScale,this.scaleHeight=this.canvas.height/this.yScale,this.canvas.onmousedown=function(t){n.setPickPoint(t)}}return n(e,[{key:"triggerclick",value:function(t){this.callback=t}},{key:"draw",value:function(){this.canvas.width,this.canvas.height;for(var t=this.xScale,e=this.yScale,i=this.scaleWidth,n=this.scaleHeight,r=0;r<i;r++)for(var a=0;a<n;a++){var s=this.getScaleColor(r,a),o="rgb("+s.r+","+s.g+","+s.b+")";this.ctx.fillStyle=o,this.ctx.fillRect(r*t,a*e,t,e)}}},{key:"dragGlobal",value:function(){this.ctx.beginPath(),this.ctx.strokeStyle="#000",this.ctx.arc(this.pickPoint.x,this.pickPoint.y,4,0,2*Math.PI),this.ctx.stroke()}},{key:"getScaleColor",value:function(t,e){var i=this.scaleWidth,n=this.scaleHeight,r=this.sR,a=this.sG,s=this.sB,o=r>a?r:a,l=o>s?o:s,h=255-t*((255-(o=o>s?s:o))/i),c=255-t*((255-(r+a+s-o-l))/i),u=255-t*((255-l)/i),f=h/n,d=Math.floor(h-e*f);f=c/n;var p=Math.floor(c-e*f);f=u/n;var g=Math.floor(u-e*f);return{r:r===l?g:r===o?d:p,g:a===l?g:a===o?d:p,b:s===l?g:s===o?d:p}}},{key:"getColor",value:function(t,e){return this.getScaleColor(t/this.xScale,e/this.yScale)}},{key:"update",value:function(t){this.sR=t.r,this.sG=t.g,this.sB=t.b,this.draw(),this.dragGlobal()}},{key:"setPickPoint",value:function(t){this.pickPoint={x:t.offsetX,y:t.offsetY},this.draw(),this.dragGlobal(),this.callback(this.getPickColor())}},{key:"getPickColor",value:function(){if(this.pickPoint)return this.getColor(this.pickPoint.x,this.pickPoint.y)}}]),e}(),ly=function(){function e(i){var n=this;t(this,e),r(this,"canvas",void 0),r(this,"ctx",void 0),r(this,"pickLineWidth",void 0),r(this,"rainWidth",void 0),r(this,"rainHeight",void 0),r(this,"pickLineY",void 0),r(this,"callback",void 0),this.canvas=i,this.ctx=this.canvas.getContext("2d"),this.pickLineWidth=10,this.rainWidth=this.canvas.width-2*this.pickLineWidth,this.rainHeight=this.canvas.height-this.pickLineWidth,this.canvas.onclick=function(t){n.dragLine(t)}}return n(e,[{key:"triggerclick",value:function(t){this.callback=t}},{key:"draw",value:function(){for(var t=this.rainWidth,e=this.rainHeight,i=this.ctx,n=this.pickLineWidth/2,r=0;r<=e;r++){var a=this.getColor(r),s="rgb("+a.r+","+a.g+","+a.b+")";i.strokeStyle=s,i.beginPath(),i.moveTo(this.pickLineWidth,r+n),i.lineTo(this.pickLineWidth+t,r+n),i.stroke()}}},{key:"getColor",value:function(t){var e=this.rainHeight,i=255/(e/6),n=255,r=0,a=0;return t<=e/3?(t<=e/6?((a=Math.floor(i*t))>255&&(a=255),n=255):((n=255-Math.floor(i*(t-e/6)))<0&&(n=0),a=255),r=0):t<=2*e/3?(t<3*e/6?((r=Math.floor(i*(t-2*e/6)))>255&&(r=255),a=255):((a=255-Math.floor(i*(t-3*e/6)))<0&&(a=0),r=255),n=0):(t<5*e/6?((n=Math.floor(i*(t-4*e/6)))>255&&(n=255),r=255):((r=255-Math.floor(i*(t-5*e/6)))<0&&(r=0),n=255),a=0),{r:n,g:r,b:a}}},{key:"drawPickLine",value:function(t){this.pickLineY=t;var e=this.pickLineWidth,i=(this.canvas.height,this.canvas.height),n=this.canvas.width,r=this.ctx;r.clearRect(0,0,e,i),r.clearRect(n-e,0,e,i),r.fillStyle="#ffaaaa",r.beginPath(),r.moveTo(0,t),r.lineTo(e,t+e/2),r.lineTo(0,t+e),r.fill(),r.beginPath(),r.moveTo(n,t),r.lineTo(n-e,t+e/2),r.lineTo(n,t+e),r.fill()}},{key:"getPickColor",value:function(){return this.getColor(this.pickLineY)}},{key:"updatePickLine",value:function(t){var e=this.pickLineWidth,i=this.canvas.height-e;t<0?t=0:t>i&&(t=i),this.drawPickLine(t)}},{key:"dragLine",value:function(t){var e=t.offsetY;this.updatePickLine(e),this.callback(this.getPickColor())}}]),e}();window.EditorDocs={control:void 0,signature:void 0,formula:void 0,colorpanel:void 0,create:function(t,e){o.compatible(),A.run(t,e)},newDocument:function(t){var e=gt.createNewDocument(t);this.control=new bv,this.control.create(),this.control.load(e)},loadDocument:function(t){this.control=new bv,this.control.create(),this.control.fileImport(t)},initDocument:function(t){this.control&&this.control.changeCompValue(t)},refresh:function(){this.control&&this.control.refresh()},registerSignature:function(t){this.signature=new O_,this.signature.create(t)},cancelSignature:function(){this.signature.destroy(),this.signature=void 0},createColorPanel:function(t){this.colorpanel=new sy,this.colorpanel.create(t)},previewMedicalExp:function(t,e){"msh"==t&&z_.drawMSh(e.canvas,.1,{},e.content,!0)},fileDownload:function(){this.control&&this.control.fileDownload()},fileImport:function(t){this.control&&this.control.fileImport(t)},fileExport:function(){if(this.control)return this.control.fileExport()},fileSave:function(){this.control&&this.control.fileSave()},filePreview:function(){this.control&&this.control.filePreview()},filePrint:function(){this.control&&this.control.filePrint()},fileExpImage:function(){this.control&&this.control.fileExpImage()},fileOutlineDownload:function(){this.control&&this.control.fileOutlineDownload()},prevStack:function(){this.control&&this.control.prevStack()},nextStack:function(){this.control&&this.control.nextStack()},setZoom:function(t){this.control&&this.control.setZoom(t)},changePaperInfo:function(t){this.control&&this.control.changePaperInfo(t)},changeTextStyle:function(t){this.control&&this.control.changeTextStyle(t)},changeParagStyle:function(t){this.control&&this.control.changeParagStyle(t)},changeFontColor:function(t){this.control&&this.control.changeFontColor(t)},changePageNum:function(t){this.control&&this.control.changePageNum(t)},changeCompInfo:function(t){this.control&&this.control.changeCompInfo(t)},changeDatePickerValue:function(t,e){this.control&&this.control.changeDatePickerValue(t,e)},changeTextFieldValue:function(t,e){this.control&&this.control.changeTextFieldValue(t,e)},changeSingleFieldValue:function(t,e){this.control&&this.control.changeSingleFieldValue(t,e)},changeMultipleFieldValue:function(t,e){this.control&&this.control.changeMultipleFieldValue(t,e)},changeExpressionValue:function(t){this.control&&this.control.changeExpressionValue(t)},changeCommentsView:function(t){this.control&&this.control.changeCommentsView(t)},verifiCommitVersion:function(t){if(this.control)return this.control.verifiCommitVersion(t)},commitVersion:function(t){this.control&&this.control.commitVersion(t)},commitRevision:function(t){this.control&&this.control.commitRevision(t)},acceptRevision:function(){this.control&&this.control.acceptRevision()},refuseRevision:function(){this.control&&this.control.refuseRevision()},previousRevision:function(){this.control&&this.control.previousRevision()},nextRevision:function(){this.control&&this.control.nextRevision()},copyText:function(t){this.control&&this.control.copyText(t)},pasteText:function(t){this.control&&this.control.pasteText(t)},cutText:function(){this.control&&this.control.cutText()},insertWord:function(t){this.control&&this.control.insertWord(t)},insertTable:function(t){this.control&&this.control.insertTable(t)},insertImage:function(t){this.control&&this.control.insertImage(t)},insertDatePicker:function(t,e){this.control&&this.control.insertDatePicker(t,e)},insertWatermark:function(t,e){this.control&&this.control.insertWatermark(t,e)},insertPageNumber:function(t){this.control&&this.control.insertPageNumber(t)},insertSignature:function(t){this.control&&this.control.insertSignature(t)},insertBarcode:function(t){this.control&&this.control.insertGraphicCode(G.IAMGE_TYPE_BARCODE,t)},insertQrcode:function(t){this.control&&this.control.insertGraphicCode(G.IAMGE_TYPE_QRCODE,t)},insertDivder:function(t){this.control&&this.control.insertDivder(t)},insertShape:function(t){this.control&&this.control.insertShape(t)},insertTextBox:function(t){this.control&&this.control.insertTextBox(t)},insertTextField:function(t){this.control&&this.control.insertTextField(t)},insertSingleField:function(t){this.control&&this.control.insertSingleField(t)},insertMultipleField:function(t){this.control&&this.control.insertMultipleField(t)},insertCheckbox:function(t){this.control&&this.control.insertCheckbox(t)},insertRadioGroup:function(t){this.control&&this.control.insertRadioGroup(t)},insertExpression:function(t){this.control&&this.control.insertExpression(t)},insertComments:function(t){this.control&&this.control.insertComments(t)},insertRevision:function(){this.control&&this.control.insertRevision()},deleteWatermark:function(){this.control&&this.control.deleteWatermark()},tableMerge:function(){this.control&&this.control.tableMerge()},tableDeleteRow:function(){this.control&&this.control.tableDeleteRow()},tableDeleteCol:function(){this.control&&this.control.tableDeleteCol()},tableDelete:function(){this.control&&this.control.tableDelete()},tableDeleteCell:function(t){this.control&&this.control.tableDeleteCell(t)},tableInsertRowAbove:function(){this.control&&this.control.tableInsertRowAbove()},tableInsertRowBelow:function(){this.control&&this.control.tableInsertRowBelow()},tableInsertColLeft:function(){this.control&&this.control.tableInsertColLeft()},tableInsertColRight:function(){this.control&&this.control.tableInsertColRight()},tableSplit:function(t){this.control&&this.control.tableSplit(t)},tableBorderChange:function(t){if(this.control)return this.control.tableBorderChange(t)},tableBorderVisible:function(t){if(this.control)return this.control.tableBorderVisible(t)},tableCellInfo:function(){if(this.control)return this.control.tableCellInfo()},editorBody:function(){this.control&&this.control.changeEditPart(a.CONTENT_PART_BODY)},editorHeader:function(){this.control&&this.control.changeEditPart(a.CONTENT_PART_HEADER)},editorFooter:function(){this.control&&this.control.changeEditPart(a.CONTENT_PART_FOOTER)},isPrintModal:function(){return A.isPrint()},isEditModal:function(){return A.isEdit()},isNoteModal:function(){return A.isNote()},isDesignModal:function(){return A.isDesign()},isModifyModal:function(){return A.isModify()},getParagStyle:function(){if(this.control)return this.control.getParagStyle()},getTextStyle:function(){if(this.control)return this.control.getTextStyle()},getPaperInfo:function(){if(this.control)return this.control.getPaperInfo()},getUsedColors:function(){if(this.control)return this.control.getUsedColors()},getSignature:function(){if(this.signature)return this.signature.getBase64()},getSeletedColor:function(){if(this.colorpanel)return this.colorpanel.getColor()},getZoomRatio:function(){return a.SYS_ZOOM},getViewSize:function(){if(this.control)return this.control.getViewSize()},getPageNumInfo:function(){if(this.control)return this.control.getPageNumInfo()},getConfigInfo:function(){var t=Object.assign({},A.getConfig()),e=a.EditorModels.findIndex((function(e){return e.value==t.modal}));return t.modalName=e>=0?a.EditorModels[e].name:"",t},getCompInfo:function(t){if(this.control){var e=this.control.getCompInfo(t);return e?JSON.parse(JSON.stringify(e)):{}}},getOutline:function(){if(this.control)return this.control.getCompValues()},getStructure:function(){if(this.control)return this.control.getStructure()},getExpExtent:function(t){var e=b.getUUID();return 0==t?{id:e,type:G.EXP_MH,field1:0,field2:12,field3:3,field4:5,field5:27,field6:35,field7:50,field8:(new Date).pattern("yyyy-MM-dd")}:1==t?{id:e,type:G.EXP_TM}:2==t?{id:e,type:G.EXP_FN,field1:!1,field2:!1,field3:!1,field4:!1,field5:!1,field6:!1}:void 0},getFontFamilyList:function(){var t=[];return a.FontFamilys.forEach((function(e){t.push(Object.assign({},e))})),t},getFontSizeList:function(){var t=[];return a.FontSizes.forEach((function(e){t.push(Object.assign({},e))})),t},getParagAlignList:function(){return[{label:"左对齐",value:a.ALIGN_LEFT},{label:"右对齐",value:a.ALIGN_RIGHT},{label:"居中对齐",value:a.ALIGN_CENTER},{label:"两段对齐",value:a.ALIGN_BOTH},{label:"分散对齐",value:a.ALIGN_DISPERSED}]},getParagIndentList:function(){return[{label:"无",value:a.INDENT_TYPE_NULL},{label:"首行缩进",value:a.INDENT_TYPE_TEXT},{label:"悬挂缩进",value:a.INDENT_TYPE_HANG}]},getParagSpaceList:function(){return[{label:"1",value:1},{label:"1.15",value:1.15},{label:"1.5",value:1.5},{label:"2",value:2},{label:"2.5",value:2.5},{label:"3",value:3}]},getSymbolList:function(){for(var t=[],e={name:"常用",list:[]},i=0;i<16;i++)e.list.push("≠¥①②③№√×↓→↑←‰¾¼½"[i]);t.push(e);for(var n={name:"符号",list:[]},r=0;r<44;r++)n.list.push("＋－×±÷㎏㎎㎜㎝㎡㏄ml㏕ɑɡαβθ℃〖〗｛｝©®＠＆＊＃％‰＄￥§¦※◎≈…≤≥≦≧"[r]);return t.push(n),t},getTableBorderRangeList:function(){return[{label:"单元格",value:"0"},{label:"整个表格",value:"1"}]},getPageNumShowList:function(){return[{label:"是",value:"1"},{label:"否",value:"0"}]},getPageNumPatternList:function(){var t=[];return a.PageNumPatterns.forEach((function(e){t.push(Object.assign({},e))})),t},getPageNumAlignList:function(){return[{label:"左对齐",value:a.ALIGN_LEFT},{label:"右对齐",value:a.ALIGN_RIGHT},{label:"居中对齐",value:a.ALIGN_CENTER}]},getDataPatternList:function(){var t=[];return a.DatePatterns.forEach((function(e){t.push(e)})),t},getPaperTypeList:function(){var t=[];return a.PaperTypes.forEach((function(e){t.push(Object.assign({standard:!0},e))})),t.push({standard:!1,name:"自定义",value:"custom"}),t},getPaperDirecList:function(){return a.PaperDirections},getPaperMarginList:function(){return a.PaperMargins},getWaterMarkFontSizeList:function(){return[{value:1e3,name:"100"},{value:1500,name:"150"},{value:2e3,name:"200"},{value:2500,name:"250"},{value:3e3,name:"300"},{value:3500,name:"350"},{value:4e3,name:"400"},{value:4500,name:"450"}]},getZoomScaleList:function(){return[.1,.2,.3,.4,.5,.6,.7,.8,.9,.95,1,1.1,1.2,1.25,1.5,1.75,2,2.5,3,4,5]},colorTool:function(t,e){return"h16ToInt"==t?w.h16ToInt(e):"intToH16"==t?w.intToH16(e):void 0},stringTool:function(t,e){return"isNotBlank"==t?b.isNotBlank(e):"uuid"==t?b.getUUID():void 0},objectTool:function(t,e){return"isUndefined"==t?m.isUndefined(e):"isNotUndefined"==t?m.isNotUndefined(e):void 0},canvasTool:function(t,e,i){"drawWaterMark"==e&&bc.draw(t,i)},devicesTool:function(t,e){"fullscreen"==t&&g.fullscreen()}}})()})();
//# sourceMappingURL=peach-editor-min.js.map